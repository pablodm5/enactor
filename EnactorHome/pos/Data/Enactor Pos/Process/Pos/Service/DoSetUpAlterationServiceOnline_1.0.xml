<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<core:process xmlns:core="http://www.enactor.com/core" xmlns:retail="http://www.enactor.com/retail" xmlns:ns4="http://www.enactor.com/crm" xmlns:hta="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/api/200803" xmlns:ns6="http://www.apis-it.hr/fin/2012/types/f73" xmlns:ns7="http://www.w3.org/2000/09/xmldsig#" xmlns:ns8="http://www.enactor.com/retail/storedRetailTransaction/service" xmlns:ns9="http://www.fu.gov.si/" xmlns:ns10="http://www.enactor.com/addressLookup/service" xmlns:htd="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/200803" xmlns:htt="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xmlns:sref="http://docs.oasis-open.org/wsbpel/2.0/serviceref" xmlns:ns14="http://www.enactor.com/crm/customerLoyalty/service" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <core:processID>Pos/Service/DoSetUpAlterationServiceOnline</core:processID>
    <core:version>1.0</core:version>
    <core:name>SendAccountBalanceUpdate</core:name>
    <core:defaultMessageBaseName></core:defaultMessageBaseName>
    <core:firstStateID>Start</core:firstStateID>
    <core:className></core:className>
    <core:uiHints>
        <entry>
            <key>com.enactor.tools.editor.process.style</key>
            <value>1023</value>
        </entry>
        <entry>
            <key>com.enactor.tools.editor.process.xloc</key>
            <value>8</value>
        </entry>
        <entry>
            <key>com.enactor.tools.editor.process.yloc</key>
            <value>8</value>
        </entry>
    </core:uiHints>
    <core:metaData>
        <core:inputs>
            <core:input required="true" name="enactor.coreUI.EndpointReference">
                <core:interfaceName>com.enactor.core.processConnections.IEndpointReference</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.coreUI.User">
                <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.Basket">
                <core:interfaceName>com.enactor.mfc.basket.IBasket</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.Device">
                <core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.Location">
                <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.TransactionHandler">
                <core:interfaceName>com.enactor.core.transaction.ITransactionHandler</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.PosTerminal">
                <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
            </core:input>
        </core:inputs>
        <stateDataTypes>
            <stateDataType required="true" name="enactor.coreUI.EndpointReference">
                <core:interfaceName>com.enactor.core.processConnections.IEndpointReference</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.User">
                <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.Basket">
                <core:interfaceName>com.enactor.mfc.basket.IBasket</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.Device">
                <core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.Location">
                <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.PosTerminal">
                <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.RetailAlterationHeader">
                <core:interfaceName>com.enactor.mfc.retail.alteration.IRetailAlterationHeader</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.RetailAlterationHeaderId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.RetailAlterationItems">
                <core:interfaceName>java.util.List</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.TransactionHandler">
                <core:interfaceName>com.enactor.core.transaction.ITransactionHandler</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.OnlineServiceStatus">
                <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServiceStatus</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.OnlineServicesStatusList">
                <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServicesStatusList</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
                <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
            </stateDataType>
        </stateDataTypes>
    </core:metaData>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>End Process Success</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2138</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>18</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>Success</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>EndProcessFail</core:actionID>
        <core:name>End Process Fail</core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>862</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>18</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>Fail</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>RaiseAccountUpdateSentEvent</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UISendEventAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1886</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>208</value>
            </entry>
        </core:uiHints>
        <core:param value="enactor.pos.AlterationServiceSetUpSuccessfully" name="enactor.coreUI.EventName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="true" required="false" name="enactor.coreUI.EventForwardAllViews">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="false" name="enactor.coreUI.EventForwardAllViews">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.coreUI.EventName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.RetailAlterationHeaderId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:comment>Event to signify that the account balance update has been sent successfully.</core:comment>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SaveServiceStatusToViewSuccess</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>RaiseAccountUpdateOfflineEvent</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UISendEventAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1128</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>214</value>
            </entry>
        </core:uiHints>
        <core:param value="enactor.pos.ServiceProductServicesOffline" name="enactor.coreUI.EventName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="true" required="false" name="enactor.coreUI.EventForwardAllViews">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="false" name="enactor.coreUI.EventForwardAllViews">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.coreUI.EventName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:comment>Event to signify that the account balance update will be completed offline.</core:comment>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SaveServiceStatusToViewFail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>InitialiseOnlineServiceStatus</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1128</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>504</value>
            </entry>
        </core:uiHints>
        <core:param value="ServiceProductServices" name="enactor.pos.ServiceIdentifier">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.ServiceIdentifier">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.pos.OnlineServiceStatus">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServiceStatus</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.pos.OnlineServicesStatusList">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServicesStatusList</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>SendOnline</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>SendOnline</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>MFC/Tender/InitialiseOnlineServiceStatus</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>HandleServiceError</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.tender.processes.online.HandleServiceError</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1894</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>787</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.OnlineServiceStatus">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServiceStatus</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.pos.OnlineServiceStatus">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServiceStatus</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="ServiceOutOfService"/>
                <core:outcome name="ServiceNotOutOfService"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>ServiceOffline</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceOutOfService</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Retry - TODO</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceNotOutOfService</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SaveServiceStatusToViewSuccess</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.mfc.tender.online.actions.SaveServiceStatusToView</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1886</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>18</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.OnlineServiceStatus">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServiceStatus</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.OnlineServicesStatusList">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServicesStatusList</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>End Process Success</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SaveServiceStatusToViewFail</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.mfc.tender.online.actions.SaveServiceStatusToView</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1118</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>18</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.OnlineServiceStatus">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServiceStatus</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.OnlineServicesStatusList">
                    <core:interfaceName>com.enactor.mfc.tender.online.IOnlineServicesStatusList</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>EndProcessFail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateFailRaiseAccountUpdateFailedEvent</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UISendEventAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>862</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>208</value>
            </entry>
        </core:uiHints>
        <core:param value="enactor.pos.AlterationServiceSetUpFailed" name="enactor.coreUI.EventName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="true" required="false" name="enactor.coreUI.EventForwardAllViews">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="false" name="enactor.coreUI.EventForwardAllViews">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.coreUI.EventName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:comment>Event to signify that the alteration services could not be invoked</core:comment>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>EndProcessFail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateRetailAlterationHeaderAndItems</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.mfc.retail.alteration.actions.CreateAlterationHeaderAndItemsFromBasket</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>338</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>445</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.UserId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.DeviceKey">
                    <core:interfaceName>com.enactor.mfc.device.IDeviceKey</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.LocationKey">
                    <core:interfaceName>com.enactor.mfc.location.ILocationKey</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.RetailSaleTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailSaleTransaction</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.TerminalNumber">
                    <core:interfaceName>java.lang.Long</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.RetailAlterationItems">
                    <core:interfaceName>java.util.List</core:interfaceName>
                </core:output>
                <core:output name="enactor.mfc.RetailAlterationHeader">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.IRetailAlterationHeader</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateFailRaiseAccountUpdateFailedEvent</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateAlterationServiceSetUpTransactionEntity</core:toActionID>
            <core:condition>notEmpty(process.retailAlterationHeader) &amp;&amp;
notEmpty(process.retailAlterationItems)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateFailRaiseAccountUpdateFailedEvent</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>InvokeWrappedWebServiceAction</core:actionID>
        <core:name>InvokeWrappedWebServiceAction</core:name>
        <core:className>com.enactor.commonUI.webService.processes.InvokeWrappedWebServiceAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1394</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>962</value>
            </entry>
        </core:uiHints>
        <core:param value="" name="enactor.mfc.WorkroomId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="setUpAlterationService" name="enactor.webService.OperationName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="AlterationServiceSetUpTransaction,UserId,WorkroomId,DeviceId" name="enactor.webService.argument.Sequence">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EndpointReference">
                    <core:interfaceName>com.enactor.core.processConnections.IEndpointReference</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.DeviceId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.WorkroomId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.webService.ActionUrl">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.webService.ErrorOnFault">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.webService.OperationName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.webService.argument.Sequence">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Object">
                    <core:interfaceName>java.lang.Object</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateFailRaiseAccountUpdateFailedEvent</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ExtractHeaderId</core:toActionID>
            <core:condition>notEmpty(state.alterationServiceSetUpResult) &amp;&amp;
state.alterationServiceSetUpResult.outcome != 'Fail' &amp;&amp;
notEmpty(state.alterationServiceSetUpResult.retailAlterationHeaderId)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>HandleServiceError</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ExtractHeaderId</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1686</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>983</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.AlterationServiceSetUpResult">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpResult</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>RaiseAccountUpdateSentEvent</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="alterationServiceDetailItem.retailAlterationHeaderId" fromExpression="alterationServiceSetUpResult.retailAlterationHeaderId"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateAlterationServiceSetUpTransactionEntity</core:actionID>
        <core:name>AlterationServiceSetUpTransaction</core:name>
        <core:className>com.enactor.coreUI.actions.CreateEntityAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>348</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>866</value>
            </entry>
        </core:uiHints>
        <core:param value="alterationServiceSetUpTransaction" name="enactor.coreUI.EntityName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="http://www.enactor.com/retail" name="enactor.coreUI.EntityNamespace">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EntityName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.EntityNamespace">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Entity">
                    <core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:comment>Creates an entity from the namespace and local name.</core:comment>
        <core:typeId>Action</core:typeId>
        <core:outcomeLink>
            <core:linkID></core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SetAlterationServiceSetUpTransactionProperties</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SetAlterationServiceSetUpTransactionProperties</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>568</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>866</value>
            </entry>
        </core:uiHints>
        <core:param value="AlterationServiceSetUp" name="Topic">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="POS" name="SourceApplication">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="POS" name="ApplicationId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="1" name="TransactionStatus">
            <core:interfaceName>java.lang.Integer</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="AlterationHeader">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.IRetailAlterationHeader</core:interfaceName>
                </core:input>
                <core:input name="AlterationItems">
                    <core:interfaceName>java.util.List</core:interfaceName>
                </core:input>
                <core:input name="ApplicationId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="Entity">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:input>
                <core:input name="SequenceNumber">
                    <core:interfaceName>long</core:interfaceName>
                </core:input>
                <core:input name="Source">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="SourceApplication">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="Topic">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="TransactionId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="TransactionStatus">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="Entity">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:comment>Assigns entity properties</core:comment>
        <core:typeId>Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SetNextSequenceNumberAction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="entity.alterationHeader" fromExpression="alterationHeader"/>
        <core:dataAssignment toExpression="entity.alterationItems" fromExpression="alterationItems"/>
        <core:dataAssignment toExpression="entity.applicationId" fromExpression="applicationId"/>
        <core:dataAssignment toExpression="entity.source" fromExpression="source"/>
        <core:dataAssignment toExpression="entity.sourceApplication" fromExpression="sourceApplication"/>
        <core:dataAssignment toExpression="entity.topic" fromExpression="topic"/>
        <core:dataAssignment toExpression="entity.transactionId" fromExpression="transactionId"/>
        <core:dataAssignment toExpression="entity.transactionStatus" fromExpression="transactionStatus"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SetNextSequenceNumberAction</core:actionID>
        <core:name>SetNextSequenceNumberAction</core:name>
        <core:className>com.enactor.coreUI.sequenceNumber.SetNextSequenceNumberAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>784</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>861</value>
            </entry>
        </core:uiHints>
        <core:param value="AlterationServiceSetUp" name="enactor.coreUI.SequenceNumberTopic">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="POS" name="enactor.coreUI.SequenceNumberSourceApplication">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.SequenceNumberSource">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.SequenceNumberSourceApplication">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.SequenceNumberTopic">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.SequencedMessage">
                    <core:interfaceName>com.enactor.core.message.ISequencedMessage</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetAlterationNumberAction</core:toActionID>
            <core:condition>isEmpty(process.alterationServiceDetailItem.alterationNumber)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SetAlterationNumberOnTx</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetAlterationNumberAction</core:actionID>
        <core:name>GetAlterationNumberAction</core:name>
        <core:className>com.enactor.mfc.retail.alteration.actions.GetAlterationNumberAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>798</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1179</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.RetailTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransaction</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Device">
                    <core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.AlterationNumber">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output name="enactor.mfc.AlterationTransactionNumber">
                    <core:interfaceName>java.lang.Long</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
            <core:sessionManagementType>MAKE_SESSION_IF_NO_CURRENT</core:sessionManagementType>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SetAlterationNumbers</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateFailRaiseAccountUpdateFailedEvent</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SetAlterationNumbers</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1034</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1182</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="false" name="enactor.mfc.AlterationNumber">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>InitialiseOnlineServiceStatus</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="alterationServiceSetUpTransaction.alterationHeader.retailAlterationNumber" fromExpression="alterationNumber"/>
        <core:dataAssignment toExpression="alterationServiceDetailItem.alterationNumber" fromExpression="alterationNumber"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SetAlterationNumberOnTx</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1041</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>862</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>InitialiseOnlineServiceStatus</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="alterationServiceSetUpTransaction.alterationHeader.retailAlterationNumber" fromExpression="alterationServiceDetailItem.alterationNumber"/>
    </core:assignAction>
    <core:eventLink>
        <core:linkID>1</core:linkID>
        <core:toStateID></core:toStateID>
        <core:toActionID>EndProcessFail</core:toActionID>
        <core:condition></core:condition>
        <core:event>Exception</core:event>
    </core:eventLink>
    <core:state>
        <core:url></core:url>
        <core:stateID>InitialiseOnlineServiceStatus</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1132</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>791</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>InitialiseOnlineServiceStatus</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>SendOnline</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>37</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1392</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>787</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.mfc.AlterationServiceSetUpResult">
                    <core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpResult</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>InvokeWrappedWebServiceAction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.EndpointReference">
<core:interfaceName>com.enactor.core.processConnections.IEndpointReference</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.EndpointReference">
<core:interfaceName>com.enactor.core.processConnections.IEndpointReference</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>user.userId</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Device">
<core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.DeviceId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>device.deviceId</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.webService.ActionUrl">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.webService.ErrorOnFault">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>InvokeWrappedWebServiceAction</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Object">
<core:interfaceName>java.lang.Object</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.AlterationServiceSetUpResult">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpResult</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>ServiceOffline</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition>process.onlineServiceStatus.outOfService</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>InvokeWrappedWebServiceAction</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>ServiceOffline</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2160</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>925</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>RaiseAccountUpdateOfflineEvent</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>HandleServiceError</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1643</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>787</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>HandleServiceError</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Retry - TODO</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2160</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>794</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>ServiceOffline</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Start</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>37</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>70</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>687</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="false" name="enactor.mfc.AlterationNumber">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="false" name="enactor.mfc.AlterationTransactionNumber">
                    <core:interfaceName>java.lang.Long</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>CreateRetailAlterationHeaderAndItems</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
<core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.basket.items.AlterationServiceDetailItem">
<core:interfaceName>com.enactor.mfc.basket.items.IAlterationServiceDetailItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.core.transaction.ITransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.RetailSaleTransaction">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailSaleTransaction</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>transactionHandler.transaction</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Device">
<core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.DeviceKey">
<core:interfaceName>com.enactor.mfc.device.IDeviceKey</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>device.key</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.LocationKey">
<core:interfaceName>com.enactor.mfc.location.ILocationKey</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>location.key</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.TerminalNumber">
<core:interfaceName>java.lang.Long</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>posTerminal.terminalNumber</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>user.userId</core:expression>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>SetAlterationServiceSetUpTransactionProperties</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.RetailAlterationHeader">
<core:interfaceName>com.enactor.mfc.retail.alteration.IRetailAlterationHeader</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="AlterationHeader">
<core:interfaceName>com.enactor.mfc.retail.alteration.IRetailAlterationHeader</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.RetailAlterationItems">
<core:interfaceName>java.util.List</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="AlterationItems">
<core:interfaceName>java.util.List</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Device">
<core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="Source">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>device.deviceId</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="Entity">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="SequenceNumber">
<core:interfaceName>long</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:targetDataType name="TransactionId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>SetNextSequenceNumberAction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.SequencedMessage">
<core:interfaceName>com.enactor.core.message.ISequencedMessage</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Device">
<core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.SequenceNumberSource">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>device.deviceId</core:expression>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>GetAlterationNumberAction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Device">
<core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.Device">
<core:interfaceName>com.enactor.mfc.device.IDevice</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.core.transaction.ITransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.RetailTransaction">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransaction</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>transactionHandler.transaction</core:expression>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>CreateAlterationServiceSetUpTransactionEntity</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>SetAlterationServiceSetUpTransactionProperties</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="Entity">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.AlterationServiceSetUpTransaction">
<core:interfaceName>com.enactor.mfc.retail.alteration.service.IAlterationServiceSetUpTransaction</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateRetailAlterationHeaderAndItems</core:toActionID>
            <core:condition>instanceOf(process.transactionHandler.transaction,'com.enactor.mfc.retail.transaction.IRetailSaleTransaction')</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>End Process Success</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:stateTransitions/>
</core:process>
