<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<core:process xmlns:core="http://www.enactor.com/core" xmlns:retail="http://www.enactor.com/retail" xmlns:ns4="http://www.enactor.com/crm" xmlns:hta="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/api/200803" xmlns:ns6="http://www.apis-it.hr/fin/2012/types/f73" xmlns:ns7="http://www.w3.org/2000/09/xmldsig#" xmlns:ns8="http://www.enactor.com/retail/storedRetailTransaction/service" xmlns:ns9="http://www.fu.gov.si/" xmlns:ns10="http://www.enactor.com/addressLookup/service" xmlns:htd="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/200803" xmlns:htt="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xmlns:sref="http://docs.oasis-open.org/wsbpel/2.0/serviceref" xmlns:ns14="http://www.enactor.com/crm/customerLoyalty/service" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <core:processID>Pos/PaymentService/PaymentServiceVoiceReferral</core:processID>
    <core:version>1.0</core:version>
    <core:name></core:name>
    <core:defaultMessageBaseName></core:defaultMessageBaseName>
    <core:firstStateID>State</core:firstStateID>
    <core:className></core:className>
    <core:uiHints>
        <entry>
            <key>com.enactor.tools.editor.process.style</key>
            <value>1023</value>
        </entry>
        <entry>
            <key>com.enactor.tools.editor.process.xloc</key>
            <value>8</value>
        </entry>
        <entry>
            <key>com.enactor.tools.editor.process.yloc</key>
            <value>8</value>
        </entry>
    </core:uiHints>
    <core:metaData>
        <core:inputs>
            <core:input required="true" name="PaymentService">
                <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
            </core:input>
            <core:input name="enactor.mfc.tender.PaymentServiceTender">
                <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.coreUI.User">
                <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.coreUI.UserLocale">
                <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.Location">
                <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.PosTerminal">
                <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
            </core:input>
            <core:input required="true" name="isHostReferred">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.TransactionHandler">
                <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
            </core:input>
            <core:input name="enactor.pos.CurrentlyInTrainingMode">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </core:input>
        </core:inputs>
        <core:outputs>
            <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
            </core:output>
        </core:outputs>
        <stateDataTypes>
            <stateDataType required="true" name="isHostReferred">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.PosTerminal">
                <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="Enactor.paymentService.Exception">
                <core:interfaceName>java.lang.Exception</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="LastMessageId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.UserLocale">
                <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.CurrentlyInTrainingMode">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="FirstTime">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="LastOrgMessageId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.Location">
                <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.paymentService.VoiceReferralComplete">
                <core:interfaceName>com.enactor.paymentService.IVoiceReferralComplete</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.User">
                <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="MessageId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="PaymentService">
                <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="MessageText">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.TransactionHandler">
                <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.service.TranslationMessageBase">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType name="enactor.mfc.tender.PaymentServiceTender">
                <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
            </stateDataType>
        </stateDataTypes>
    </core:metaData>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>LogException</core:actionID>
        <core:name>UILogMessageAction</core:name>
        <core:className>com.enactor.coreUI.actions.UILogMessageAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>207</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>17</value>
            </entry>
        </core:uiHints>
        <core:param value="Error in Payment Service Tender" name="enactor.coreUI.LogMessage">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.LogMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Error</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Error</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ContinueTransaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceContinueTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>713</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>681</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Continue Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CheckCurrentlyInTrainingModeAction</core:actionID>
        <core:name>CheckCurrentlyInTrainingModeAction</core:name>
        <core:className>com.enactor.pos.packages.startSale.processes.CheckCurrentlyInTrainingModeAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>450</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>509</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.ForceTrainingMode">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.pos.CurrentlyInTrainingMode">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Voice Referral Complete Request</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Display</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1364</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>726</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="LastOrgMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message Translation</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="lastOrgMessageId" fromExpression="paymentServiceDisplay.displayMessage"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Exception Msg</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>858</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>442</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="Exception">
                    <core:interfaceName>java.lang.Throwable</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>LogInvokeServiceException</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="exception" fromExpression="paymentServiceException.exception"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>LogInvokeServiceException</core:actionID>
        <core:name>UILogMessageAction</core:name>
        <core:className>com.enactor.coreUI.actions.UILogMessageAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>17</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>853</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>302</value>
            </entry>
        </core:uiHints>
        <core:param value="Error invoking Payment Service " name="enactor.coreUI.LogMessage">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="LOG_ERROR" name="enactor.coreUI.logging.LogLevel">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.logging.LogLevel">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="Exception">
                    <core:interfaceName>java.lang.Throwable</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.LogMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Fail</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>745</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>17</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceFail</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Complete</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1580</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>19</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceComplete</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Fail: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>504</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>124</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Complete: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1768</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>163</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>HostMessageFIS</core:toActionID>
            <core:condition>process.paymentService.model == &quot;FIS&quot;</core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>HostMessage</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Display:Receipt</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1337</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>901</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Display New message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="'WAIT_PAYMENT_SERVICE_CARDHOLDER_RECEIPT'"/>
        <core:dataAssignment toExpression="messageText" fromExpression="''"/>
    </core:assignAction>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Cancel</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1197</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>19</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceCancel</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Cancel: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1318</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>170</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Voice Referral Complete Request</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>701</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>503</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.CurrentlyInTrainingMode">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.VoiceReferralComplete">
                    <core:interfaceName>com.enactor.paymentService.IVoiceReferralComplete</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="isHostReferred">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="FirstTime">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.paymentService.VoiceReferralComplete">
                    <core:interfaceName>com.enactor.paymentService.IVoiceReferralComplete</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Continue Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="voiceReferralComplete.deviceId" fromExpression="paymentServiceTenderItem.deviceId"/>
        <core:dataAssignment toExpression="voiceReferralComplete.locationId" fromExpression="location.id"/>
        <core:dataAssignment toExpression="voiceReferralComplete.userId" fromExpression="user.userId"/>
        <core:dataAssignment toExpression="voiceReferralComplete.transactionDate" fromExpression="paymentServiceTenderItem.dateTimeCreated"/>
        <core:dataAssignment toExpression="voiceReferralComplete.trainingMode" fromExpression="currentlyInTrainingMode"/>
        <core:dataAssignment toExpression="voiceReferralComplete.terminalNumber" fromExpression="posTerminal.terminalNumber"/>
        <core:dataAssignment toExpression="firstTime" fromExpression="true"/>
        <core:dataAssignment toExpression="voiceReferralComplete.authorisationCode" fromExpression="paymentServiceTenderItem.authorisationCode"/>
        <core:dataAssignment toExpression="messageId" fromExpression="isHostReferred == true ? 'COMPLETING_WAIT' : 'AUTHORISING_WAIT_CANCEL'"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateEntity:Voice Referral Complete</core:actionID>
        <core:name>CreateEntityAction</core:name>
        <core:className>com.enactor.coreUI.actions.CreateEntityAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>215</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>504</value>
            </entry>
        </core:uiHints>
        <core:param value="voiceReferralComplete" name="enactor.coreUI.EntityName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="http://www.enactor.com/core" name="enactor.coreUI.EntityNamespace">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EntityName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.EntityNamespace">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Entity">
                    <core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CheckCurrentlyInTrainingModeAction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Voice ReferralException</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.CreateDeviceException</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>282</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>126</value>
            </entry>
        </core:uiHints>
        <core:param value="Error(s) occured while processing  voice refferal transaction" name="Enactor.paymentService.ErrorMessage">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="Enactor.paymentService.Exception">
                    <core:interfaceName>java.lang.Exception</core:interfaceName>
                </core:input>
                <core:input name="Enactor.paymentService.ErrorMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="Enactor.paymentService.ErrorCode">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="Enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>UpdateLastMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2011</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>518</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="LastOrgMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceTenderItem.hostMessage" fromExpression="notEmpty(lastOrgMessageId) ? lastOrgMessageId : paymentServiceTenderItem.hostMessage"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Message Translation</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceMessageTranslation</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1544</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>809</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.service.PaymentServiceDisplay">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Empty"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Display New message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Continue Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Empty</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Continue: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2294</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>323</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Signature</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2182</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>19</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceSignature</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Default:OnRequestException</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1994</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>71</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Exception Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="'INVALID_CONTINUE_TRANSACTION'"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Default:Exception</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>749</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>206</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Exception Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Exception Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="'CAPTURE_VOICE_REFERRAL_FAULT'"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Message Id</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1524</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>300</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Auth Fail Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="isEmpty(lastMessageId) ? 'CARD_AUTHORISATION_DECLINED' : 'CARD_AUTHORISATION_DECLINED_HOST'"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>HostMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1557</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>458</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message Id</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="lastMessageId" fromExpression="paymentServiceTenderItem.hostMessage"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>HostMessageFIS</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1528</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>363</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message Id</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="lastMessageId" fromExpression="notEmpty(lastMessageId) ?lastMessageId : paymentServiceTenderItem.hostMessage"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ResetFirstTime</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>886</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1007</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="FirstTime">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="FirstTime">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ContinueTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="firstTime" fromExpression="false"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ProcessReceiptDataFIS</core:actionID>
        <core:name>ProcessReceiptDataFIS</core:name>
        <core:className>com.enactor.pos.packages.paymentService.ProcessReceiptDataFIS</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1771</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>687</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.ReceiptDataMap">
                    <core:interfaceName>java.util.Map</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Continue Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:eventLink>
        <core:linkID>1</core:linkID>
        <core:toStateID></core:toStateID>
        <core:toActionID>LogException</core:toActionID>
        <core:condition></core:condition>
        <core:event>Exception</core:event>
    </core:eventLink>
    <core:state>
        <core:url></core:url>
        <core:stateID>State</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>217</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>420</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>CheckCurrentlyInTrainingModeAction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.pos.ForceTrainingMode">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>CreateEntity:Voice Referral Complete</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.VoiceReferralComplete">
<core:interfaceName>com.enactor.paymentService.IVoiceReferralComplete</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateEntity:Voice Referral Complete</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:promptState>
        <core:url>Pos/PaymentService/PaymentServiceWaitPrompt</core:url>
        <core:stateID>Continue Transaction Wait</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIPromptState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1123</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>563</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="true" name="ShowCancelButton">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </core:output>
            </core:outputs>
            <handledEvents>
                <handledEvent name="CancelPressed"/>
                <handledEvent name="PaymentServiceComplete"/>
                <handledEvent name="PaymentServiceDisplay"/>
                <handledEvent name="PaymentServiceException"/>
                <handledEvent name="PaymentServiceReceipt"/>
                <handledEvent name="StateEntered"/>
                <handledEvent name="PaymentServiceOnRequest"/>
                <handledEvent name="PaymentServiceGetConfirmation"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                </stateDataType>
                <stateDataType name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.PromptState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>true</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>ContinueTransaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.VoiceReferralComplete">
<core:interfaceName>com.enactor.paymentService.IVoiceReferralComplete</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Message Translation</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.PaymentServiceDisplay">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Continue: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceOnRequest.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>ProcessReceiptDataFIS</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.ReceiptDataMap">
<core:interfaceName>java.util.Map</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceReceipt.receiptData</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>Message Translation</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="LastMessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Display</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceDisplay</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Exception</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceException</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>6</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceComplete</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ResetFirstTime</core:toActionID>
            <core:condition>process.firstTime==true</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ProcessReceiptDataFIS</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceReceipt</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>5</core:linkID>
            <core:toStateID>Cancel</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>CancelPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>7</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Continue: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceOnRequest</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>8</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ProcessReceiptDataFIS</core:toActionID>
            <core:condition>process.paymentService.model == &quot;FIS&quot;</core:condition>
            <core:comment>There's only an FIS implementation of this anyway at present</core:comment>
            <core:event>PaymentServiceReceipt</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>9</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ContinueTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceGetConfirmation</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
    </core:promptState>
    <core:state>
        <core:url></core:url>
        <core:stateID>Display New message</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1337</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1029</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Continue Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Complete</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1771</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>611</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Complete: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>UpdateLastMessage</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Exception</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1110</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>446</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Fail: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceException.exception</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>Exception Msg</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="Exception">
<core:interfaceName>java.lang.Throwable</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="Enactor.paymentService.Exception">
<core:interfaceName>java.lang.Exception</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception Msg</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Cancel</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1333</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>565</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </stateDataType>
                <stateDataType name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Cancel: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceException.exception</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Cancel: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:messageState>
        <core:url>Pos/PaymentService/MessageOKPrompt</core:url>
        <core:stateID>Exception Message</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIMessageState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>745</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>118</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.MessageState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:event>Exception</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId></core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:state>
        <core:url></core:url>
        <core:stateID>Error</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>447</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>22</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes/>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Fail: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceException.exception</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Voice ReferralException</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="Enactor.paymentService.Exception">
<core:interfaceName>java.lang.Exception</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:targetDataType name="Enactor.paymentService.ErrorCode">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>Voice ReferralException</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="Enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="Enactor.paymentService.Exception">
<core:interfaceName>java.lang.Exception</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Voice ReferralException</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Voice ReferralException</core:toActionID>
            <core:condition></core:condition>
            <core:event>Exception</core:event>
        </core:eventLink>
    </core:state>
    <core:messageState>
        <core:url>Pos/PaymentService/MessageOKPrompt</core:url>
        <core:stateID>Auth Fail Message</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIMessageState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1523</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>225</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="CARD_AUTHORISATION_DECLINED_HOST" name="MessageId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.MessageState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId></core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:state>
        <core:url></core:url>
        <core:stateID>Continue Txn</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2289</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>223</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="true" name="ShowCancelButton">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Signature</core:toActionID>
            <core:condition>state.paymentServiceOnRequest.requestAction=='Signature'</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:OnRequestException</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition>state.paymentServiceOnRequest.requestAction=='Voice_Referral'</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:stateTransitions/>
</core:process>
