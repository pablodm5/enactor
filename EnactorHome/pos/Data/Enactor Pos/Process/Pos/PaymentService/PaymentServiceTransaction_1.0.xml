<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<core:process xmlns:core="http://www.enactor.com/core" xmlns:retail="http://www.enactor.com/retail" xmlns:ns4="http://www.enactor.com/crm" xmlns:hta="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/api/200803" xmlns:ns6="http://www.apis-it.hr/fin/2012/types/f73" xmlns:ns7="http://www.w3.org/2000/09/xmldsig#" xmlns:ns8="http://www.enactor.com/retail/storedRetailTransaction/service" xmlns:ns9="http://www.fu.gov.si/" xmlns:ns10="http://www.enactor.com/addressLookup/service" xmlns:htd="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/200803" xmlns:htt="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xmlns:sref="http://docs.oasis-open.org/wsbpel/2.0/serviceref" xmlns:ns14="http://www.enactor.com/crm/customerLoyalty/service" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <core:processID>Pos/PaymentService/PaymentServiceTransaction</core:processID>
    <core:version>1.0</core:version>
    <core:name></core:name>
    <core:defaultMessageBaseName></core:defaultMessageBaseName>
    <core:firstStateID>Entry</core:firstStateID>
    <core:className></core:className>
    <core:uiHints>
        <entry>
            <key>com.enactor.tools.editor.process.style</key>
            <value>1023</value>
        </entry>
        <entry>
            <key>com.enactor.tools.editor.process.xloc</key>
            <value>8</value>
        </entry>
        <entry>
            <key>com.enactor.tools.editor.process.yloc</key>
            <value>8</value>
        </entry>
    </core:uiHints>
    <core:metaData>
        <core:inputs>
            <core:input required="true" name="enactor.mfc.PosTerminal">
                <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsRefund">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.coreUI.User">
                <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.coreUI.UserLocale">
                <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.CurrentlyInTrainingMode">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.Location">
                <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
            </core:input>
            <core:input name="enactor.mfc.PaymentServiceTender">
                <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
            </core:input>
            <core:input required="true" name="PaymentService">
                <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsReversal">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.mfc.TransactionHandler">
                <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.paymentService.CardInsertMessage">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsLoad">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input name="enactor.pos.ForceUseCardScheme">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsKeyed">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsPreAutrh">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsIssue">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="true" name="enactor.pos.IsRedeem">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input name="enactor.pos.CardholderNotPresent">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
            <core:input required="false" name="enactor.mfc.ReturnOriginalTenderDetail">
                <core:interfaceName>com.enactor.mfc.basket.items.IReturnOriginalTenderDetail</core:interfaceName>
            </core:input>
            <core:input required="false" name="enactor.pos.EmployeeCard">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:input>
        </core:inputs>
        <core:outputs>
            <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
            </core:output>
            <core:output required="true" name="enactor.pos.MerchantVoucherPrinted">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </core:output>
        </core:outputs>
        <stateDataTypes>
            <stateDataType required="true" name="enactor.pos.IsLoad">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.OriginalCardTenderDetails">
                <core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.OriginalTransactionDate">
                <core:interfaceName>java.util.Date</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.OriginalCaptureReference">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
                <core:interfaceName>java.lang.Integer</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="ShowCancelButton">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.ConfirmationDeclined">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.IsKeyed">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="FirstTime">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.CurrentlyInTrainingMode">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.paymentService.CardPaymentRequest">
                <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.TransactionHandler">
                <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
            </stateDataType>
            <stateDataType name="enactor.pos.CardholderNotPresent">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.IsRedeem">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.Location">
                <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="MessageText">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.service.TranslationMessageBase">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.OriginalReversalReference">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="Exception">
                <core:interfaceName>java.lang.Throwable</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
                <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.IsRefund">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.paymentService.CardInsertMessage">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.service.Default">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType transient="true" required="true" name="enactor.paymentService.SignatureReversal">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="MessageId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.paymentService.GiftCardPaymentRequest">
                <core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="LastMessageId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.IsReversal">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.PosTerminal">
                <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.UserLocale">
                <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.IsPreAutrh">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.IsIssue">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.User">
                <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="LastOrgMessageId">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.pos.MerchantVoucherPrinted">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="PaymentService">
                <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
            </stateDataType>
            <stateDataType required="false" name="enactor.mfc.ReturnOriginalTenderDetail">
                <core:interfaceName>com.enactor.mfc.basket.items.IReturnOriginalTenderDetail</core:interfaceName>
            </stateDataType>
            <stateDataType required="false" name="enactor.pos.EmployeeCard">
                <core:interfaceName>java.lang.Boolean</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.coreUI.deviceEvent.OriginalPaymentServiceComplete">
                <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
            </stateDataType>
            <stateDataType required="true" name="enactor.mfc.LocationAttributes">
                <core:interfaceName>java.util.Map</core:interfaceName>
            </stateDataType>
            <stateDataType name="enactor.mfc.PaymentServiceTender">
                <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
            </stateDataType>
            <stateDataType name="enactor.pos.ForceUseCardScheme">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </stateDataType>
        </stateDataTypes>
    </core:metaData>
    <core:notes>
        <core:processNote>
            <core:noteId>Note0</core:noteId>
            <core:description>Depending on whether the &quot;signature void&quot; succeeds, we either &quot;decline&quot; the originally successful card payment transaction or accept its results.</core:description>
            <core:constraint>
                <core:x>2044</core:x>
                <core:y>2227</core:y>
                <core:height>98</core:height>
                <core:width>301</core:width>
            </core:constraint>
        </core:processNote>
        <core:processNote>
            <core:noteId>Note1</core:noteId>
            <core:description>We must tell the payment service that post-transaction signature verification has been completed(so that it can e.g. release an &quot;allocated&quot; shared PED).</core:description>
            <core:constraint>
                <core:x>1647</core:x>
                <core:y>2816</core:y>
                <core:height>75</core:height>
                <core:width>242</core:width>
            </core:constraint>
        </core:processNote>
    </core:notes>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>BeginTransaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceBeginTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>701</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1028</value>
            </entry>
        </core:uiHints>
        <core:param value="0" name="enactor.paymentService.Timeout">
            <core:interfaceName>java.lang.Integer</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.Timeout">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CardInsertMessage</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SignatureReversalMessage</core:toActionID>
            <core:condition>process.signatureReversal</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>LogException</core:actionID>
        <core:name>UILogMessageAction</core:name>
        <core:className>com.enactor.coreUI.actions.UILogMessageAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>207</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>4</value>
            </entry>
        </core:uiHints>
        <core:param value="Error in Payment Service Tender" name="enactor.coreUI.LogMessage">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.LogMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>ProcessError</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>ProcessError</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>LogInvokeServiceException</core:actionID>
        <core:name>UILogMessageAction</core:name>
        <core:className>com.enactor.coreUI.actions.UILogMessageAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>706</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>439</value>
            </entry>
        </core:uiHints>
        <core:param value="Error invoking Payment Service " name="enactor.coreUI.LogMessage">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="LOG_ERROR" name="enactor.coreUI.logging.LogLevel">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.logging.LogLevel">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="Exception">
                    <core:interfaceName>java.lang.Throwable</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.LogMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateEntity:PaymentServiceRequest</core:actionID>
        <core:name>CreateEntityAction</core:name>
        <core:className>com.enactor.coreUI.actions.CreateEntityAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>231</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>704</value>
            </entry>
        </core:uiHints>
        <core:param value="cardPaymentRequest" name="enactor.coreUI.EntityName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="http://www.enactor.com/core" name="enactor.coreUI.EntityNamespace">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EntityName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.EntityNamespace">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Entity">
                    <core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Init Values</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>PaymentServiceRequest</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>486</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>539</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalReversalReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalAuthorisationReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalCaptureReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalTransactionDate">
                    <core:interfaceName>java.util.Date</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.CurrentlyInTrainingMode">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsLoad">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.BasketData">
                    <core:interfaceName>com.enactor.mfc.basket.IBasketData</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsReversal">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsKeyed">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsPreAutrh">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsRefund">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsIssue">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.CardholderNotPresent">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.ForceUseCardScheme">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message:BeginTxn</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Apply Additional Amounts</core:toActionID>
            <core:condition>notEmpty(process.posTerminal.consumerBenefits) || size(process.paymentServiceTenderItem.childItems) &gt; 0</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="cardPaymentRequest.deviceId" fromExpression="paymentServiceTenderItem.deviceId"/>
        <core:dataAssignment toExpression="cardPaymentRequest.locationId" fromExpression="location.locationId"/>
        <core:dataAssignment toExpression="cardPaymentRequest.userId" fromExpression="user.userId"/>
        <core:dataAssignment toExpression="cardPaymentRequest.terminalNumber" fromExpression="posTerminal.terminalNumber"/>
        <core:dataAssignment toExpression="cardPaymentRequest.transactionDate" fromExpression="paymentServiceTenderItem.dateTimeCreated"/>
        <core:dataAssignment toExpression="cardPaymentRequest.trainingMode" fromExpression="currentlyInTrainingMode"/>
        <core:dataAssignment toExpression="cardPaymentRequest.currencyId" fromExpression="paymentServiceTenderItem.currencyId"/>
        <core:dataAssignment toExpression="cardPaymentRequest.amount" fromExpression="paymentServiceTenderItem.currencyId == basketData.basket.currencyId ? paymentServiceTenderItem.tenderAmount : paymentServiceTenderItem.foreignAmount"/>
        <core:dataAssignment toExpression="cardPaymentRequest.paymentReference" fromExpression="paymentServiceTenderItem.paymentReference"/>
        <core:dataAssignment toExpression="cardPaymentRequest.refund" fromExpression="(notEmpty(isRefund) &amp;&amp; isRefund)  || (notEmpty(isLoad) &amp;&amp; isLoad) || (notEmpty(isIssue) &amp;&amp; isIssue)"/>
        <core:dataAssignment toExpression="cardPaymentRequest.reversal" fromExpression="notEmpty(isReversal) ? isReversal : false"/>
        <core:dataAssignment toExpression="cardPaymentRequest.transactionId" fromExpression="transactionHandler.transaction.transactionId"/>
        <core:dataAssignment toExpression="cardPaymentRequest.lineNumber" fromExpression="basketData.basket.lineCount + 1"/>
        <core:dataAssignment toExpression="cardPaymentRequest.manualPAN" fromExpression="isEmpty(isKeyed)  ? false : isKeyed"/>
        <core:dataAssignment toExpression="cardPaymentRequest.preAuthorised" fromExpression="isEmpty(isPreAutrh) ? false : isPreAutrh"/>
        <core:dataAssignment toExpression="cardPaymentRequest.cardholderNotPresent" fromExpression="isEmpty(cardholderNotPresent) ? false : cardholderNotPresent"/>
        <core:dataAssignment toExpression="cardPaymentRequest.STAN" fromExpression="paymentServiceTenderItem.STAN"/>
        <core:dataAssignment toExpression="cardPaymentRequest.schemeType" fromExpression="paymentServiceTenderItem.schemeType"/>
        <core:dataAssignment toExpression="cardPaymentRequest.originalCaptureReference" fromExpression="originalCaptureReference"/>
        <core:dataAssignment toExpression="cardPaymentRequest.originalAuthorisationReference" fromExpression="originalAuthorisationReference"/>
        <core:dataAssignment toExpression="cardPaymentRequest.originalTransactionDate" fromExpression="originalTransactionDate"/>
        <core:dataAssignment toExpression="cardPaymentRequest.forceUseCardScheme" fromExpression="forceUseCardScheme"/>
        <core:dataAssignment toExpression="cardPaymentRequest.originalReversalReference" fromExpression="originalReversalReference"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Message:BeginTxn</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>705</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>591</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ExtensionSetCardPaymentRequest</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="'CONTACTING_PAYMENT_SERVICE_WAIT'"/>
        <core:dataAssignment toExpression="messageText" fromExpression="''"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Display</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1326</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>842</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="LastOrgMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.paymentService.DisplayMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message Translation</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ResetFirstTime</core:toActionID>
            <core:condition>process.paymentService.model == &quot;FIS&quot; &amp;&amp; process.firstTime &amp;&amp;  process.lastOrgMessageId == 'waiting for card'</core:condition>
            <core:comment>Suppress the first &quot;waiting for card&quot; message from the FIS PED otherwise we just overwrite our verbose insert card prompt.</core:comment>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="lastOrgMessageId" fromExpression="paymentServiceDisplay.displayMessage"/>
        <core:dataAssignment toExpression="lastMessageId" fromExpression="paymentServiceDisplay.displayMessage"/>
        <core:dataAssignment toExpression="displayMessageBase" fromExpression="isEmpty(paymentServiceDisplay.messageBase) ?     translationMessageBase :     concat('Pos/PaymentService/', paymentServiceDisplay.messageBase)"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Exception Msg</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>912</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>452</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="Exception">
                    <core:interfaceName>java.lang.Throwable</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>LogInvokeServiceException</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="exception" fromExpression="paymentServiceException.exception"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Convert  Exception Message</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceExceptionMessage</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>901</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>186</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.Default">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Exception Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>TryLoadingMessage</core:toActionID>
            <core:condition>notEmpty(process.messageId)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Default:Exception</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1152</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>598</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="enactor.pos.service.Default">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception Msg</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="default" fromExpression="'CAPTURE_SERVICE_ERROR'"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Default:OnRequestException</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1856</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>836</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="enactor.pos.service.Default">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Convert  Exception Message</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="default" fromExpression="'INVALID_CONTINUE_TRANSACTION'"/>
    </core:assignAction>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Fail</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>653</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>4</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceFail</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Cancel</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2784</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>4</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceCancel</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Complete</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1306</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>5</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceComplete</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Cancel: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2185</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>280</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>IsConfirmationDeclined</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>IsConfirmationDeclined</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>IsConfirmationDeclined</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Fail: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>499</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1637</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail:CallCancelTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail:CallCancelTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail:CallCancelTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Exception: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>702</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>133</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Report Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Report Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Report Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Complete: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1917</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>101</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Host Message FIS</core:toActionID>
            <core:condition>process.paymentService.model == &quot;FIS&quot;</core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>HostMessage</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>6</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Null Action</core:toActionID>
            <core:condition>process.paymentServiceComplete.paymentServiceResponse.outcome == 'Success' &amp;&amp;
isEmpty(process.paymentServiceComplete.paymentServiceResponse.handlingPaymentServiceType) &amp;&amp;
process.paymentService.model == 'Enactor'</core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>7</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>HostMessage</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Continue: Update Service Tender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1649</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>843</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID>Continue Txn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Payment Service Exception</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.CreateDeviceException</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>283</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>104</value>
            </entry>
        </core:uiHints>
        <core:param value="Error(s) occured while processing payment transaction" name="Enactor.paymentService.ErrorMessage">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="Enactor.paymentService.Exception">
                    <core:interfaceName>java.lang.Exception</core:interfaceName>
                </core:input>
                <core:input name="Enactor.paymentService.ErrorMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="Enactor.paymentService.ErrorCode">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="Enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>UpdateLastMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1923</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>493</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="LastOrgMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceTenderItem.hostMessage" fromExpression="isEmpty(paymentServiceTenderItem.hostMessage) ? lastMessageId : paymentServiceTenderItem.hostMessage"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Assign Message Id</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1511</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>315</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Report Failure</core:toActionID>
            <core:condition>state.paymentServiceComplete.paymentServiceResponse.outcome == 'Fail'</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Auth Fail Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="isEmpty(lastMessageId) ? 'CARD_AUTHORISATION_DECLINED' : 'CARD_AUTHORISATION_DECLINED_HOST'"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Message Translation</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceMessageTranslation</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1326</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>989</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.PaymentServiceDisplay">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Empty"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Display New message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ResetFirstTime</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Empty</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Fail: End Payment Service</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceEndTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>492</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>77</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Complete: End Payment Service</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceEndTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1506</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>107</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Exception: End Payment Service</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceEndTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>852</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>10</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Fail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Cancel:End Payment Service</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceEndTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2784</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>78</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Call Cancel Transaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2784</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>215</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="ServiceCancel"/>
                <core:outcome name="ServiceComplete"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Cancel:End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceCancel</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Cancel:End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceComplete</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/CancelPaymentServiceTransaction</core:executeProcessId>
    </core:executeProcessAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Continue Transaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2429</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>664</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="PrimaryPrinter">
                    <core:interfaceName>com.enactor.coreUI.peripherals.printer.IPrinter</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.IsPreAutrh">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.pos.MerchantVoucherPrinted">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Fail"/>
                <core:outcome name="Cancel"/>
                <core:outcome name="ServiceComplete"/>
                <core:outcome name="ServiceFail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Call Cancel Transaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Cancel</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceComplete</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Exception</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceFail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Null Action</core:toActionID>
            <core:condition>isEmpty(process.paymentServiceTenderItem.handlingPaymentServiceType) &amp;&amp;
process.paymentService.model == 'Enactor'</core:condition>
            <core:outcome>ServiceComplete</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/PaymentServiceContinueTransaction</core:executeProcessId>
    </core:executeProcessAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CardInsertMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>705</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1250</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardInsertMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.pos.CardholderNotPresent">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="notEmpty(cardInsertMessage) &amp;&amp; (cardInsertMessage != 'INSERT_CARD') ? cardInsertMessage : ((notEmpty(cardholderNotPresent) &amp;&amp; cardholderNotPresent) ? 'KEY_CARD' : 'INSERT_CARD_WITH_CONTACTLESS')"/>
        <core:dataAssignment toExpression="messageText" fromExpression="''"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetConfirmation</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1159</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1250</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceGetConfirmation">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceGetConfirmationEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.mfc.ReturnOriginalTenderDetail">
                    <core:interfaceName>com.enactor.mfc.basket.items.IReturnOriginalTenderDetail</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.EmployeeCard">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Decline"/>
                <core:outcome name="Cancel"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Cancel</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Cancel</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetConf:UpdateTenderItem</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>SetConfirmationDecline</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Decline</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/PaymentServiceGetConfirmation</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ContinueTransaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceContinueTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1648</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1293</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ResetFirstTime</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Host Message FIS</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1515</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>385</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Assign Message Id</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="lastMessageId" fromExpression="notEmpty(lastMessageId) ? (notEmpty(paymentServiceTenderItem.hostMessage) &amp;&amp; !strings:compareStrings(lastMessageId, paymentServiceTenderItem.hostMessage) ? concat( lastMessageId, concat('-', paymentServiceTenderItem.hostMessage)) :  lastMessageId) : paymentServiceTenderItem.hostMessage"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>HostMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1723</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>386</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Assign Message Id</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CompleteFail:EndTransaction</core:toActionID>
            <core:condition>process.paymentService.model == 'ESocket'</core:condition>
            <core:comment>Don't show message here for ESocket - we'll show it later with optional retry button.</core:comment>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="lastMessageId" fromExpression="paymentServiceTenderItem.hostMessage"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetConf:UpdateTenderItem</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.BuildPaymentServiceTenderItem</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1389</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1250</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.PaymentServiceResponse">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                </core:input>
                <core:input name="enactor.paymentService.DeviceException">
                    <core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="Authorised"/>
                <core:outcome name="Aborted"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>UpdateCardSchemeType</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>UpdateCardSchemeType</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Authorised</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Aborted</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>UpdateCardSchemeType</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1622</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1527</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ContinueTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="cardPaymentRequest.schemeType" fromExpression="cardPaymentResponse.schemeType"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CompleteFail:EndTransaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceEndTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1723</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>107</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ServiceCompleteFail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ServiceCompleteFail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ServiceCompleteFail</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1523</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>5</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>ServiceCompleteFail</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ResetFirstTime</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1116</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>989</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="FirstTime">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="FirstTime">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="firstTime" fromExpression="false"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Init Values</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>230</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>982</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.IsRefund">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsLoad">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsReversal">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.pos.IsLoad">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.pos.IsRefund">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.pos.IsReversal">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="FirstTime">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>InitMessageBase</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="isLoad" fromExpression="isEmpty(isLoad) ? false : isLoad"/>
        <core:dataAssignment toExpression="isRefund" fromExpression="isEmpty(isRefund) ? false : isRefund"/>
        <core:dataAssignment toExpression="isReversal" fromExpression="isEmpty(isReversal) ? false : isReversal"/>
        <core:dataAssignment toExpression="firstTime" fromExpression="true"/>
        <core:dataAssignment toExpression="showCancelButton" fromExpression="true"/>
        <core:dataAssignment toExpression="promptTimeoutSecs" fromExpression="600"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ProcessReceiptDataFIS</core:actionID>
        <core:name>ProcessReceiptDataFIS</core:name>
        <core:className>com.enactor.pos.packages.paymentService.ProcessReceiptDataFIS</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1474</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>518</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.paymentService.ReceiptDataMap">
                    <core:interfaceName>java.util.Map</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>InitMessageBase</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>484</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1354</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.pos.service.DefaultTranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Load Location Attributes</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="translationMessageBase" fromExpression="(paymentService.model == 'Smartpay') ? 'Pos/PaymentService/PaymentServiceSmartpayTranslationMessages' : (paymentService.model == 'ESocket') ? 'Pos/PaymentService/PaymentServiceESocketTranslationMessages' : (paymentService.model == 'GlobalPayments') ? 'Pos/PaymentService/PaymentServiceGlobalPaymentsTranslationMessages' : (paymentService.model == 'VeriFonePoint') ? 'Pos/PaymentService/PaymentServiceVeriFonePointTranslationMessages' : (paymentService.model == 'FIS') ? 'Pos/PaymentService/PaymentServiceFISTranslationMessages' : (paymentService.model == 'Adyen') ? 'Pos/PaymentService/PaymentServiceAdyenTranslationMessages' : 'Pos/PaymentService/PaymentServiceMessages'"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Fail:CallCancelTransaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>225</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1358</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.tender.PaymentServiceTender">
                    <core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="ServiceCancel"/>
                <core:outcome name="ServiceComplete"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceCancel</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Exception</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>ServiceComplete</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/CancelPaymentServiceTransaction</core:executeProcessId>
    </core:executeProcessAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SetConfirmationDecline</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1159</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1874</value>
            </entry>
        </core:uiHints>
        <core:param value="true" name="enactor.pos.ConfirmationDeclined">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.ConfirmationDeclined">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.pos.ConfirmationDeclined">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Cancel</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>AddDeclineVoidReason</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.tender.processes.card.AddToVoidReasons</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2429</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>339</value>
            </entry>
        </core:uiHints>
        <core:param value="VALIDATION_RULE" name="enactor.pos.VoidReason">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.mfc.CardPaymentTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.VoidReason">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.CardPaymentTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Call Cancel Transaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>IsConfirmationDeclined</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2429</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>215</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>AddDeclineVoidReason</core:toActionID>
            <core:condition>notEmpty(process.confirmationDeclined) &amp;&amp; process.confirmationDeclined</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Call Cancel Transaction</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ExtensionSetCardPaymentRequest</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallExtensionPointProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>705</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>657</value>
            </entry>
        </core:uiHints>
        <core:param value="SetCardPaymentRequest" name="enactor.coreUI.ExtensionPointId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.ExtensionPointId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.LocationAttributes">
                    <core:interfaceName>java.util.Map</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="enactor.action.StopExtensionLinking"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>enactor.action.StopExtensionLinking</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId></core:executeProcessId>
    </core:executeProcessAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ShowCancelButton</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1126</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>840</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Display New message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="showCancelButton" fromExpression="true"/>
        <core:dataAssignment toExpression="promptTimeoutSecs" fromExpression="0"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ExtensionAdjustCancelButtonOnMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallExtensionPointProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1259</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>519</value>
            </entry>
        </core:uiHints>
        <core:param value="AdjustCancelButtonOnMessage" name="enactor.coreUI.ExtensionPointId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:input>
                <core:input required="true" name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.ExtensionPointId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="enactor.action.StopExtensionLinking"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Display</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Display</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>enactor.action.StopExtensionLinking</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Display</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId></core:executeProcessId>
    </core:executeProcessAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Apply Additional Amounts</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallExtensionPointProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>490</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>218</value>
            </entry>
        </core:uiHints>
        <core:param value="ApplyAdditionalAmountsExtension" name="enactor.coreUI.ExtensionPointId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.ExtensionPointId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="enactor.action.StopExtensionLinking"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message:BeginTxn</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>enactor.action.StopExtensionLinking</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Message:BeginTxn</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId></core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>RaiseDCCOfferedEvent</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UISendEventAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>47</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1970</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1412</value>
            </entry>
        </core:uiHints>
        <core:param value="enactor.pos.DCCOffered" name="enactor.coreUI.EventName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="true" required="false" name="enactor.coreUI.EventForwardAllViews">
            <core:interfaceName>java.lang.Boolean</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EventForwardAllViews">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.EventName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.BaseAmount">
                    <core:interfaceName>java.lang.Long</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.BaseCurrencyId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.ForeignAmount">
                    <core:interfaceName>java.lang.Long</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.ForeignCurrencyId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.ExchangeRate">
                    <core:interfaceName>java.lang.Double</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.RateMarkupIndicator">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ContinueTransaction (DCC)</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Post Transaction Signature Verification</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallExtensionPointProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1412</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2401</value>
            </entry>
        </core:uiHints>
        <core:param value="PaymentServiceSignatureVerificationExtension" name="enactor.coreUI.ExtensionPointId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.ExtensionPointId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="PrimaryPrinter">
                    <core:interfaceName>com.enactor.coreUI.peripherals.printer.IPrinter</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.TransactionHandler">
                    <core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.pos.MerchantVoucherPrinted">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
                <core:outcome name="enactor.action.StopExtensionLinking"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallExtensionPoint</core:typeId>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Initiate Signature Reversal</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateEntity:SignatureVerification</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateEntity:SignatureVerification</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>enactor.action.StopExtensionLinking</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId></core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Check Signature Required</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1727</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2204</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Post Transaction Signature Verification</core:toActionID>
            <core:condition>state.cardPaymentResponse.signatureRequired &amp;&amp;
isEmpty(state.cardPaymentResponse.signatureData) &amp;&amp;
!process.cardholderNotPresent &amp;&amp;
!process.isReversal &amp;&amp;
!process.signatureReversal</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Signature Void Successful</core:toActionID>
            <core:condition>process.signatureReversal</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Captured Signature Verification Required</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Initiate Signature Reversal</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1155</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2401</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.pos.IsReversal">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalReversalReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalAuthorisationReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalCaptureReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalTransactionDate">
                    <core:interfaceName>java.util.Date</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.paymentService.SignatureReversal">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.OriginalPaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Entry</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="isReversal" fromExpression="true"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.STAN" fromExpression="cardPaymentResponse.STAN"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.schemeType" fromExpression="cardPaymentResponse.schemeType"/>
        <core:dataAssignment toExpression="signatureReversal" fromExpression="true"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.signatureMismatch" fromExpression="true"/>
        <core:dataAssignment toExpression="originalPaymentServiceComplete" fromExpression="paymentServiceComplete"/>
        <core:dataAssignment toExpression="originalTransactionDate" fromExpression="cardPaymentResponse.transactionDate"/>
        <core:dataAssignment toExpression="originalCaptureReference" fromExpression="cardPaymentResponse.captureReference"/>
        <core:dataAssignment toExpression="originalAuthorisationReference" fromExpression="cardPaymentResponse.authorisationReference"/>
        <core:dataAssignment toExpression="originalReversalReference" fromExpression="cardPaymentResponse.reversalReference"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Extract Card Payment Response</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1423</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1875</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Translate Completion Message</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>4</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Proceed With Completion</core:toActionID>
            <core:condition>isEmpty(state.paymentServiceComplete.messageId)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="cardPaymentResponse" fromExpression="cardPaymentResponse"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Simulate Signature Failure</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2197</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1877</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="cardPaymentResponse.outcome" fromExpression="'Declined'"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.hostMessage" fromExpression="resolveMessage('Pos/PaymentService/PaymentServiceMessages', 'CAPTURE_SIGNATURE_FAULT')"/>
        <core:dataAssignment toExpression="paymentServiceComplete.paymentServiceResponse" fromExpression="cardPaymentResponse"/>
        <core:dataAssignment toExpression="cardPaymentResponse.hostMessage" fromExpression="resolveMessage('Pos/PaymentService/PaymentServiceMessages', 'CAPTURE_SIGNATURE_FAULT')"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>SignatureReversalMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>704</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1324</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardInsertMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.pos.CardholderNotPresent">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="'VOIDING_WAIT'"/>
        <core:dataAssignment toExpression="messageText" fromExpression="''"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Check Signature Void Successful</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.notes</key>
                <value>Note0</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1949</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2124</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Simulate Signature Failure</core:toActionID>
            <core:condition>state.cardPaymentResponse.outcome == 'Success'</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Restore Original Complete</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Restore Original Complete</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1953</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1875</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.OriginalPaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceComplete" fromExpression="originalPaymentServiceComplete"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Load Location Attributes</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.mfc.locationAttribute.action.LoadLocationAttributesAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>481</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1099</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.LocationId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.LocationAttributes">
                    <core:interfaceName>java.util.Map</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
            <core:sessionManagementType>MAKE_SESSION_IF_NO_CURRENT</core:sessionManagementType>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CheckHasPaymentServiceTender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CheckHasPaymentServiceTender</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateEntity:GiftCardPaymentRequest</core:actionID>
        <core:name>CreateEntityAction</core:name>
        <core:className>com.enactor.coreUI.actions.CreateEntityAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>230</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1679</value>
            </entry>
        </core:uiHints>
        <core:param value="giftCardPaymentRequest" name="enactor.coreUI.EntityName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="http://www.enactor.com/core" name="enactor.coreUI.EntityNamespace">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EntityName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.EntityNamespace">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Entity">
                    <core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Assign Giftcard Transaction Type</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Assign Giftcard Transaction Type</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>230</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1956</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.IsIssue">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.IsLoad">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.GiftCardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.GiftCardPaymentRequest">
                    <core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Init Values</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="giftCardPaymentRequest.giftCardTransactionType" fromExpression="isIssue ? enumValue('com.enactor.paymentService.IGiftCardPaymentRequest$GiftCardTransactionType', 'LOAD_NEW_CARD') : (isLoad ?  enumValue('com.enactor.paymentService.IGiftCardPaymentRequest$GiftCardTransactionType', 'LOAD') : giftCardPaymentRequest.giftCardTransactionType)"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Check Tender Type</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>225</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>593</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateEntity:PaymentServiceRequest</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateEntity:GiftCardPaymentRequest</core:toActionID>
            <core:condition>process.paymentServiceTenderItem.tenderType != null &amp;&amp; process.paymentServiceTenderItem.tenderType == &quot;giftCardTender&quot; &amp;&amp; (process.isLoad || process.isIssue)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Check Offline</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>12</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1785</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Tender Type</core:toActionID>
            <core:condition>state.offlineAuthorisingPaymentService.authorisingOnline</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Confirm Offline</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:endProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Service Cancel (Offline)</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIEndProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>12</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2075</value>
            </entry>
        </core:uiHints>
        <core:metaData/>
        <core:typeId>enactor.types.EndProcess</core:typeId>
        <core:outcome>Cancel</core:outcome>
        <core:defaultProcessId></core:defaultProcessId>
    </core:endProcessAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Get Offline Authorising</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>12</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1560</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="OfflineAuthorisingPaymentService">
                    <core:interfaceName>com.enactor.paymentService.IOfflineAuthorisingPaymentService</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Offline</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="offlineAuthorisingPaymentService" fromExpression="paymentService"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CreateEntity:SignatureVerification</core:actionID>
        <core:name>CreateEntityAction</core:name>
        <core:className>com.enactor.coreUI.actions.CreateEntityAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.notes</key>
                <value>Note1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1713</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2574</value>
            </entry>
        </core:uiHints>
        <core:param value="signatureVerificationComplete" name="enactor.coreUI.EntityName">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="http://www.enactor.com/core" name="enactor.coreUI.EntityNamespace">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.EntityName">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.EntityNamespace">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Entity">
                    <core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Signature Verified Request</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Signature Verified Request</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1917</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2575</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.User">
                    <core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.pos.CurrentlyInTrainingMode">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.SignatureVerificationComplete">
                    <core:interfaceName>com.enactor.paymentService.ISignatureVerificationComplete</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.SignatureVerificationComplete">
                    <core:interfaceName>com.enactor.paymentService.ISignatureVerificationComplete</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Report Signature Verified</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="signatureVerificationComplete.deviceId" fromExpression="paymentServiceTenderItem.deviceId"/>
        <core:dataAssignment toExpression="signatureVerificationComplete.locationId" fromExpression="location.id"/>
        <core:dataAssignment toExpression="signatureVerificationComplete.userId" fromExpression="user.userId"/>
        <core:dataAssignment toExpression="signatureVerificationComplete.transactionDate" fromExpression="paymentServiceTenderItem.dateTimeCreated"/>
        <core:dataAssignment toExpression="signatureVerificationComplete.trainingMode" fromExpression="currentlyInTrainingMode"/>
        <core:dataAssignment toExpression="signatureVerificationComplete.terminalNumber" fromExpression="posTerminal.terminalNumber"/>
        <core:dataAssignment toExpression="signatureVerificationComplete.signatureVerified" fromExpression="true"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Report Signature Verified</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceContinueTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2122</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2576</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Captured Signature Verification</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1729</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2318</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.SignatureData">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.SignatureType">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Initiate Signature Reversal</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CreateEntity:SignatureVerification</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/DoCapturedSignatureVerification</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Check Captured Signature Verification Required</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1731</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2104</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Captured Signature Verification</core:toActionID>
            <core:condition>notEmpty(process.paymentServiceTender) &amp;&amp; process.paymentServiceTender.operatorConfirmCapturedSignature &amp;&amp; notEmpty(state.cardPaymentResponse.signatureData)</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CheckHasReturnOriginalTenderDetail</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>740</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1767</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>PaymentServiceRequest</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetOriginalTenderProperties</core:toActionID>
            <core:condition>notEmpty(process.returnOriginalTenderDetail) &amp;&amp; process.isRefund</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetOriginalTenderProperties</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.tender.processes.card.GetOriginalTenderProperties</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>746</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1840</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.ReturnOriginalTenderDetail">
                    <core:interfaceName>com.enactor.mfc.basket.items.IReturnOriginalTenderDetail</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.mfc.basket.TransactionTenderAmount">
                    <core:interfaceName>com.enactor.mfc.basket.items.ITransactionTenderAmount</core:interfaceName>
                </core:output>
                <core:output name="enactor.mfc.OriginalCardTenderDetails">
                    <core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetAuthCaptureReferences</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>ConfirmSimpleReturn</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetAuthCaptureReferences</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>755</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2068</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.OriginalCardTenderDetails">
                    <core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalReversalReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalTransactionDate">
                    <core:interfaceName>java.util.Date</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalCaptureReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalAuthorisationReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.OriginalTransactionDate">
                    <core:interfaceName>java.util.Date</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalReversalReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalAuthorisationReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalCaptureReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetOriginalCardDetails</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="originalAuthorisationReference" fromExpression="notEmpty(originalAuthorisationReference) ? originalAuthorisationReference : originalCardTenderDetails.authorisationReference"/>
        <core:dataAssignment toExpression="originalCaptureReference" fromExpression="notEmpty(originalCaptureReference) ? originalCaptureReference : originalCardTenderDetails.captureReference"/>
        <core:dataAssignment toExpression="originalTransactionDate" fromExpression="notEmpty(originalTransactionDate) ? originalTransactionDate : originalCardTenderDetails.transactionDate"/>
        <core:dataAssignment toExpression="originalReversalReference" fromExpression="notEmpty(originalReversalReference) ? originalReversalReference : originalCardTenderDetails.reversalReference"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>CheckHasPaymentServiceTender</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>943</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1768</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetPaymentServiceTenderItemReferences</core:toActionID>
            <core:condition> notEmpty(process.paymentServiceTenderItem) &amp;&amp; process.isReversal</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CheckHasReturnOriginalTenderDetail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetPaymentServiceTenderItemReferences</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>959</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2070</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.OriginalTransactionDate">
                    <core:interfaceName>java.util.Date</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalReversalReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalCaptureReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.OriginalAuthorisationReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.OriginalTransactionDate">
                    <core:interfaceName>java.util.Date</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalReversalReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalAuthorisationReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.mfc.OriginalCaptureReference">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>CheckHasReturnOriginalTenderDetail</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="originalAuthorisationReference" fromExpression="notEmpty(originalAuthorisationReference) ? originalAuthorisationReference : paymentServiceTenderItem.authorisationReference"/>
        <core:dataAssignment toExpression="originalCaptureReference" fromExpression="notEmpty(originalCaptureReference) ? originalCaptureReference : paymentServiceTenderItem.captureReference"/>
        <core:dataAssignment toExpression="originalTransactionDate" fromExpression="notEmpty(originalTransactionDate) ? originalTransactionDate : paymentServiceTenderItem.dateTimeCreated"/>
        <core:dataAssignment toExpression="originalReversalReference" fromExpression="notEmpty(originalReversalReference) ? originalReversalReference : paymentServiceTenderItem.reversalReference"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>GetOriginalCardDetails</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>758</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2355</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.OriginalCardTenderDetails">
                    <core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>PaymentServiceRequest</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.cardDescription" fromExpression="originalCardTenderDetails.cardDetails.cardDescription"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.expiryDate" fromExpression="originalCardTenderDetails.cardDetails.expiryDate"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.issueNumber" fromExpression="originalCardTenderDetails.cardDetails.issueNumber"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.mangledPAN" fromExpression="originalCardTenderDetails.cardDetails.mangledPAN"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.cardScheme" fromExpression="originalCardTenderDetails.cardDetails.cardScheme"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.PANIIN" fromExpression="originalCardTenderDetails.cardDetails.PANIIN"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.paymentAccountReference" fromExpression="originalCardTenderDetails.cardDetails.paymentAccountReference"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.PANToken" fromExpression="originalCardTenderDetails.cardDetails.PANToken"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.contactless" fromExpression="originalCardTenderDetails.cardDetails.contactless"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.keyed" fromExpression="originalCardTenderDetails.cardDetails.keyed"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.keyedAtPED" fromExpression="originalCardTenderDetails.cardDetails.keyedAtPED"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.swiped" fromExpression="originalCardTenderDetails.cardDetails.swiped"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.cardDetails.ICC" fromExpression="originalCardTenderDetails.cardDetails.ICC"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.eftCompanyId" fromExpression="originalCardTenderDetails.eftCompanyId"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.eftMerchantId" fromExpression="originalCardTenderDetails.eftMerchantId"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.eftTerminalId" fromExpression="originalCardTenderDetails.eftTerminalId"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Handle DCC Offer</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2887</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1503</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.Location">
                    <core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PosTerminal">
                    <core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Cancel"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ResetFirstTime</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Cancel</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Cancel</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/PaymentServiceDccOffer</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ContinueTransaction (DCC)</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.pos.packages.paymentService.PaymentServiceContinueTransaction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2237</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1497</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Create AcquirerKey</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Store DCC Offer Details</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2677</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1502</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.AcquirerKey">
                    <core:interfaceName>com.enactor.mfc.acquirer.IAcquirerKey</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Handle DCC Offer</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceTenderItem.acquirerKey" fromExpression="acquirerKey"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.tenderAmount" fromExpression="paymentServiceDccOffer.baseAmount"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.currencyId" fromExpression="paymentServiceDccOffer.baseCurrencyId"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.foreignAmount" fromExpression="paymentServiceDccOffer.foreignAmount"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.DCCCurrencyId" fromExpression="paymentServiceDccOffer.foreignCurrencyId"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.exchangeRate" fromExpression="paymentServiceDccOffer.exchangeRate"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.rateCommission" fromExpression="paymentServiceDccOffer.rateCommission"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.rateMargin" fromExpression="paymentServiceDccOffer.rateMargin"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.rateSource" fromExpression="paymentServiceDccOffer.rateSource"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.rateSourceDate" fromExpression="paymentServiceDccOffer.rateSourceDate"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.rateMarkupIndicator" fromExpression="paymentServiceDccOffer.rateMarkupIndicator"/>
    </core:assignAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Create AcquirerKey</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.CreateObjectAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2460</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1500</value>
            </entry>
        </core:uiHints>
        <core:param value="com.enactor.mfc.acquirer.AcquirerKey" name="enactor.coreUI.ObjectClassname">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.ObjectClassname">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Object">
                    <core:interfaceName>java.lang.Object</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Populate AcquirerKey</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Populate AcquirerKey</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2458</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1745</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.mfc.AcquirerKey">
                    <core:interfaceName>com.enactor.mfc.acquirer.IAcquirerKey</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.AcquirerKey">
                    <core:interfaceName>com.enactor.mfc.acquirer.IAcquirerKey</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Store DCC Offer Details</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="acquirerKey.acquirerId" fromExpression="paymentServiceDccOffer.acquirerId"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Report Exception</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1313</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>277</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="AltMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/PaymentServiceReportException</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Translate Completion Message</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.commonUI.message.processes.GetMessageAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1193</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2108</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.MessageBasename">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Message">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Use Completion Message</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Proceed With Completion</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Use Completion Message</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1423</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2104</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.CompletionMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Proceed With Completion</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="cardPaymentResponse.hostMessage" fromExpression="notEmpty(completionMessage) ? completionMessage : cardPaymentResponse.hostMessage"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Proceed With Completion</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1674</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1872</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Signature Required</core:toActionID>
            <core:condition>state.cardPaymentResponse.outcome == 'Success'</core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceTenderItem.handlingPaymentServiceType" fromExpression="cardPaymentResponse.handlingPaymentServiceType"/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.hostMessage" fromExpression="notEmpty(cardPaymentResponse.hostMessage) ? cardPaymentResponse.hostMessage : paymentServiceTenderItem.hostMessage "/>
        <core:dataAssignment toExpression="paymentServiceTenderItem.recovered" fromExpression="paymentServiceComplete.recovered"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Report Failure</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>11</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1309</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>95</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="AltMessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="AltMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/PaymentServiceReportException</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>TryLoadingMessage</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.commonUI.message.processes.GetMessageAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1106</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>224</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.MessageBasename">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output name="enactor.coreUI.Message">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
                <core:outcome name="Fail"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.BasicAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>DefaultMessageId</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Fail</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Exception Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>DefaultMessageId</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1110</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>0</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.pos.service.Default">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Exception Message</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="default"/>
    </core:assignAction>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Handle Transaction Started ACK</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>521</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2287</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceTransactionAcknowledge">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceTransactionAcknowledgeEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID>Begin Transaction Wait</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="paymentServiceTenderItem.paymentDeviceId" fromExpression="paymentServiceTransactionAcknowledge.paymentServiceResponse.allocatedPaymentDeviceId"/>
        <core:dataAssignment toExpression="paymentServiceRequest.paymentDeviceId" fromExpression="paymentServiceTransactionAcknowledge.paymentServiceResponse.allocatedPaymentDeviceId"/>
    </core:assignAction>
    <core:executeProcessAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Recover Transaction</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UICallProcessAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>27</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>521</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2592</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="PaymentService">
                    <core:interfaceName>com.enactor.paymentService.IRecoverablePaymentService</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.paymentService.PaymentServiceRequest">
                    <core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="CompleteTransaction"/>
                <core:outcome name="CancelTransaction"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.CallProcess</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Fail: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>CancelTransaction</core:outcome>
        </core:outcomeLink>
        <core:outcomeLink>
            <core:linkID>2</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:outcome>CompleteTransaction</core:outcome>
        </core:outcomeLink>
        <core:executeProcessId>Pos/PaymentService/PaymentServiceRecoverTransaction</core:executeProcessId>
    </core:executeProcessAction>
    <core:action>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>Null Action</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UINullAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2427</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>65</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.NullAction</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
    </core:action>
    <core:assignAction>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:actionID>ServiceDisconnectMsg</core:actionID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.actions.UIAssignAction</core:className>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1103</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>442</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:outputs>
                <core:output required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:output>
            </core:outputs>
            <core:outcomes>
                <core:outcome name="Success"/>
            </core:outcomes>
        </core:metaData>
        <core:typeId>enactor.types.Assign</core:typeId>
        <core:outcomeLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Report Exception</core:toActionID>
            <core:condition></core:condition>
            <core:outcome>Success</core:outcome>
        </core:outcomeLink>
        <core:dataAssignment toExpression="messageId" fromExpression="'CAPTURE_SERVICE_DISCONNECT'"/>
    </core:assignAction>
    <core:eventLink>
        <core:linkID>1</core:linkID>
        <core:toStateID></core:toStateID>
        <core:toActionID>LogException</core:toActionID>
        <core:condition></core:condition>
        <core:event>Exception</core:event>
    </core:eventLink>
    <core:messageState>
        <core:url>/Error/Error</core:url>
        <core:stateID>ProcessError</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIErrorState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>406</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>3</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes/>
        </core:metaData>
        <core:typeId>PosErrorMessage</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Fail: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceException.exception</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Payment Service Exception</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="Enactor.paymentService.ErrorCode">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:targetDataType name="Enactor.paymentService.Exception">
<core:interfaceName>java.lang.Exception</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Fail:CallCancelTransaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>Payment Service Exception</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="Enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="Exception">
<core:interfaceName>java.lang.Throwable</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Payment Service Exception</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Payment Service Exception</core:toActionID>
            <core:condition></core:condition>
            <core:event>Exception</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId>GENERAL_ERROR</core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:promptState>
        <core:url>Pos/PaymentService/PaymentServiceWaitPrompt</core:url>
        <core:stateID>Begin Transaction Wait</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIPromptState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1023</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>924</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>574</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:input>
            </core:inputs>
            <core:outputs>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </core:output>
                <core:output required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:output>
            </core:outputs>
            <handledEvents>
                <handledEvent name="CancelPressed"/>
                <handledEvent name="PaymentServiceComplete"/>
                <handledEvent name="PaymentServiceDccOffer"/>
                <handledEvent name="PaymentServiceDisplay"/>
                <handledEvent name="PaymentServiceException"/>
                <handledEvent name="PaymentServiceOnRequest"/>
                <handledEvent name="StateEntered"/>
                <handledEvent name="PaymentServiceReceipt"/>
                <handledEvent name="PaymentServiceGetConfirmation"/>
                <handledEvent name="PromptTimeout"/>
                <handledEvent name="PaymentServiceTransactionAcknowledge"/>
                <handledEvent name="PaymentServiceDisconnected"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </stateDataType>
                <stateDataType name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceGetConfirmation">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceGetConfirmationEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.ProcessHandle">
                    <core:interfaceName>com.enactor.coreUI.processes.ProcessHandle</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.CurrentOutcome">
                    <core:interfaceName>com.enactor.core.application.process.IApplicationProcessOutcome</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.paymentService.CardPaymentResponse">
                    <core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceTransactionAcknowledge">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceTransactionAcknowledgeEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.paymentService.CompletionMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.paymentService.SignatureVerificationComplete">
                    <core:interfaceName>com.enactor.paymentService.ISignatureVerificationComplete</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.mfc.AcquirerKey">
                    <core:interfaceName>com.enactor.mfc.acquirer.IAcquirerKey</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.paymentService.CompletionMessage">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.paymentService.DisplayMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType name="CustomMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.PromptState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>true</core:respondToViewEvents>
        <core:stateInputMappings>
            <core:mappings>
                <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
                    <core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType name="ShowCancelButton">
                    <core:interfaceName>java.lang.Boolean</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
                    <core:interfaceName>java.lang.Integer</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
        </core:stateInputMappings>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>BeginTransaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Continue: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceOnRequest.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Message Translation</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.PaymentServiceDisplay">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.DisplayMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>ContinueTransaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>GetConf:UpdateTenderItem</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceGetConfirmation">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceGetConfirmationEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceGetConfirmation.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>UpdateCardSchemeType</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceGetConfirmation">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceGetConfirmationEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceGetConfirmation.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>ProcessReceiptDataFIS</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceReceipt">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceReceiptEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.ReceiptDataMap">
<core:interfaceName>java.util.Map</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceReceipt.receiptData</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>ExtensionAdjustCancelButtonOnMessage</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
<core:interfaceName>java.lang.Integer</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
<core:interfaceName>java.lang.Integer</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="ShowCancelButton">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="ShowCancelButton">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDisplay">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDisplayEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDisplay.messageId</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>RaiseDCCOfferedEvent</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.ForeignAmount">
<core:interfaceName>java.lang.Long</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDccOffer.foreignAmount</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.BaseCurrencyId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDccOffer.baseCurrencyId</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.ForeignCurrencyId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDccOffer.foreignCurrencyId</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.BaseAmount">
<core:interfaceName>java.lang.Long</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDccOffer.baseAmount</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.ExchangeRate">
<core:interfaceName>java.lang.Double</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDccOffer.exchangeRate</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.RateMarkupIndicator">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceDccOffer.rateMarkupIndicator</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Extract Card Payment Response</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Post Transaction Signature Verification</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType required="true" name="PrimaryPrinter">
<core:interfaceName>com.enactor.coreUI.peripherals.printer.IPrinter</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Report Signature Verified</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.SignatureVerificationComplete">
<core:interfaceName>com.enactor.paymentService.ISignatureVerificationComplete</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Captured Signature Verification</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.SignatureData">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>cardPaymentResponse.signatureData</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.SignatureType">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>cardPaymentResponse.signatureType</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Fail:CallCancelTransaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>ContinueTransaction (DCC)</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Handle DCC Offer</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceDccOffer">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceDccOfferEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Create AcquirerKey</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Translate Completion Message</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.messageId</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.MessageBasename">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>isEmpty(paymentServiceComplete.messageBase) ?
    'Pos/PaymentService/PaymentServiceMessages' :
    concat('Pos/PaymentService/', paymentServiceComplete.messageBase)</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Recover Transaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IRecoverablePaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Handle Transaction Started ACK</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceTransactionAcknowledge">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceTransactionAcknowledgeEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceTransactionAcknowledge">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceTransactionAcknowledgeEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Report Exception</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="AltMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>Message Translation</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="LastMessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageText">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>ExtensionAdjustCancelButtonOnMessage</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
<core:interfaceName>java.lang.Integer</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.PromptTimeoutSecs">
<core:interfaceName>java.lang.Integer</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="ShowCancelButton">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="ShowCancelButton">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Extract Card Payment Response</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Simulate Signature Failure</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentResponse">
<core:interfaceName>com.enactor.paymentService.ICardPaymentResponse</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>CreateEntity:SignatureVerification</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.SignatureVerificationComplete">
<core:interfaceName>com.enactor.paymentService.ISignatureVerificationComplete</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Create AcquirerKey</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Object">
<core:interfaceName>java.lang.Object</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.AcquirerKey">
<core:interfaceName>com.enactor.mfc.acquirer.IAcquirerKey</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Translate Completion Message</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Message">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CompletionMessage">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>BeginTransaction</core:toActionID>
            <core:condition>process.firstTime==true</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>3</core:linkID>
            <core:toStateID>Exception</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceException</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>4</core:linkID>
            <core:toStateID>Cancel</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>CancelPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>7</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ProcessReceiptDataFIS</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceReceipt</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>6</core:linkID>
            <core:toStateID>Complete</core:toStateID>
            <core:toActionID></core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceComplete</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>5</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Continue: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceOnRequest</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>8</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>GetConfirmation</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceGetConfirmation</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>9</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ProcessReceiptDataFIS</core:toActionID>
            <core:condition>process.paymentService.model == &quot;FIS&quot;</core:condition>
            <core:comment>There's only an FIS implementation of this anyway at present</core:comment>
            <core:event>PaymentServiceReceipt</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>10</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ExtensionAdjustCancelButtonOnMessage</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceDisplay</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>11</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ShowCancelButton</core:toActionID>
            <core:condition></core:condition>
            <core:event>PromptTimeout</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>12</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>RaiseDCCOfferedEvent</core:toActionID>
            <core:condition>state.paymentServiceDccOffer.offerStage == 'OFFERED'</core:condition>
            <core:event>PaymentServiceDccOffer</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>13</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ContinueTransaction</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceDccOffer</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>14</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Extract Card Payment Response</core:toActionID>
            <core:condition>instanceOf(state.paymentServiceComplete.paymentServiceResponse, 'com.enactor.paymentService.ICardPaymentResponse')</core:condition>
            <core:event>PaymentServiceComplete</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Handle Transaction Started ACK</core:toActionID>
            <core:condition></core:condition>
            <core:event>PaymentServiceTransactionAcknowledge</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>15</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Recover Transaction</core:toActionID>
            <core:condition>instanceOf(process.paymentService, 'com.enactor.paymentService.IRecoverablePaymentService') &amp;&amp; notEmpty(process.cardPaymentRequest.paymentDeviceId)</core:condition>
            <core:event>PaymentServiceDisconnected</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>16</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ServiceDisconnectMsg</core:toActionID>
            <core:condition></core:condition>
            <core:comment>Disconnected, but transaction not (known to have) started. No recovery possible. Display error.</core:comment>
            <core:event>PaymentServiceDisconnected</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
    </core:promptState>
    <core:messageState>
        <core:url>Pos/PaymentService/MessageOKPrompt</core:url>
        <core:stateID>Exception Message</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIMessageState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>898</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>102</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="AltMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="AltMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.MessageState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:stateInputMappings>
            <core:mappings>
                <core:sourceDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
            <core:mappings>
                <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType required="true" name="AltMessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
        </core:stateInputMappings>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:event>Exception</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId></core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:state>
        <core:url></core:url>
        <core:stateID>Continue Txn</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2089</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>940</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Continue Transaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsPreAutrh">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.IsPreAutrh">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType required="true" name="PrimaryPrinter">
<core:interfaceName>com.enactor.coreUI.peripherals.printer.IPrinter</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceOnRequest">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceOnRequestEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Call Cancel Transaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>TryLoadingMessage</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.MessageBasename">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>TryLoadingMessage</core:actionID>
                <core:mappings>
                    <core:processMappings/>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Message">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Continue Transaction</core:toActionID>
            <core:condition>state.paymentServiceOnRequest.requestAction=='Voice_Referral' || state.paymentServiceOnRequest.requestAction=='Signature'</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>3</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:OnRequestException</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Display New message</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1205</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>905</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
        </core:metaData>
        <core:comment>AND SAVE THE RECEIPT DATA TO THE PROCESS DATA!</core:comment>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>ResetFirstTime</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Complete</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1729</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>581</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Complete: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>UpdateLastMessage</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Cancel</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1400</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>453</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
                <core:input name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </stateDataType>
                <stateDataType name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Cancel: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceException.exception</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>AddDeclineVoidReason</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.CardPaymentTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Call Cancel Transaction</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>AddDeclineVoidReason</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.CardPaymentTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Handle Transaction Started ACK</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.PaymentServiceRequest">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Cancel: Update Service Tender</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:state>
        <core:url></core:url>
        <core:stateID>Exception</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>919</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>513</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </core:input>
                <core:input required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
                    <core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Exception: Update Service Tender</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="PaymentService">
<core:interfaceName>com.enactor.paymentService.IPaymentService</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.coreUI.UserLocale">
<core:interfaceName>com.enactor.core.localisation.ILocale</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.tender.PaymentServiceTender">
<core:interfaceName>com.enactor.mfc.tender.IPaymentServiceTender</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.DeviceException">
<core:interfaceName>com.enactor.coreUI.peripherals.DeviceException</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceException.exception</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceComplete">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceCompleteEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.paymentService.PaymentServiceResponse">
<core:interfaceName>com.enactor.paymentService.IPaymentServiceResponse</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>paymentServiceComplete.paymentServiceResponse</core:expression>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Report Exception</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="MessageId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.service.TranslationMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="AltMessageBase">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.deviceEvent.PaymentServiceException">
<core:interfaceName>com.enactor.paymentService.events.IPaymentServiceExceptionEvent</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Default:Exception</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:messageState>
        <core:url>/Message/ModalYesNo</core:url>
        <core:stateID>Confirm Offline</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIMessageState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>5</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>13</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1887</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="CancelPressed"/>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes/>
        </core:metaData>
        <core:typeId>enactor.types.MessageState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>true</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>Load Location Attributes</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.LocationId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>location.locationId</core:expression>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>PaymentServiceRequest</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsKeyed">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsKeyed">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsLoad">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsLoad">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsRefund">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsRefund">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsIssue">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsIssue">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsPreAutrh">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsPreAutrh">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.CurrentlyInTrainingMode">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.CurrentlyInTrainingMode">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.BasketData">
<core:interfaceName>com.enactor.mfc.basket.IBasketData</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>transactionHandler.transaction</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.pos.CardholderNotPresent">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.CardholderNotPresent">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsReversal">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsReversal">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalCaptureReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalCaptureReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalTransactionDate">
<core:interfaceName>java.util.Date</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalTransactionDate">
<core:interfaceName>java.util.Date</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.pos.ForceUseCardScheme">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.ForceUseCardScheme">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>CreateEntity:PaymentServiceRequest</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>CreateEntity:GiftCardPaymentRequest</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.GiftCardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>GetOriginalTenderProperties</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.OriginalCardTenderDetails">
<core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalCardTenderDetails">
<core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.basket.TransactionTenderAmount">
<core:interfaceName>com.enactor.mfc.basket.items.ITransactionTenderAmount</core:interfaceName>
                            </core:sourceDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Tender Type</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel (Offline)</core:toActionID>
            <core:condition></core:condition>
            <core:event>CancelPressed</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId>CONFIRM_OFFLINE</core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:state>
        <core:url></core:url>
        <core:stateID>Entry</core:stateID>
        <core:name></core:name>
        <core:className></core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>33</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>225</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>438</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="StateEntered"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="OfflineAuthorisingPaymentService">
                    <core:interfaceName>com.enactor.paymentService.IOfflineAuthorisingPaymentService</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.BasicState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings>
            <core:actionMapping>
                <core:actionID>PaymentServiceRequest</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsKeyed">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsKeyed">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsLoad">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsLoad">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsRefund">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsRefund">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
<core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsIssue">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsIssue">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsPreAutrh">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsPreAutrh">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.CurrentlyInTrainingMode">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.CurrentlyInTrainingMode">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.pos.ForceUseCardScheme">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.ForceUseCardScheme">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.PosTerminal">
<core:interfaceName>com.enactor.mfc.posTerminal.IPOSTerminal</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.BasketData">
<core:interfaceName>com.enactor.mfc.basket.IBasketData</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>transactionHandler.transaction</core:expression>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.TransactionHandler">
<core:interfaceName>com.enactor.mfc.retail.transaction.IRetailTransactionHandler</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.pos.CardholderNotPresent">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType name="enactor.pos.CardholderNotPresent">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.pos.IsReversal">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.pos.IsReversal">
<core:interfaceName>java.lang.Boolean</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalCaptureReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalCaptureReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalTransactionDate">
<core:interfaceName>java.util.Date</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalTransactionDate">
<core:interfaceName>java.util.Date</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.coreUI.User">
<core:interfaceName>com.enactor.core.signOn.ISignedOnUser</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalAuthorisationReference">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Load Location Attributes</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.mfc.Location">
<core:interfaceName>com.enactor.mfc.location.ILocation</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.LocationId">
<core:interfaceName>java.lang.String</core:interfaceName>
                            </core:targetDataType>
                            <core:expression>location.locationId</core:expression>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
        </core:actionInputMappings>
        <core:actionOutputMappings>
            <core:actionMapping>
                <core:actionID>CreateEntity:PaymentServiceRequest</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>CreateEntity:GiftCardPaymentRequest</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.coreUI.Entity">
<core:interfaceName>com.enactor.core.entities.IEntity</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.GiftCardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>Assign Giftcard Transaction Type</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.GiftCardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.GiftCardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                        <core:mappings>
                            <core:sourceDataType required="true" name="enactor.paymentService.GiftCardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.IGiftCardPaymentRequest</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.paymentService.CardPaymentRequest">
<core:interfaceName>com.enactor.paymentService.ICardPaymentRequest</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings/>
                </core:mappings>
            </core:actionMapping>
            <core:actionMapping>
                <core:actionID>GetOriginalTenderProperties</core:actionID>
                <core:mappings>
                    <core:processMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.OriginalCardTenderDetails">
<core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                            </core:sourceDataType>
                            <core:targetDataType required="true" name="enactor.mfc.OriginalCardTenderDetails">
<core:interfaceName>com.enactor.mfc.basket.items.IOriginalCardTenderDetails</core:interfaceName>
                            </core:targetDataType>
                        </core:mappings>
                    </core:processMappings>
                    <core:stateMappings>
                        <core:mappings>
                            <core:sourceDataType name="enactor.mfc.basket.TransactionTenderAmount">
<core:interfaceName>com.enactor.mfc.basket.items.ITransactionTenderAmount</core:interfaceName>
                            </core:sourceDataType>
                        </core:mappings>
                    </core:stateMappings>
                </core:mappings>
            </core:actionMapping>
        </core:actionOutputMappings>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Check Tender Type</core:toActionID>
            <core:condition></core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Get Offline Authorising</core:toActionID>
            <core:condition>instanceOf(process.paymentService, 'com.enactor.paymentService.IOfflineAuthorisingPaymentService')</core:condition>
            <core:event>StateEntered</core:event>
        </core:eventLink>
    </core:state>
    <core:messageState>
        <core:url>/Message/ModalYesNo</core:url>
        <core:stateID>ConfirmSimpleReturn</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIMessageState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>5</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>550</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>2083</value>
            </entry>
        </core:uiHints>
        <core:metaData>
            <handledEvents>
                <handledEvent name="CancelPressed"/>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes/>
        </core:metaData>
        <core:typeId>enactor.types.MessageState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>true</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>PaymentServiceRequest</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Service Cancel (Offline)</core:toActionID>
            <core:condition></core:condition>
            <core:event>CancelPressed</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>0</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId>CONFIRM_SIMPLE_RETURN</core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:promptState>
        <core:url>Pos/Tender/ICCRemoveCardContactless</core:url>
        <core:stateID>End Approved Prompt</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIPromptState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>45</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>2193</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>1</value>
            </entry>
        </core:uiHints>
        <core:param value="RemoveCardApproved" name="enactor.pos.PromptTextVisibilityID">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input name="enactor.mfc.CardTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                </core:input>
                <core:input required="false" name="enactor.pos.PromptTextVisibilityID">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="OKPressed"/>
                <handledEvent name="PromptTimeout"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType name="enactor.mfc.CardTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                </stateDataType>
                <stateDataType required="false" name="enactor.pos.PromptTextVisibilityID">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.PromptState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>true</core:respondToViewEvents>
        <core:stateInputMappings>
            <core:mappings>
                <core:sourceDataType required="true" name="enactor.mfc.PaymentServiceTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.IPaymentServiceTenderItem</core:interfaceName>
                </core:sourceDataType>
                <core:targetDataType name="enactor.mfc.CardTenderItem">
                    <core:interfaceName>com.enactor.mfc.basket.items.ICardPaymentTenderItem</core:interfaceName>
                </core:targetDataType>
            </core:mappings>
        </core:stateInputMappings>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:eventLink>
            <core:linkID>2</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Complete: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:event>PromptTimeout</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>3</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
    </core:promptState>
    <core:messageState>
        <core:url>Pos/PaymentService/MessageOKPrompt</core:url>
        <core:stateID>Auth Fail Message</core:stateID>
        <core:name></core:name>
        <core:className>com.enactor.coreUI.states.UIMessageState</core:className>
        <core:defaultNextStateID></core:defaultNextStateID>
        <core:uiHints>
            <entry>
                <key>com.enactor.tools.editor.process.style</key>
                <value>1</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.xloc</key>
                <value>1513</value>
            </entry>
            <entry>
                <key>com.enactor.tools.editor.process.yloc</key>
                <value>236</value>
            </entry>
        </core:uiHints>
        <core:param value="Pos/PaymentService/PaymentServiceMessages" name="MessageBase">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:param value="CARD_AUTHORISATION_DECLINED_HOST" name="MessageId">
            <core:interfaceName>java.lang.String</core:interfaceName>
        </core:param>
        <core:metaData>
            <core:inputs>
                <core:input required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
                <core:input name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </core:input>
            </core:inputs>
            <handledEvents>
                <handledEvent name="OKPressed"/>
            </handledEvents>
            <stateDataTypes>
                <stateDataType required="true" name="MessageBase">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="MessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType name="MessageText">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
                <stateDataType required="true" name="LastMessageId">
                    <core:interfaceName>java.lang.String</core:interfaceName>
                </stateDataType>
            </stateDataTypes>
        </core:metaData>
        <core:typeId>enactor.types.MessageState</core:typeId>
        <core:singleInstance>false</core:singleInstance>
        <core:respondToViewEvents>false</core:respondToViewEvents>
        <core:actionInputMappings/>
        <core:actionOutputMappings/>
        <core:eventLink>
            <core:linkID>1</core:linkID>
            <core:toStateID></core:toStateID>
            <core:toActionID>Exception: End Payment Service</core:toActionID>
            <core:condition></core:condition>
            <core:event>OKPressed</core:event>
        </core:eventLink>
        <core:keepPromptOpen>false</core:keepPromptOpen>
        <core:closeOnNextPrompt>false</core:closeOnNextPrompt>
        <core:keepPreviousPromptOpen>false</core:keepPreviousPromptOpen>
        <core:promptTimeout>60</core:promptTimeout>
        <core:hideOpenPrompt>false</core:hideOpenPrompt>
        <core:allowDatabasePromptLookup>false</core:allowDatabasePromptLookup>
        <core:messageBase>Pos/PaymentService/PaymentServiceMessages</core:messageBase>
        <core:messageId></core:messageId>
        <core:messageText></core:messageText>
    </core:messageState>
    <core:stateTransitions/>
</core:process>
