<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<core:documentTemplate xmlns:core="http://www.enactor.com/core" xmlns:retail="http://www.enactor.com/retail" xmlns:ns4="http://www.enactor.com/crm" xmlns:hta="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/api/200803" xmlns:ns6="http://www.apis-it.hr/fin/2012/types/f73" xmlns:ns7="http://www.w3.org/2000/09/xmldsig#" xmlns:ns8="http://www.enactor.com/retail/storedRetailTransaction/service" xmlns:ns9="http://www.fu.gov.si/" xmlns:ns10="http://www.enactor.com/addressLookup/service" xmlns:htd="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/200803" xmlns:htt="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xmlns:sref="http://docs.oasis-open.org/wsbpel/2.0/serviceref" xmlns:ns14="http://www.enactor.com/crm/customerLoyalty/service" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" paginated="false" messageBase="Pos/Print/ReceiptMessages" title="Receipt Item Format Entries" url="Pos/Print/ReceiptItemFormatEntries">
    <core:elements/>
    <core:formatEntry id="basketItem">
        <core:elements>
            <core:row id="BasketItemRow">
                <core:rowLine id="BasketItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="BasketItemDescription">
                            <core:elements>
<core:text id="BasketItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="BasketItemValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="basketItemVoided">
        <core:elements>
            <core:row visibility="#{!instanceOf(item, 'com.enactor.customerOrders.retail.basket.items.ICustomerOrderDepositBasketItem') &amp;&amp; !instanceOf(item, 'com.enactor.mfc.basket.items.IPromotionControlItem')}" id="BasketItemVoidedRow">
                <core:rowLine id="BasketItemVoidedLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" style="ITALIC" id="BasketItemVoidedFlag">
                            <core:elements>
<core:text messageId="ITEM_VOID_FLAG" id="BasketItemVoidedFlagText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" style="ITALIC" id="BasketItemVoidedItem">
                            <core:elements>
<core:text id="BasketItemVoidedItemText">
    <core:text>#{instanceOf(item, 'com.enactor.mfc.basket.items.IUnknownItem') ? (empty(item.MMGroupDescription) ? (empty(item.MMGroupId) ? concat((empty(item.productID) ? '' : concat(item.productID, ' ')), mfcBasket:resolveItemDescription(item, formatter)) : item.MMGroupId) : item.MMGroupDescription) : mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="cardRegistrationItem">
        <core:elements>
            <core:formatElement formatId="itemCardDescription"/>
            <core:formatElement formatId="itemPanSeq"/>
            <core:formatElement applicability="#{!item.isRefund &amp;&amp; !item.isVoided}" formatId="itemCardVerificationMessage"/>
            <core:formatElement applicability="#{!item.isVoided}" formatId="blankLineRow"/>
            <core:formatElement applicability="" formatId="customerId"/>
            <core:formatElement applicability="" formatId="itemCardToken"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemValue">
        <core:elements>
            <core:text id="ItemValue">
                <core:formatters>
                    <core:formatCurrencyAmount/>
                </core:formatters>
                <core:text>#{item.value}</core:text>
            </core:text>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="referenceValue">
        <core:elements>
            <core:column maxLines="0" columnDefId="2" id="ReferenceValueReferenceNumber">
                <core:elements>
                    <core:text messageId="REFERENCE" id="ReferenceLabelText"/>
                    <core:text id="SpaceSeparatorText">
                        <core:text> </core:text>
                    </core:text>
                    <core:text id="ReferenceValueReferenceNumberText">
                        <core:text>#{item.referenceNumber}</core:text>
                    </core:text>
                </core:elements>
            </core:column>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="serialValue">
        <core:elements>
            <core:column maxLines="0" columnDefId="6" id="SerialValueSerialNumber">
                <core:elements>
                    <core:text messageId="SERIAL_NUMBER" id="SerialValueSerialNumberLabelText"/>
                    <core:text id="SerialValueSerialNumberText">
                        <core:text>#{item.serialNumber}</core:text>
                    </core:text>
                </core:elements>
            </core:column>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemText">
        <core:elements>
            <core:column maxLines="0" wrap="true" align="LEFT" columnDefId="7" visibility="#{notEmpty(item.text)}" id="ItemTextItemText">
                <core:elements>
                    <core:text id="ItemTextItemTextText">
                        <core:text>#{item.text}</core:text>
                    </core:text>
                </core:elements>
            </core:column>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="consumerBenefitMarker">
        <core:elements>
            <core:column maxLines="0" columnDefId="1" id="ConsumerBenefitMarkerFlag">
                <core:elements>
                    <core:text messageId="ITEM_BENEFIT_ELIGABLE_FLAG" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IMerchandiseItem') &amp;&amp; notEmpty(item.consumerBenefitEligibilities)}" id="ConsumerBenefitMarkerFlagText"/>
                </core:elements>
            </core:column>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="recordRepairItemVoided">
        <core:elements>
            <core:row id="RecordRepairItemVoidedRow">
                <core:rowLine id="RecordRepairItemVoidedLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" style="ITALIC" id="RecordRepairItemVoidedFlag">
                            <core:elements>
<core:text messageId="ITEM_VOID_FLAG" id="ItemVoidFlagLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="RecordRepairItemVoidedRepairNumber">
                            <core:elements>
<core:text messageId="RECORD_REPAIR" id="RecordRepairLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="RecordRepairNumberText">
    <core:text>#{item.repairNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionVoidItem">
        <core:elements>
            <core:assign to="basketHasTransactionVoid" type="boolean" value="true" id="BasketHasTransactionVoidAssign"/>
            <core:row id="TransactionVoidItemRow">
                <core:rowLine id="TransactionVoidItemLabelLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" style="ITALIC;BOLD" id="TransactionVoidItemLabel">
                            <core:elements>
<core:text messageId="TRANSACTION_VOID" id="TransactionVoidLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="TransactionVoidItemSignatureLine">
                    <core:elements>
                        <core:formatElement formatId="managerSignature"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="moreSalesperson">
        <core:elements>
            <core:tableTemplate listVariableName="relatedSalesperon" list="#{item.relatedParties}" id="Salespersons">
                <core:formatElement applicableClassName="com.enactor.mfc.recordedSalesperson.IRecordedSalesperson" formatId="salesperson"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="salesperson">
        <core:elements>
            <core:text visibility="#{!empty relatedSalesperon.salespersonUserId}" id="SalespersonLabel">
                <core:text>, </core:text>
            </core:text>
            <core:text visibility="#{!empty relatedSalesperon.salespersonUserId}" id="SalespersonName">
                <core:text>#{relatedSalesperon.salespersonName}</core:text>
            </core:text>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="allSalesItems">
        <core:elements>
            <core:assign to="allSalesItemCount" type="java.lang.Integer" value="#{allSalesItemCount + 1}" id="AllSalesItemsLine"/>
            <core:row visibility="#{!empty(item.salespersonUserId) &amp;&amp; item.salespersonUserId != salespersonId}" id="AllSalesItemsSalespersonRow">
                <core:rowLine id="AllSalesItemsSalespersonLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="AllSalesItemsSalesperson">
                            <core:elements>
<core:text messageId="SALESPERSON" id="SalespersonLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="AllSalesItemsSalespersonText">
    <core:text>#{empty(item.salespersonName) ? item.salespersonUserId : item.salespersonName}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:assign to="salespersonId" type="java.lang.String" value="#{item.salespersonUserId}" id="Assign"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:row visibility="#{!empty(item.authorisingUserId)}" id="AllSalesItemsAuthorisingUserRow">
                <core:rowLine id="AllSalesItemsAuthorisingUserLine">
                    <core:elements>
                        <core:assign to="authorisingUserId" type="java.lang.String" value="#{item.authorisingUserId}" id="AuthorisingUserIdAssign"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemCardDescription">
        <core:elements>
            <core:row>
                <core:rowLine>
                    <core:elements>
                        <core:column maxLines="0" columnDefId="CardDetailsTag" id="CardDetailsTag">
                            <core:elements>
<core:text messageId="CARD"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="CardDetailsData" id="CardDetailsData">
                            <core:elements>
<core:text messageId="COLON_SPACE"/>
<core:text>
    <core:text>#{item.cardDetails.cardDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="cardholderNotPresentMessage">
        <core:elements>
            <core:row>
                <core:rowLine visibility="#{item.cardholderNotPresent}">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="cardholderNotPresentMessageData">
                            <core:elements>
<core:text messageId="CARDHOLDER_NOT_PRESENT"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="cardOnFIle">
        <core:elements>
            <core:row>
                <core:rowLine>
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="cardOnFileMessageData">
                            <core:elements>
<core:text messageId="CARD_ON_FILE"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="registrationHeader">
        <core:elements>
            <core:column maxLines="0" align="CENTRE" columnDefId="2" id="RegistrationHeaderLabel">
                <core:elements>
                    <core:lineElement messageId="REGISTRATION_HEADER" colour="blue" style="BOLD;DOUBLE_HIGH;DOUBLE_WIDE"/>
                </core:elements>
            </core:column>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerId">
        <core:elements>
            <core:row>
                <core:rowLine>
                    <core:elements>
                        <core:column maxLines="0" columnDefId="CardDetailsTag" id="CustomerIdTag">
                            <core:elements>
<core:text messageId="CUSTOMER_NUMBER"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="CardDetailsData" id="CustomerIdTagData">
                            <core:elements>
<core:text messageId="COLON_SPACE"/>
<core:text>
    <core:text>#{item.customerNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="rewardsDetailsRegistration">
        <core:elements>
            <core:formatElement applicability="#{(notEmpty(transaction.loyaltyPointsDetails) &amp;&amp; (notEmpty(transaction.loyaltyPointsDetails.loyaltyAccountId) || notEmpty(transaction.loyaltyPointsDetails.loyaltyCardNumber))) &amp;&amp; (basket.saleItemQuantity == 0 || basket.returnItemQuantity &gt; 0) }" formatId="rewardsDetailsBodyRegistration"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="rewardsDetailsBodyRegistration">
        <core:elements>
            <core:row>
                <core:rowLine>
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_HEADER" style="UNDERLINE"/>
<core:lineElement style=""/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement applicability="#{notEmpty(transaction.loyaltyPointsDetails)}" formatId="loyaltyPointsRegistration"/>
            <core:row visibility="!transaction.isTransactionReversal">
                <core:rowLine>
                    <core:elements>
                        <core:column maxLines="0" wrap="true" align="CENTRE" columnDefId="0">
                            <core:elements>
<core:lineElement>
    <core:text>Thank you for using your Rewards card.</core:text>
</core:lineElement>
<core:lineElement>
    <core:text>Your Rewards points have been recorded.</core:text>
</core:lineElement>
<core:lineElement>
    <core:text>Please visit a Rewards station for more details.</core:text>
</core:lineElement>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="loyaltyPointsRegistration">
        <core:elements>
            <core:row>
                <core:rowLine visibility="#{!empty(transaction.loyaltyPointsDetails.loyaltyCardNumber)}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_CARD_NUMBER" visibility="false"/>
<core:text>
    <core:text>Rewards No. {strings:manglePAN(transaction.loyaltyPointsDetails.loyaltyCardNumber)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{empty(transaction.loyaltyPointsDetails.loyaltyCardNumber) &amp;&amp; notEmpty(transaction.loyaltyPointsDetails.loyaltyAccountId)}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_ACCOUNT_ID" visibility="false"/>
<core:text>
    <core:text>Rewards No.    {strings:manglePAN(transaction.loyaltyPointsDetails.loyaltyAccountId)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!transaction.loyaltyPointsDetails.externalProvider &amp;&amp; !empty(transaction.loyaltyPointsDetails.loyaltyAccountId) &amp;&amp; !transaction.loyaltyPointsDetails.loyaltyAccountOffline}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_STARTING" visibility="false"/>
<core:text>
    <core:text>Rewards Points balance: {transaction.loyaltyPointsDetails.loyaltyPointsBalance} as of </core:text>
</core:text>
<core:text>
    <core:formatters>
        <core:formatDate pattern="shortDate"/>
    </core:formatters>
    <core:text>#{transaction.loyaltyPointsDetails.loyaltyPointsBalanceDate}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{false and !transaction.loyaltyPointsDetails.externalProvider &amp;&amp; !empty(transaction.loyaltyPointsDetails.loyaltyAccountId)}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_EARNED"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{false and !transaction.loyaltyPointsDetails.externalProvider &amp;&amp; !empty(transaction.loyaltyPointsDetails.loyaltyAccountId) &amp;&amp; transaction.loyaltyPointsDetails.loyaltyPointsUsed != 0}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_USED"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{false and !transaction.loyaltyPointsDetails.externalProvider &amp;&amp; !empty(transaction.loyaltyPointsDetails.loyaltyAccountId) &amp;&amp; !transaction.loyaltyPointsDetails.loyaltyAccountOffline}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_TOTAL"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{false and !transaction.loyaltyPointsDetails.externalProvider &amp;&amp; transaction.loyaltyPointsDetails.loyaltyPointsMissed != 0}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_MISSED"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{false &amp;&amp; !transaction.loyaltyPointsDetails.externalProvider &amp;&amp; !empty(transaction.loyaltyPointsDetails.loyaltyCardNumber) &amp;&amp; empty(transaction.loyaltyPointsDetails.loyaltyAccountId)}">
                    <core:elements>
                        <core:column maxLines="0" wrap="true" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_NOT_UPDATED"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{false and !transaction.loyaltyPointsDetails.externalProvider &amp;&amp; transaction.loyaltyPointsDetails.spendToNextTier != 0}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="0" id="0">
                            <core:elements>
<core:text messageId="SPEND_TO_NEXT_TIER"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemDetails">
        <core:elements>
            <core:column maxLines="0" columnDefId="1" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IBoughtCustomerItem')}" id="MerchandiseItemDetailsLineBuyBackLabel">
                <core:elements>
                    <core:text messageId="ITEM_BUYBACK_FLAG" id="MerchandiseItemDetailsLineBuyBackLabelText"/>
                </core:elements>
            </core:column>
            <core:column maxLines="0" columnDefId="1" visibility="#{item.isReturn}" id="MerchandiseItemDetailsLineReturnLabel">
                <core:elements>
                    <core:text messageId="ITEM_RETURN_FLAG" id="MerchandiseItemDetailsLineReturnLabelText"/>
                </core:elements>
            </core:column>
            <core:column maxLines="0" columnDefId="2" id="MerchandiseItemDetailsLineItem">
                <core:elements>
                    <core:lineElement visibility="#{notEmpty(item.MMGroupId) &amp;&amp; notEmpty(transaction.originatedBy.regionKey.groupId) &amp;&amp; notEmpty(department)}" id="DepartmentNameText">
                        <core:text>#{department.name}</core:text>
                    </core:lineElement>
                    <core:text id="MerchandiseItemDetailsLineItemText">
                        <core:text>#{instanceOf(item, 'com.enactor.mfc.basket.items.IUnknownItem') ? (empty(item.MMGroupDescription) ? (empty(item.MMGroupId) ? concat((empty(item.productID) ? '' : concat(item.productID, ' ')), mfcBasket:resolveItemDescription(item, formatter)) : item.MMGroupId) : item.MMGroupDescription) : mfcBasket:resolveItemDescription(item, formatter)}</core:text>
                    </core:text>
                </core:elements>
            </core:column>
            <core:column maxLines="0" columnDefId="3" id="MerchandiseItemDetailsLineValue">
                <core:elements>
                    <core:formatElement formatId="itemValue"/>
                </core:elements>
            </core:column>
            <core:formatElement formatId="consumerBenefitMarker"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemStandardDetails">
        <core:elements>
            <core:row id="MerchandiseItemRow">
                <core:assign to="merchItemsValue" type="long" value="#{merchItemsValue + item.effectiveNetValue}" id="MerchandiseItemValue"/>
                <core:assign to="merchItemsQuantity" type="int" value="#{merchItemsQuantity + item.quantity}" id="MerchandiseItemQuantity"/>
                <core:rowLine visible="false" id="MerchandiseItemFlagsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" id="MerchandiseItemFlagsColumn">
                            <core:elements>
<core:text messageId="ITEM_BUYBACK_FLAG" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IBoughtCustomerItem')}" id="ItemBuybackFlagLabelText"/>
<core:text messageId="ITEM_RETURN_FLAG" visibility="#{item.isReturn}" id="ItemReturnFlagLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="MerchandiseItemDetailsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IBoughtCustomerItem')}" id="MerchandiseItemDetailsLineBuyBackLabel">
                            <core:elements>
<core:text messageId="ITEM_BUYBACK_FLAG" id="MerchandiseItemDetailsLineBuyBackLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="1" visibility="#{item.isReturn}" id="MerchandiseItemDetailsLineReturnLabel">
                            <core:elements>
<core:text messageId="ITEM_RETURN_FLAG" id="MerchandiseItemDetailsLineReturnLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemDetailsLineItem">
                            <core:elements>
<core:lineElement visibility="#{notEmpty(item.MMGroupId) &amp;&amp; notEmpty(transaction.originatedBy.regionKey.groupId) &amp;&amp; notEmpty(department)}" id="DepartmentNameText">
    <core:text>#{department.name}</core:text>
</core:lineElement>
<core:text id="MerchandiseItemDetailsLineItemText">
    <core:text>#{instanceOf(item, 'com.enactor.mfc.basket.items.IUnknownItem') ? (empty(item.MMGroupDescription) ? (empty(item.MMGroupId) ? concat((empty(item.productID) ? '' : concat(item.productID, ' ')), mfcBasket:resolveItemDescription(item, formatter)) : item.MMGroupId) : item.MMGroupDescription) : mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="MerchandiseItemDetailsLineValue">
                            <core:elements>
<core:formatElement formatId="salesItemOriginalValue"/>
                            </core:elements>
                        </core:column>
                        <core:formatElement formatId="consumerBenefitMarker"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty(item.serialNumber)}" id="MerchandiseItemSerialNumberLine">
                    <core:elements>
                        <core:formatElement formatId="serialValue"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItem">
        <core:elements>
            <core:formatElement formatId="merchandiseItemStandardDetails"/>
            <core:formatElement formatId="merchandiseItemStyleColourSize"/>
            <core:formatElement formatId="merchandiseItemOtherDetails"/>
            <core:formatElement applicability="#{!item.voided &amp;&amp; item.receiptControl != null &amp;&amp; !empty item.receiptControl.receiptMessage}" formatId="receiptMessage"/>
            <core:formatElement applicability="#{!item.voided}" formatId="itemModifiers"/>
            <core:formatElement applicability="#{!item.voided}" formatId="merchandiseItemTrailer"/>
            <core:formatElement applicability="#{!item.voided}" formatId="merchandiseItemTaxes" visible="false"/>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="fieldValidatorDefinition" entityName="fieldValidatorDefinition" entityNamespace="http://www.enactor.com/coreui">
                <core:keyProperty name="fieldValidatorId" value="#{item.referenceNumberValidatorId}"/>
            </core:entityReference>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemTaxes">
        <core:elements>
            <core:formatElement formatId="lineSeparator"/>
            <core:tableTemplate listVariableName="taxItem" list="#{item.taxAmounts}" id="TaxItems">
                <core:formatElement applicableClassName="com.enactor.mfc.tax.ITaxAmount" formatId="taxItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="taxItem">
        <core:elements>
            <core:row id="TaxItemRow">
                <core:rowLine id="TaxItemRowLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="ComTaxLbl" id="TaxAmountLabel">
                            <core:elements>
<core:text id="TaxableAmountLabelText">
    <core:text>#{concat(concat(resolveMessage('Pos/Print/ReceiptMessages','TAXABLE_AMOUNT'), ' ('), concat(taxItem.displayTaxCode, ')'))}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="ComTaxAmt" id="TaxAmountValue">
                            <core:elements>
<core:text id="TaxAmountValue">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{taxItem.taxableAmount}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemArticle">
        <core:elements>
            <core:row id="MerchandiseItemArticleRow">
                <core:rowLine id="MerchandiseItemArticleRow">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemArticle">
                            <core:elements>
<core:text messageId="MERCHANDISE_ARTICLE" id="MerchandiseArticleText"/>
<core:formatElement formatId="textSeparator"/>
<core:formatElement formatId="salesItemSellingCode"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="MerchandiseItemArticleValue">
                            <core:elements>
<core:formatElement formatId="salesItemValueCurrency"/>
<core:formatElement formatId="salesItemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemStyleColourSize">
        <core:elements>
            <core:row id="MerchandiseItemStyleColourSizeRow">
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IStyleSizeItem')}" id="MerchandiseItemStyleLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemStyle">
                            <core:elements>
<core:text messageId="SCS_STYLE" id="ScsStyleText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="MerchandiseItemStyleText">
    <core:text>#{item.styleId}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IStyleColourSizeItem')}" id="MerchandiseItemColourLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemColour">
                            <core:elements>
<core:text messageId="SCS_COLOUR" id="ScsColourText"/>
<core:text id="SpaceSeparatorText2">
    <core:text> </core:text>
</core:text>
<core:text id="MerchandiseItemColourText">
    <core:text>#{empty(item.colourDescription) ? (item.colourKey != null ? item.colourKey.colourId : '') : item.colourDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IStyleSizeItem')}" id="MerchandiseItemSizeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemSize">
                            <core:elements>
<core:text messageId="SCS_SIZE" id="ScsSizeText"/>
<core:text id="SpaceSeparatorText3">
    <core:text> </core:text>
</core:text>
<core:text id="MerchandiseItemSizeText">
    <core:text>#{empty(item.sizeDescription) ? (item.sizeKey != null ? item.sizeKey.sizeId : '') : item.sizeDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemOtherDetails">
        <core:elements>
            <core:row id="MerchandiseItemOtherDetailsRow">
                <core:rowLine visibility="#{notEmpty(item.text)}" id="MerchandiseItemTextLine">
                    <core:elements>
                        <core:formatElement formatId="itemText"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.isReturn &amp;&amp; !empty(item.returnItemDetail) &amp;&amp; !empty(item.returnItemDetail.returnReference)}" id="MerchandiseItemReturnReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemReturnReference">
                            <core:elements>
<core:text messageId="RETURN_REFERENCE" id="ReturnReferenceLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="ReturnReferenceText">
    <core:text>#{item.returnItemDetail.returnReference}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.isReturn &amp;&amp; !empty(item.returnItemDetail) &amp;&amp; !empty(mfcBasket:resolveLocalisedDescription(item.returnItemDetail.localisedReturnDescription, item.returnItemDetail.returnDescription, formatter)) &amp;&amp; false}" id="MerchandiseItemReturnDescriptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemReturnDescription">
                            <core:elements>
<core:text messageId="RETURN_REASON" id="ReturnReasonLabelText"/>
<core:formatElement formatId="textSeparator"/>
<core:formatElement formatId="returnItemReason"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty(item.referenceNumber)}" id="MerchandiseItemReferenceNumberLine">
                    <core:elements>
                        <core:formatElement formatId="referenceValue"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemNetValue">
        <core:elements>
            <core:row id="ItemNetValueRow">
                <core:rowLine id="ItemNetValueLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="ItemNetValueLabel">
                            <core:elements>
<core:text messageId="ITEM_FOOTER" id="ItemNetValueLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="3" id="ItemNetValuePrice">
                            <core:elements>
<core:text id="ItemNetValuePriceText">
    <core:text>#{format:formatCurrency(item.netValue)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemEffectiveNetValue">
        <core:elements>
            <core:row id="ItemEffectiveNetValueRow">
                <core:rowLine id="ItemEffectiveNetValueLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="ItemEffectiveNetValueLabel">
                            <core:elements>
<core:text messageId="ITEM_FOOTER" id="ItemEffectiveNetValueLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="3" id="ItemEffectiveNetValuePrice">
                            <core:elements>
<core:text id="ItemEffectiveNetValuePriceText">
    <core:text>#{format:formatCurrency(item.effectiveNetValue)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="sellingCode">
        <core:elements>
            <core:row id="SellingCodeRow">
                <core:rowLine id="SellingCodeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="SellingCode">
                            <core:elements>
<core:text id="SellingCodeText">
    <core:text>#{!empty(item.sellingCode) ? item.sellingCode : item.description}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="3" id="ItemOriginalPrice">
                            <core:elements>
<core:text id="ItemOriginalPriceText">
    <core:text>#{format:formatCurrency(item.value)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="sellingCodeAndDescriptionAndPrice">
        <core:elements>
            <core:row id="SellingCodeRow">
                <core:rowLine id="SellingCodeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="SellingCode">
                            <core:elements>
<core:text id="SellingCodeText">
    <core:text>#{!empty(item.sellingCode) ? item.sellingCode : item.productID}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" visible="false" id="SellingCodeDescription">
                            <core:elements>
<core:text id="SellingCodeDescriptionText">
    <core:text>#{item.description}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="3" id="ItemOriginalPrice">
                            <core:elements>
<core:text id="ItemOriginalPriceText">
    <core:text>#{format:formatCurrency(item.value)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemDetailsMultiple">
        <core:elements>
            <core:column maxLines="0" columnDefId="1" visibility="#{item.isReturn}" id="MerchandiseItemMultipleDetailsLineReturnLabel">
                <core:elements>
                    <core:text messageId="ITEM_RETURN_FLAG" id="ItemReturnFlagLabelText"/>
                </core:elements>
            </core:column>
            <core:column maxLines="0" columnDefId="2" id="MerchandiseItemMultipleDetailsLineDetails">
                <core:elements>
                    <core:text id="MerchandiseItemMultipleDetailsLineDetailsText">
                        <core:text>#{instanceOf(item, 'com.enactor.mfc.basket.items.IUnknownItem') ? (empty(item.MMGroupDescription) ? (empty(item.MMGroupId) ? concat((empty(item.productID) ? '' : concat(item.productID, ' ')), mfcBasket:resolveItemDescription(item, formatter)) : item.MMGroupId) : item.MMGroupDescription) : mfcBasket:resolveItemDescription(item, formatter)}</core:text>
                    </core:text>
                </core:elements>
            </core:column>
            <core:formatElement formatId="consumerBenefitMarker"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemStandardDetailsMultiple">
        <core:elements>
            <core:row id="MerchandiseItemMultipleRow">
                <core:assign to="merchItemsValue" type="long" value="#{merchItemsValue + item.effectiveNetValue}" id="MerchItemsValueAssign"/>
                <core:assign to="merchItemsQuantity" type="int" value="#{merchItemsQuantity + item.quantity}" id="MerchItemsQuantityAssign"/>
                <core:rowLine visible="false" id="MerchandiseItemMultipleFlagsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" id="MerchandiseItemMultipleDetailsFlagsColumn">
                            <core:elements>
<core:text messageId="ITEM_RETURN_FLAG" visibility="#{item.isReturn}" id="MerchandiseItemMultipleDetailsFlagsColumnText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="MerchandiseItemMultipleDetailsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" visibility="#{item.isReturn}" id="MerchandiseItemMultipleDetailsLineReturnLabel">
                            <core:elements>
<core:text messageId="ITEM_RETURN_FLAG" id="MerchandiseItemMultipleDetailsLineReturnLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="MerchandiseItemMultipleDetailsLineDetails">
                            <core:elements>
<core:text id="MerchandiseItemMultipleDetailsLineDetailsText">
    <core:text>#{instanceOf(item, 'com.enactor.mfc.basket.items.IUnknownItem') ? (empty(item.MMGroupDescription) ? (empty(item.MMGroupId) ? concat((empty(item.productID) ? '' : concat(item.productID, ' ')), mfcBasket:resolveItemDescription(item, formatter)) : item.MMGroupId) : item.MMGroupDescription) : mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:formatElement formatId="consumerBenefitMarker"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="MerchandiseItemMultipleItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="8" id="MerchandiseItemMultipleItemLineDescription">
                            <core:elements>
<core:text visibility="#{notEmpty(item.unitOfMeasureDescription)}" id="MerchandiseItemMultipleItemLineDescriptionText">
    <core:text>#{strings:wrapString(concatenate(format:formatQuantity(item.quantity),' ',item.unitOfMeasureDescription,' @ ',format:formatCurrencyCurrency(item.unitPrice,transaction.basket.currencyId),'/',item.unitOfMeasureDescription),26)}</core:text>
</core:text>
<core:text messageId="QUANTITY_BREAK_APPLY_THRESHOLD_QTY" visibility="#{!notEmpty(item.unitOfMeasureDescription) &amp;&amp; (item.pricingMethodDetail.pricingMethod == 'QT')}" id="QuantityBreakApplyThresholdQuantityLabelText"/>
<core:text visibility="#{!notEmpty(item.unitOfMeasureDescription) &amp;&amp; (item.pricingMethodDetail.pricingMethod != 'QT')}" id="ItemQuntityText">
    <core:text>#{strings:wrapString(concatenate(format:formatQuantity(item.quantity),' @ ',format:formatCurrencyCurrency(item.unitPrice,transaction.basket.currencyId)),26)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="MerchandiseItemMultipleItemLineValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visible="false" id="MerchandiseItemMultipleItemDescriptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="8" visibility="#{isEmpty(item.measureSystemKey)}" id="MerchandiseItemMultipleItemLineQuantityDescription">
                            <core:elements>
<core:formatElement formatId="salesItemQuantity"/>
<core:formatElement formatId="textSeparator"/>
<core:text messageId="QUANTITY_AT" id="ItemQuantityAtLabelText"/>
<core:formatElement formatId="textSeparator"/>
<core:formatElement formatId="salesItemUnitPriceCurrency"/>
<core:formatElement formatId="salesItemUnitPrice"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="8" visibility="#{notEmpty(item.measureSystemKey)}" id="MerchandiseItemMultipleItemLineMeasuredDescription">
                            <core:elements>
<core:formatElement formatId="salesItemMeasuredQuantity"/>
<core:formatElement formatId="textSeparator"/>
<core:formatElement formatId="salesItemUnitsOfMeasureDescription"/>
<core:formatElement formatId="textSeparator"/>
<core:text messageId="QUANTITY_AT" id="ItemMeasuredQuantityAtLabelText"/>
<core:formatElement formatId="textSeparator"/>
<core:formatElement formatId="salesItemUnitPriceCurrency"/>
<core:formatElement formatId="salesItemUnitPrice"/>
<core:text messageId="QUANTITY_PER" id="ItemMeasuredQuantityPerLabelText"/>
<core:formatElement formatId="salesItemUnitsOfMeasureDescription"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemMultiple">
        <core:elements>
            <core:formatElement formatId="merchandiseItemStandardDetailsMultiple"/>
            <core:formatElement formatId="merchandiseItemStyleColourSize"/>
            <core:formatElement formatId="merchandiseItemOtherDetails"/>
            <core:formatElement applicability="#{!item.voided}" formatId="itemModifiers"/>
            <core:formatElement applicability="#{!item.voided}" formatId="merchandiseItemTrailer"/>
            <core:formatElement applicability="#{!item.voided}" formatId="merchandiseItemTaxes" visible="true"/>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="fieldValidatorDefinition" entityName="fieldValidatorDefinition" entityNamespace="http://www.enactor.com/coreui">
                <core:keyProperty name="fieldValidatorId" value="#{item.referenceNumberValidatorId}"/>
            </core:entityReference>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="merchandiseItemTrailer">
        <core:elements>
            <core:formatElement formatId="merchandiseItemArticle" visible="false"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="nonMerchandiseItem">
        <core:elements>
            <core:assign to="itemReturned" type="boolean" value="#{!item.isReturn &amp;&amp; item.returnedQuantity != 0 &amp;&amp; (item.quantity + item.returnedQuantity &lt;= 0)}" id="NonMerchandiseItemReturn"/>
            <core:row style="#{item.voided ? 'STRIKEOUT' : ''};#{!item.voided &amp;&amp; itemReturned ? 'STRIKEOUT' : ''};#{!item.voided &amp;&amp; itemReturned ? 'STRIKEOUT_COLOUR=blue' : ''}" id="NonMerchandiseItemRow">
                <core:rowLine id="NonMerchandiseItemLineItem">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" id="NonMerchandiseItemLineItemLabel">
                            <core:elements>
<core:text messageId="ITEM_VOID_FLAG" visibility="#{item.voided}" id="ItemVoidFlagLabelText"/>
<core:text messageId="ITEM_RETURN_FLAG" visibility="#{item.isReturn &amp;&amp; !instanceOf(item, 'com.enactor.mfc.basket.items.IBuyBackItem')}" id="ItemReturnFlagLabelText"/>
<core:text messageId="ITEM_BUYBACK_FLAG" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IBuyBackItem')}" id="ItemBuybackFlagLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="ImageColumn" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ISalesItem') &amp;&amp; !empty(item.productImageURL)}" id="NonMerchandiseItemLineItemImage">
                            <core:elements>
<core:imageElement imageURL="#{strings:resolveMultiplePlaceholders(item.productImageURL)}" style="ImageStyle=ScaledMaintainAspect" id="NonMerchandiseItemLineItemImage">
    <core:flowConstraint width="80" height="80"/>
</core:imageElement>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="NonMerchandiseItemLineItemDescription">
                            <core:elements>
<core:text style="BOLD" id="NonMerchandiseItemLineItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{ !((item.value == 0 &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IProductRewardVoucherItem')) || (instanceOf(item, 'com.enactor.mfc.basket.items.IVoucherSaleItem') &amp;&amp; item.issuedAsPromotion) || (instanceOf(item, 'com.enactor.mfc.basket.items.IGiftCardItem') &amp;&amp; item.issuedAsPromotion))}" id="NonMerchandiseItemLineItemValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IGiftCardItem') &amp;&amp;                    (notEmpty(item.giftCardDetails.cardDetails.mangledPAN) || notEmpty(item.giftCardDetails.accountId))}" id="NonMerchandiseItemGiftCardLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="NonMerchandiseItemGiftCard">
                            <core:elements>
<core:formatElement formatId="giftCardNumber"/>
<core:text messageId="GIFT_CARD_CANCELLED" visibility="#{item.giftCardDetails.cancelledCard}" id="GiftCardCancelledLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IGiftCardItem') &amp;&amp; !item.giftCardDetails.cancelledCard}" id="NonMerchandiseItemBalanceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="NonMerchandiseItemBalance">
                            <core:elements>
<core:text messageId="GIFT_CARD_ITEM_BALANCE" id="NonMerchandiseItemBalanceText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty(item.serialNumber)}" id="NonMerchandiseItemSerialLine">
                    <core:elements>
                        <core:formatElement formatId="serialValue"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.text)}" id="NonMerchandiseItemTextLine">
                    <core:elements>
                        <core:formatElement formatId="itemText"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.isReturn &amp;&amp; !empty(item.returnItemDetail) &amp;&amp; !empty(item.returnItemDetail.returnReference)}" id="NonMerchandiseItemReturnReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="NonMerchandiseItemReturnReference">
                            <core:elements>
<core:text messageId="RETURN_REFERENCE" id="ReturnReferenceLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="ReturnReferenceText">
    <core:text>#{item.returnItemDetail.returnReference}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty(item.referenceNumber)}" id="NonMerchandiseItemReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="NonMerchandiseItemReference">
                            <core:elements>
<core:text messageId="REFERENCE" id="ReferenceLabelText"/>
<core:text id="SpaceSeparatorText2">
    <core:text> </core:text>
</core:text>
<core:text id="ReferenceNumberText">
    <core:text>#{item.referenceNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement applicability="#{!item.voided &amp;&amp; item.receiptControl != null &amp;&amp; !empty item.receiptControl.receiptMessage}" formatId="receiptMessage"/>
            <core:formatElement applicability="#{!item.voided}" formatId="itemModifiers"/>
            <core:formatElement formatId="lineSeparator"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="nonMerchandiseItemMultiple">
        <core:elements>
            <core:row style="#{item.voided ? 'STRIKEOUT' : ''};#{item.voided ? 'ITALIC' : ''}" id="NonMerchandiseItemMultipleRow">
                <core:rowLine id="NonMerchandiseItemMultipleItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" visibility="#{item.isReturn}" id="NonMerchandiseItemMultipleItemLineReturnLabel">
                            <core:elements>
<core:text messageId="ITEM_RETURN_FLAG" id="ItemReturnFlagLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="ImageColumn" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ISalesItem') &amp;&amp; !empty(item.productImageURL)}" id="NonMerchandiseItemMultipleItemLineReturnImage">
                            <core:elements>
<core:imageElement imageURL="#{strings:resolveMultiplePlaceholders(item.productImageURL)}" style="ImageStyle=ScaledMaintainAspect" id="NonMerchandiseItemMultipleItemLineReturnImage">
    <core:flowConstraint width="80" height="80"/>
</core:imageElement>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="NonMerchandiseItemMultipleItemLineReturnDescription">
                            <core:elements>
<core:text style="BOLD" id="NonMerchandiseItemMultipleItemLineReturnDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="NonMerchandiseItemMultipleValueLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="4" id="NonMerchandiseItemMultipleValueLineQuantity">
                            <core:elements>
<core:text id="NonMerchandiseItemMultipleValueLineQuantityText">
    <core:formatters>
        <core:formatNumber/>
    </core:formatters>
    <core:text>#{item.quantity}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="5" id="NonMerchandiseItemMultipleValueLinePrice">
                            <core:elements>
<core:text id="AtLabelText">
    <core:text>@ </core:text>
</core:text>
<core:text id="NonMerchandiseItemMultipleValueLinePriceText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.unitPrice}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="NonMerchandiseItemMultipleValueLineValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.text)}" id="NonMerchandiseItemMultipleTextLine">
                    <core:elements>
                        <core:formatElement formatId="itemText"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.isReturn &amp;&amp; !empty(item.returnItemDetail) &amp;&amp; !empty(item.returnItemDetail.returnReference)}" id="NonMerchandiseItemMultipleReturnReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="NonMerchandiseItemMultipleReturnReference">
                            <core:elements>
<core:text messageId="RETURN_REFERENCE" id="ReturnReferenceLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="ReturnReferenceText">
    <core:text>#{item.returnItemDetail.returnReference}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement applicability="#{!item.voided &amp;&amp; item.receiptControl != null &amp;&amp; !empty item.receiptControl.receiptMessage}" formatId="receiptMessage"/>
            <core:formatElement applicability="#{!item.voided}" formatId="itemModifiers"/>
            <core:formatElement formatId="lineSeparator"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="feeItem">
        <core:elements>
            <core:row style="#{item.voided ? 'STRIKEOUT' : ''};#{item.voided ? 'ITALIC' : ''}" id="FeeItemRow">
                <core:rowLine id="FeeItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" id="FeeItemLineLabel">
                            <core:elements>
<core:text messageId="ITEM_VOID_FLAG" visibility="#{item.voided}" id="ItemVoidFlagLabelText"/>
<core:text messageId="ITEM_RETURN_FLAG" visibility="#{item.isReturn}" id="ItemReturnFlagLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="FeeItemLineValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" wrap="true" columnDefId="2" id="FeeItemLineDescription">
                            <core:elements>
<core:text messageId="FEE_ITEM_DESCRIPTION" visibility="#{notEmpty(item.modifiedItem)}" id="FeeItemLineDescriptionText"/>
<core:text messageId="FEE_ITEM_DESCRIPTION_WITHOUT_MODIFIED_ITEM" visibility="#{isEmpty(item.modifiedItem)}" id="FeeItemLineDescriptionWithoutModifiedItemText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.feeRate != 0 || item.feeAmount != 0}" id="FeeItemAmountLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="FeeItemAmount">
                            <core:elements>
<core:text messageId="FEE_ITEM_AMOUNT" id="FeeItemAmountText">
    <core:uiMessage messageId="FEE_ITEM_AMOUNT_AND_RATE" applicability="#{item.feeRate != 0 &amp;&amp; item.feeAmount != 0}"/>
    <core:uiMessage messageId="FEE_ITEM_RATE" applicability="#{item.feeRate != 0}"/>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.text)}" id="FeeItemTextLine">
                    <core:elements>
                        <core:formatElement formatId="itemText"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.isReturn &amp;&amp; !empty(item.returnItemDetail) &amp;&amp; !empty(item.returnItemDetail.returnReference)}" id="FeeItemReturnReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="FeeItemReturnReference">
                            <core:elements>
<core:text messageId="RETURN_REFERENCE" id="FeeItemReturnReferenceLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="FeeItemReturnReferenceText">
    <core:text>#{item.returnItemDetail.returnReference}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement applicability="#{!item.voided &amp;&amp; item.receiptControl != null &amp;&amp; !empty item.receiptControl.receiptMessage}" formatId="receiptMessage"/>
            <core:formatElement applicability="#{!item.voided}" formatId="itemModifiers"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="discountItem">
        <core:elements>
            <core:row id="DiscountItemRow">
                <core:rowLine id="DiscountItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="DiscountItem">
                            <core:elements>
<core:text id="ItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
<core:text id="ModifiedItemDescriptionText">
    <core:text> (#{mfcBasket:resolveItemDescription(item.modifiedItem, formatter)})</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="DiscountItemValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionDiscountItem">
        <core:elements>
            <core:formatElement applicability="#{enumEquals(item.type, 'PERCENTAGE')}" formatId="transactionDiscountPercentageItem" visible="false"/>
            <core:formatElement applicability="#{enumEquals(item.type, 'VALUE')}" formatId="transactionDiscountValueItem" visible="false"/>
            <core:formatElement formatId="transactionDiscountRowItem"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionDiscountRowItem">
        <core:elements>
            <core:row id="TransactionDiscountItemRow">
                <core:rowLine id="TransactionDiscountItemLine">
                    <core:elements>
                        <core:column maxLines="0" wrap="true" columnDefId="2" id="TransactionDiscountItem">
                            <core:elements>
<core:text messageId="TRANSACTION_DISCOUNT_ITEM" visibility="#{empty(mfcBasket:resolveReasonDescription(item, formatter))}" id="TransactionDiscountItemText"/>
<core:text visibility="#{!empty(mfcBasket:resolveReasonDescription(item, formatter))}" id="TransactionDiscountItemWithReasonText">
    <core:text>#{strings:wrapString(concatenate(resolveMessage('Pos/Print/ReceiptMessages','TRANSACTION_DISCOUNT_ITEM'),' (',mfcBasket:resolveReasonDescription(item, formatter),')'),32)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="TransactionDiscountItemValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionDiscountPercentageItem">
        <core:elements>
            <core:row id="TransactionDiscountItemRow">
                <core:rowLine id="TransactionDiscountItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="TransactionDiscountLabel">
                            <core:elements>
<core:text messageId="TRANSACTION_DISCOUNT_ITEM" id="TransactionDiscountLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="TransactionDiscountItemPercentageValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemPercentage"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="TransactionDiscountItemAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemValueCurrency"/>
<core:formatElement formatId="transactionDiscountItemAbsoluteValue"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="TransactionDiscountItemInvertedValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemValueCurrency"/>
<core:formatElement formatId="transactionDiscountItemInvertedValue"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="TransactionDiscountItemActualValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemValueCurrency"/>
<core:formatElement formatId="transactionDiscountItemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionDiscountValueItem">
        <core:elements>
            <core:row id="TransactionDiscountItemRow">
                <core:rowLine id="TransactionDiscountItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="TransactionDiscountLabel">
                            <core:elements>
<core:text messageId="TRANSACTION_DISCOUNT_ITEM" id="TransactionDiscountLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="TransactionDiscountItemAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemValueCurrency"/>
<core:formatElement formatId="transactionDiscountItemAbsoluteValue"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="TransactionDiscountItemInvertedValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemValueCurrency"/>
<core:formatElement formatId="transactionDiscountItemInvertedValue"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="TransactionDiscountItemActualValue">
                            <core:elements>
<core:formatElement formatId="transactionDiscountItemValueCurrency"/>
<core:formatElement formatId="transactionDiscountItemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="priceOverrideItem">
        <core:elements>
            <core:row id="PriceOverrideItemRow">
                <core:rowLine id="PriceOverrideItemLine">
                    <core:elements>
                        <core:column maxLines="0" wrap="true" columnDefId="2" id="PriceOverrideItemDescription">
                            <core:elements>
<core:text id="PriceOverrideItemDescriptionText">
    <core:text>#{strings:wrapString(concatenate(mfcBasket:resolveItemDescription(item, formatter),' (',mfcBasket:resolveItemDescription(item.modifiedItem, formatter),')'),32)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="storageItem">
        <core:elements>
            <core:row id="StorageItemRow">
                <core:rowLine id="StorageItemCreatedTimeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" style="BOLD" id="StorageItemCreatedTime">
                            <core:elements>
<core:text id="PreDecorationText">
    <core:text>***** </core:text>
</core:text>
<core:text style="ITALIC" id="StorageItemCreatedTimeText">
    <core:formatters>
        <core:formatDate pattern="shortDateTime"/>
    </core:formatters>
    <core:text>#{item.dateTimeCreated}</core:text>
</core:text>
<core:text id="PostDecorationText">
    <core:text> *****</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="StorageItemCreatedTextLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" style="BOLD;ITALIC" id="StorageItemTextLabel">
                            <core:elements>
<core:formatElement formatId="storedHeader"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="noSaleItem">
        <core:elements>
            <core:row id="NoSaleItemRow">
                <core:rowLine id="NoSaleItemDescriptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="NoSaleItemDescription">
                            <core:elements>
<core:text id="NoSaleItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty(item.referenceNumber)}" id="NoSaleItemReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="NoSaleItemReference">
                            <core:elements>
<core:text messageId="REFERENCE" id="NoSaleItemReferenceLabelText"/>
<core:text id="SpaceSeparatorText">
    <core:text> </core:text>
</core:text>
<core:text id="NoSaleItemReferenceText">
    <core:text>#{item.referenceNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="honourPromotionItem">
        <core:elements>
            <core:row style="#{item.voided ? 'STRIKEOUT' : ''};#{item.voided ? 'ITALIC' : ''}" id="HonourPromotionItemRow">
                <core:rowLine id="HonourPromotionItemDescriptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="HonourPromotionItemDescription">
                            <core:elements>
<core:text id="HonourPromotionItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
<core:text visibility="#{notEmpty(mfcBasket:resolveReasonDescription(item, formatter))}" id="HonourPromotionItemDescriptionNotEmptyText">
    <core:text> (#{mfcBasket:resolveReasonDescription(item, formatter)})</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.originalTransactionId)}" id="HonourPromotionItemTransactionIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="HonourPromotionItemTransactionId">
                            <core:elements>
<core:text id="IdLabelText">
    <core:text>  ID: </core:text>
</core:text>
<core:text id="HonourPromotionItemTransactionIdText">
    <core:text>#{item.originalTransactionId.transactionId}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="tenderItem">
        <core:elements>
            <core:row styleClass="tender" id="TenderItemRow">
                <core:rowLine id="TenderItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" id="TenderItemLineVoidLabel">
                            <core:elements>
<core:text messageId="TENDER_VOID_FLAG" visibility="#{item.voided}" id="TenderItemLineVoidLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="TenderItemLineItem">
                            <core:elements>
<core:text messageId="TENDER_REFUND" visibility="#{item.isRefund}" id="TenderRefundLabelText"/>
<core:text visibility="#{item.isRefund}" id="IsRefundSpaceText">
    <core:text> </core:text>
</core:text>
<core:text visibility="#{item.entityQName.localPart != 'cardTenderItem'}" id="ItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
<core:text visibility="#{item.entityQName.localPart == 'cardTenderItem'}" id="CardDescriptionText">
    <core:text>#{item.cardDetails.cardDescription}</core:text>
</core:text>
<core:text visibility="#{abs(item.tenderAmount) != abs(item.value)}" id="StartingBracketText">
    <core:text> (</core:text>
</core:text>
<core:text visibility="#{abs(item.tenderAmount) != abs(item.value)}" id="TenderAmountTextText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.tenderAmount}</core:text>
</core:text>
<core:text visibility="#{abs(item.tenderAmount) != abs(item.value)}" id="EndingBracketTextText">
    <core:text>)</core:text>
</core:text>
<core:text visibility="#{item.voided}" id="ItemVoidedSpaceText">
    <core:text> </core:text>
</core:text>
<core:text messageId="TENDER_VOID" visibility="#{item.voided}" id="TenderVoidLabelText"/>
<core:text visibility="#{item.voided}" id="ItemVoidedSpaceText2">
    <core:text> </core:text>
</core:text>
<core:formatElement formatId="tenderItemValue" visibility="#{item.voided}"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{item.foreignAmount == 0 &amp;&amp; !item.voided}" id="TenderItemLineValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValue"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{item.foreignAmount == 0 &amp;&amp; !item.voided &amp;&amp; false}" id="TenderItemLineAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.foreignAmount != 0}" id="TenderItemForeignAmountLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="TenderItemForeignAmount">
                            <core:elements>
<core:text id="SpaceText1">
    <core:text>  </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="TenderItemForeignAmountText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="AtSymbolText">
    <core:text> @ </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ExchangeRateText">
    <core:formatters>
        <core:formatExchangeRate currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.exchangeRate}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountText">
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="SpaceText2">
    <core:text> </core:text>
</core:text>
<core:text messageId="LOYALTY_POINTS" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="LoyaltyPointsLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{!item.voided}" id="TenderItemForeignAmountValue">
                            <core:elements>
<core:formatElement formatId="tenderItemForeignAmount"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{!item.voided &amp;&amp; false}" id="TenderItemForeignAmountAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!item.voided &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IVoucherTenderItem') &amp;&amp; !empty(item.serialNumber)}" id="TenderItemSerialNumberLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="TenderItemSerialNumber">
                            <core:elements>
<core:text messageId="SERIAL_NUMBER" id="TenderItemSerialNumberLabelText"/>
<core:text id="TenderItemSerialNumberText">
    <core:text>#{item.serialNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.overPaymentAmount != 0 &amp;&amp; item.foreignAmount == 0}" id="TenderItemOverPaymentLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="TenderItemOverPaymentAmount">
                            <core:elements>
<core:text messageId="OVERPAYMENT" id="TenderItemOverPaymentAmountLabelText"/>
<core:text id="SpaceText3">
    <core:text> </core:text>
</core:text>
<core:text id="TenderItemOverPaymentAmountText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.overPaymentAmount}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemOverPaymentLabel">
                            <core:elements>
<core:text messageId="OVERPAYMENT" id="TenderItemOverPaymentLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemOverPaymentAmountAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteOverPaymentAmount"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.overPaymentAmount != 0 &amp;&amp; item.foreignAmount != 0}" id="TenderItemForeignOverPaymentLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="TenderItemForeignOverPaymentAmount">
                            <core:elements>
<core:text messageId="OVERPAYMENT" id="TenderItemForeignOverPaymentAmountLabelText"/>
<core:text id="SpaceText4">
    <core:text> </core:text>
</core:text>
<core:text id="TenderItemForeignOverPaymentAmountText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.overPaymentForeignAmount}</core:text>
</core:text>
<core:text id="StartingBracketText2">
    <core:text> (</core:text>
</core:text>
<core:text id="OverPaymentAmountText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.overPaymentAmount}</core:text>
</core:text>
<core:text id="EndingBracketText2">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemForeignOverPaymentLabel">
                            <core:elements>
<core:text messageId="OVERPAYMENT" id="TenderItemForeignOverPaymentLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemForeignOverPaymentAmountAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteOverPaymentForeignAmount"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IChequeTenderItem') &amp;&amp; notEmpty(item.guaranteeCardDetails.mangledPAN)}" id="TenderItemChequeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="TenderItemCheque">
                            <core:elements>
<core:text id="TenderItemChequeText">
    <core:text>#{item.guaranteeCardDetails.mangledPAN}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.externalTransactionReference) &amp;&amp; (item.digitalPaymentType == 'KLARNA_LINK'|| item.digitalPaymentType == 'KLARNA_TOKEN') }" id="TenderItemKlarnaPaymentReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemKlarnaPaymentReference">
                            <core:elements>
<core:text messageId="KLARNA_PAYMENT_REFERENCE" id="TenderItemKlarnaPaymentReferenceText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.paymentMethod) &amp;&amp; (item.digitalPaymentType == 'KLARNA_LINK'|| item.digitalPaymentType == 'KLARNA_TOKEN') }" id="TenderItemKlarnaPaymentMethodLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemKlarnaPaymentMethod">
                            <core:elements>
<core:text messageId="KLARNA_PAYMENT_METHOD" id="TenderItemKlarnaPaymentMethodText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.cardDetails.cardScheme) &amp;&amp; item.digitalPaymentType == 'ENACTOR_PAY_BY_LINK' }" id="TenderItemEnactorCardSchemeIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemEnactorCardSchemeId">
                            <core:elements>
<core:text messageId="ENACTOR_CARD_SCHEME_ID" id="TenderItemEnactorCardSchemeIdText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.externalTransactionReference) &amp;&amp; item.digitalPaymentType == 'ENACTOR_PAY_BY_LINK' }" id="TenderItemEnactorPaymentReferenceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemEnactorPaymentReference">
                            <core:elements>
<core:text messageId="ENACTOR_PAYMENT_REFERENCE" id="TenderItemEnactorPaymentReferenceText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.authCode) &amp;&amp; item.digitalPaymentType == 'ENACTOR_PAY_BY_LINK' }" id="TenderItemEnactorAuthCodeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemEnactorAuthCode">
                            <core:elements>
<core:text messageId="ENACTOR_AUTHCODE" id="TenderItemEnactorAuthCodeText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.merchantId) &amp;&amp; item.digitalPaymentType == 'ENACTOR_PAY_BY_LINK' }" id="TenderItemEnactorMerchantIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemEnactorMerchantId">
                            <core:elements>
<core:text messageId="ENACTOR_MERCHANT_ID" id="TenderItemEnactorMerchantIdText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.digitalPay.IDigitalPaymentTenderItem') &amp;&amp; notEmpty(item.terminalId) &amp;&amp; item.digitalPaymentType == 'ENACTOR_PAY_BY_LINK' }" id="TenderItemEnactorTerminalIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemEnactorTerminalId">
                            <core:elements>
<core:text messageId="ENACTOR_TERMINAL_ID" id="TenderItemEnactorTerminalIdText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{ !item.voided &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IPayPalTenderItem') &amp;&amp; notEmpty(item.authorisationCode)}" id="TenderItemPayPalAuthorisationCodeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemPayPalAuthorisationCode">
                            <core:elements>
<core:text messageId="PAYPAL_AUTHORISATION_CODE" id="TenderItemPayPalAuthorisationCodeText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{ !item.voided &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IPayPalTenderItem') &amp;&amp; notEmpty(item.transactionId)}" id="TenderItemPayPalTransactionIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemPayPalTransactionId">
                            <core:elements>
<core:text messageId="PAYPAL_TRANSACTION_ID" id="TenderItemPayPalTransactionIdText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{ !item.voided &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IPayPalTenderItem') &amp;&amp; notEmpty(item.originalTransactionId)}" id="TenderItemPayPalOriginalTransactionIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="TenderItemPayPalOriginalTransactionId">
                            <core:elements>
<core:text messageId="PAYPAL_ORIGINAL_TRANSACTION_ID" id="TenderItemPayPalOriginalTransactionIdText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IGiftCardTenderItem') &amp;&amp;                    (notEmpty(item.giftCardDetails.cardDetails.mangledPAN) || notEmpty(item.giftCardDetails.accountId))}" id="TenderItemGiftCardLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="TenderItemGiftCard">
                            <core:elements>
<core:text id="TenderItemGiftCardText">
    <core:text>#{notEmpty(item.giftCardDetails.cardDetails.mangledPAN) ? item.giftCardDetails.cardDetails.mangledPAN : item.giftCardDetails.accountId}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!item.voided &amp;&amp; !item.isRefund &amp;&amp; !item.isChange &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IGiftCardTenderItem')        &amp;&amp; (notEmpty(item.giftCardDetails.cardDetails.mangledPAN) || notEmpty(item.giftCardDetails.accountId))        &amp;&amp; item.giftCardDetails.authorisedOnline}" id="TenderItemGiftCardBalanceLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="TenderItemGiftCardBalanceLabel">
                            <core:elements>
<core:text messageId="GIFT_CARD_BALANCE_REMAINING" id="TenderItemGiftCardBalanceLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemGiftCardBalanceAbsolute">
                            <core:elements>
<core:formatElement formatId="giftCardNewBalanceCurrency"/>
<core:formatElement formatId="giftCardNewBalanceAbsolute"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!item.voided &amp;&amp; (item.isRefund || item.isChange) &amp;&amp; instanceOf(item, 'com.enactor.mfc.basket.items.IGiftCardTenderItem')        &amp;&amp; (notEmpty(item.giftCardDetails.cardDetails.mangledPAN) || notEmpty(item.giftCardDetails.accountId))        &amp;&amp; item.giftCardDetails.authorisedOnline &amp;&amp; (item.giftCardDetails.newBalance != 0)}" id="TenderItemGiftCardRefundLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="TenderItemGiftCardRefundLabel">
                            <core:elements>
<core:text messageId="GIFT_CARD_REFUND_BALANCE" id="TenderItemGiftCardRefundLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.referenceNumber) &amp;&amp; item.printReferenceNumber}" id="TenderItemReferenceNumberLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="TenderItemReferenceNumber">
                            <core:elements>
<core:text messageId="REFERENCE" id="TenderItemReferenceNumberLabelText"/>
<core:text id="SpaceText5">
    <core:text> </core:text>
</core:text>
<core:text id="TenderItemReferenceNumberText">
    <core:text>#{item.referenceNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement applicability="#{instanceOf(item, 'com.enactor.mfc.basket.items.IPayPalTenderItem')}" formatId="payPalItemErrors" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IPayPalTenderItem')}"/>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="tender" keyValue="#{item.tenderKey}"/>
            <core:entityReference name="tenderChangeTender" keyValue="#{tender.changeTenderKey}"/>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="payPalItemErrors">
        <core:elements>
            <core:tableTemplate listVariableName="errorData" list="#{item.errors}" id="PayPalErrors">
                <core:formatElement formatId="payPalItemError"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="payPalItemError">
        <core:elements>
            <core:row id="PayPalItemErrorRow">
                <core:rowLine id="PayPalItemErrorLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="InfoDesc" id="PayPalItemErrorText">
                            <core:elements>
<core:text messageId="PAYPAL_ERROR_DATA" id="PayPalItemErrorLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="changeTenderItem">
        <core:elements>
            <core:row styleClass="tender change" id="ChangeTenderItemRow">
                <core:rowLine id="ChangeTenderItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="ChangeTenderItemDescription">
                            <core:elements>
<core:text messageId="CHANGE" id="ChangeTenderItemDescriptionLabelText"/>
<core:text id="ChangeTenderItemDescriptionText">
    <core:text> (#{mfcBasket:resolveItemDescription(item, formatter)})</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{item.foreignAmount == 0}" id="ChangeTenderItemAmount">
                            <core:elements>
<core:text id="ChangeTenderItemAmountText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.tenderAmount}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{item.foreignAmount == 0 &amp;&amp; false}" id="TenderItemLineAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemTenderAmountCurrency"/>
<core:formatElement formatId="tenderItemTenderAmount"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.foreignAmount != 0}" id="ChangeTenderItemForeignAmountLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="ChangeTenderItemForeignAmount">
                            <core:elements>
<core:text id="SpaceText1">
    <core:text>  </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountFormattedText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="AtSymbolText">
    <core:text> @ </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ExchangeRateText">
    <core:formatters>
        <core:formatExchangeRate currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.exchangeRate}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountText">
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="SpaceText2">
    <core:text> </core:text>
</core:text>
<core:text messageId="LOYALTY_POINTS" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="LoyaltyPointsLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="ChangeTenderItemForeignAmountValue">
                            <core:elements>
<core:text id="ChangeTenderItemForeignAmountValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="TenderItemForeignAmountAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.overPaymentAmount != 0 &amp;&amp; item.foreignAmount == 0}" id="ChangeTenderItemOverPaymentLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="ChangeTenderItemOverPayment">
                            <core:elements>
<core:text messageId="CHANGE_NOT_GIVEN" id="ChangeTenderItemOverPaymentText">
    <core:uiMessage messageId="CHANGE_OVER_PAID" applicability="#{item.overPaymentAmount &gt; 0}"/>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="ChangeTenderItemOverPaymentAmount">
                            <core:elements>
<core:text id="ChangeTenderItemOverPaymentAmountText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{-item.overPaymentAmount}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemOverPaymentAmountAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteOverPaymentAmount"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.overPaymentAmount != 0 &amp;&amp; item.foreignAmount != 0}" id="ChangeTenderItemForeignOverPaymentLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="ChangeTenderItemForeignOverPayment">
                            <core:elements>
<core:text messageId="OVERPAYMENT" id="ChangeTenderItemForeignOverPaymentLabelText"/>
<core:text id="SpaceText3">
    <core:text> </core:text>
</core:text>
<core:text id="ForeignOverPaymentText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.overPaymentForeignAmount}</core:text>
</core:text>
<core:text id="StartingBracketText">
    <core:text> (</core:text>
</core:text>
<core:text id="OverPaymentText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.overPaymentAmount}</core:text>
</core:text>
<core:text id="EndingBracketText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemForeignOverPaymentLabel">
                            <core:elements>
<core:text messageId="OVERPAYMENT" id="TenderItemForeignOverPaymentLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visible="false" id="TenderItemForeignOverPaymentAmountAbsoluteValue">
                            <core:elements>
<core:formatElement formatId="tenderItemValueCurrency"/>
<core:formatElement formatId="tenderItemAbsoluteOverPaymentForeignAmount"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerToPayTenderItem">
        <core:elements>
            <core:row styleClass="tender change" id="CustomerToPayTenderItemRow">
                <core:rowLine id="CustomerToPayTenderItemNoneForeignLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerToPayTenderItemNoneForeignDescription">
                            <core:elements>
<core:text messageId="CUSTOMER_TO_PAY" id="CustomerToPayTenderItemNoneForeignDescriptionLabelText"/>
<core:text id="CustomerToPayTenderItemNoneForeignDescriptionText">
    <core:text> (#{mfcBasket:resolveItemDescription(item, formatter)})</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{item.foreignAmount == 0}" id="CustomerToPayTenderItemNoneForeignValue">
                            <core:elements>
<core:text id="CustomerToPayTenderItemNoneForeignValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.foreignAmount != 0}" id="CustomerToPayTenderItemForeignLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerToPayTenderItemForeignDescription">
                            <core:elements>
<core:text id="SpaceText1">
    <core:text>  </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountFormattedText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="AtSymbolText">
    <core:text> @ </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ExchangeRateText">
    <core:formatters>
        <core:formatExchangeRate currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.exchangeRate}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountText">
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="SpaceText2">
    <core:text> </core:text>
</core:text>
<core:text messageId="LOYALTY_POINTS" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="LoyaltyPointsText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="CustomerToPayTenderItemForeignValue">
                            <core:elements>
<core:text id="CustomerToPayTenderItemForeignValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="cashbackTenderItem">
        <core:elements>
            <core:row styleClass="tender cashback" id="CashbackTenderItemRow">
                <core:rowLine id="CashbackTenderItemNoneForeignLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" colour="blue" style="BOLD;DOUBLE_HIGH;DOUBLE_WIDE" id="CashbackTenderItemNoneForeignLabel">
                            <core:elements>
<core:text messageId="CASHBACK" id="CashbackTenderItemNoneForeignLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{item.foreignAmount == 0}" colour="blue" style="BOLD;DOUBLE_HIGH;DOUBLE_WIDE" id="CashbackTenderItemNoneForeignValue">
                            <core:elements>
<core:text id="CashbackTenderItemNoneForeignValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.foreignAmount != 0}" id="CashbackTenderItemForeignLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CashbackTenderItemForeignDescription">
                            <core:elements>
<core:text id="SpaceText1">
    <core:text>  </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountFormattedText">
    <core:formatters>
        <core:formatCurrencyAmount currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="AtSymbolText">
    <core:text> @ </core:text>
</core:text>
<core:text visibility="#{!instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ExchangeRateText">
    <core:formatters>
        <core:formatExchangeRate currencyId="#{item.currencyId}"/>
    </core:formatters>
    <core:text>#{item.exchangeRate}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="ForeignAmountText">
    <core:text>#{item.foreignAmount}</core:text>
</core:text>
<core:text visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="SpaceText2">
    <core:text> </core:text>
</core:text>
<core:text messageId="LOYALTY_POINTS" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ILoyaltyAccountTenderItem')}" id="LoyaltyPointsLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" colour="blue" style="BOLD;DOUBLE_HIGH;DOUBLE_WIDE" id="CashbackTenderItemForeignValue">
                            <core:elements>
<core:text id="CashbackTenderItemForeignValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="saveTenderAuthUserId">
        <core:elements>
            <core:row visibility="#{!empty(item.authorisingUserId)}" id="SaveTenderAuthUserIdRow">
                <core:rowLine id="SaveTenderAuthUserIdLine">
                    <core:elements>
                        <core:assign to="authorisingUserId" type="java.lang.String" value="#{item.authorisingUserId}" id="SaveTenderAuthUserId"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="voucherRedemptionItem">
        <core:elements>
            <core:row id="VoucherRedemptionItemRow">
                <core:rowLine id="VoucherRedemptionItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="VoucherRedemptionItemDescription">
                            <core:elements>
<core:text messageId="REDEEM_VOUCHER" id="RedeemVoucherLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="VoucherRedemptionItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="recordRepairItem">
        <core:elements>
            <core:assign to="repairItems" type="int" value="#{repairItems + 1}" id="RecordRepairItemCount"/>
            <core:row id="RecordRepairItemRow">
                <core:rowLine id="RecordRepairItemNumberLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="RecordRepairItemNumber">
                            <core:elements>
<core:text messageId="RECORD_REPAIR" id="RecordRepairText"/>
<core:text id="SpaceText1">
    <core:text> </core:text>
</core:text>
<core:text id="RecordRepairItemNumberText">
    <core:text>#{item.repairNumber}</core:text>
</core:text>
<core:text id="SpaceText2">
    <core:text> </core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visible="false" id="RecordRepairItemCostLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="RecordRepairItemCostLine">
                            <core:elements>
<core:text id="SpaceText3">
    <core:text>   </core:text>
</core:text>
<core:text messageId="REQUIRES_QUOTE" visibility="#{empty(item.estimatedCost)}" id="RequiresQuoteLabelText"/>
<core:text messageId="ESTIMATED_COST" visibility="#{!empty(item.estimatedCost)}" id="EstimatedCostLabelText"/>
<core:text visibility="#{!empty(item.estimatedCost)}" id="SpaceText4">
    <core:text> </core:text>
</core:text>
<core:text visibility="#{!empty(item.estimatedCost)}" id="EstimatedCostText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.estimatedCost}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="RecordRepairItemDescriptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeftWrapped" id="RecordRepairItemDescription">
                            <core:elements>
<core:text id="RecordRepairItemDescriptionText">
    <core:text>#{item.repairDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="RecordRepairItemIdLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" id="RecordRepairItemId">
                            <core:elements>
<core:text style="DOUBLE_WIDE" id="RecordRepairItemIdText">
    <core:text>#{item.formattedReceiptRepairId}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="RecordRepairItemBarcodeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" id="RecordRepairItemBarcodeColumn">
                            <core:elements>
<core:barcode hri="true" barcodeSize="SMALL" barcodeType="ITF_2of5" id="RecordRepairItemBarcode">
    <core:data>#{item.repairNumber}</core:data>
</core:barcode>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="recallRepairItem">
        <core:elements>
            <core:row id="RecallRepairItemRow">
                <core:rowLine id="RecallRepairItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="RecallRepairItemNumber">
                            <core:elements>
<core:text messageId="RECALL_REPAIR" id="RecallRepairText"/>
<core:text id="SpaceText1">
    <core:text> </core:text>
</core:text>
<core:text id="RecallRepairItemNumberText">
    <core:text>#{item.repairNumber}</core:text>
</core:text>
<core:text id="SpaceText2">
    <core:text> </core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="RecallRepairItemValue">
                            <core:elements>
<core:text id="RecallRepairItemValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="issueLoyaltyCardItem">
        <core:elements>
            <core:row id="IssueLoyaltyCardItemRow">
                <core:rowLine id="IssueLoyaltyCardItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="IssueLoyaltyCardItemNumber">
                            <core:elements>
<core:text messageId="ISSUED_LOYALTY_CARD" id="IssuedLoyaltyCardLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="IssueLoyaltyCardItemNumberText">
    <core:text>#{item.loyaltyCardNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="authUser">
        <core:elements>
            <core:row visibility="#{!empty(authorisingUserId)}" id="AuthUserRow">
                <core:rowLine id="AuthUserLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="AuthUserDetails">
                            <core:elements>
<core:text messageId="AUTH_USER" id="AuthUserLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="AuthUserDetailsText">
    <core:text>#{empty(authUser) ? authorisingUserId : authUser.displayName}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="authUser" entityName="user" entityNamespace="http://www.enactor.com/retail">
                <core:keyProperty name="userId" value="#{authorisingUserId}"/>
            </core:entityReference>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="deliveryPackageItem">
        <core:elements>
            <core:row id="DeliveryPackageItemRow">
                <core:rowLine id="DeliveryPackageItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="DeliveryPackageItemLabel">
                            <core:elements>
<core:text messageId="DELIVERY_PACKAGE" id="DeliveryPackageItemLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="alterationServiceItem">
        <core:elements>
            <core:row id="AlterationServiceItemRow">
                <core:rowLine id="AlterationServiceItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="1" id="AlterationServiceItemLabel">
                            <core:elements>
<core:text messageId="ITEM_VOID_FLAG" visibility="#{item.voided}" id="ItemVoidFlagLabelText"/>
<core:text messageId="ITEM_RETURN_FLAG" visibility="#{item.isReturn &amp;&amp; !instanceOf(item, 'com.enactor.mfc.basket.items.IBuyBackItem')}" id="ItemReturnFlagLabelText"/>
<core:text messageId="ITEM_BUYBACK_FLAG" visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.IBuyBackItem')}" id="ItemBuybackFlagLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" id="AlterationServiceItemDescription">
                            <core:elements>
<core:text id="SpaceText">
    <core:text>  </core:text>
</core:text>
<core:text id="AlterationServiceItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="AlterationServiceItemValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="alterationServiceDetailItem">
        <core:elements>
            <core:row visibility="#{!item.currentTransaction}" id="AlterationServiceDetailItemRow">
                <core:rowLine id="AlterationServiceDetailItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="AlterationServiceDetailItemDescription">
                            <core:elements>
<core:text id="AlterationServiceDetailItemDescriptionText">
    <core:text>#{mfcBasket:resolveLocalisedDescription(item.localisedProductDescription, item.productDescription, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:tableTemplate listVariableName="item" list="#{item.childItems}" visibility="#{!item.currentTransaction}" id="AlterationServiceItems">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IAlterationServiceItem" formatId="alterationServiceItem"/>
                <core:formatElement id="hideAlterationServiceItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="afterSalesItems">
        <core:elements>
            <core:row visibility="#{instanceOf(item, 'com.enactor.mfc.basket.items.ISalesItem') &amp;&amp; item.dispatchable}" id="AfterSalesItemsRow">
                <core:rowLine id="AfterSalesItemsLine">
                    <core:elements>
                        <core:column maxLines="0" align="LEFT" columnDefId="LeftColumn" id="AfterSaleItemsAddressKey">
                            <core:elements>
<core:text messageId="DISPATCH_TAKEN_MARKER" id="AfterSaleItemsAddressKeyText">
    <core:uiMessage messageId="DISPATCH_BACK_ORDER_MARKER" applicability="#{mfcBasket:itemHasModifier(item, 'com.enactor.mfc.basket.items.IBackOrderModifier')}"/>
    <core:uiMessage messageId="DISPATCH_SEND_MARKER" applicability="#{mfcBasket:itemHasModifier(item, 'com.enactor.mfc.basket.items.IDispatchModifier')}"/>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="RightColumn" id="AfterSaleItemsAddressDetail">
                            <core:elements>
<core:formatElement formatId="getDispatchModifier"/>
<core:text messageId="DISPATCH_TAX_NOT_DEDUCTED" id="AfterSaleItemsAddressDetailText">
    <core:uiMessage messageId="DISPATCH_TAX_DEDUCTED" applicability="#{!empty(dispatchModifier) &amp;&amp; dispatchModifier.deductTax}"/>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="loyaltyPointsAdjustmentItem">
        <core:elements>
            <core:row id="LoyaltyPointsAdjustmentItemRow">
                <core:rowLine id="LoyaltyPointsAdjustmentItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="LoyaltyPointsAdjustmentItemAdjustment">
                            <core:elements>
<core:text messageId="LOYALTY_POINTS_DECREASE" id="LoyaltyPointsAdjustmentItemAdjustmentText">
    <core:uiMessage messageId="LOYALTY_POINTS_INCREASE" applicability="#{item.points &gt;= 0}"/>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="taxGroupOverrideModifier">
        <core:elements>
            <core:row visibility="#{!modifier.voided}" id="TaxGroupOverrideModifierRow">
                <core:rowLine id="TaxGroupOverrideModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{notEmpty(modifier.modifierItem)}" id="TaxGroupOverrideModifierLabel">
                            <core:elements>
<core:text messageId="TAX_GROUP_OVERRIDE_MODIFIER" id="TaxGroupOverrideModifierLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderCollectionBasketItem">
        <core:elements>
            <core:row visibility="#{item.collectionQuantity != 0}" id="CustomerOrderCollectionBasketItemRow">
                <core:rowLine id="CustomerOrderCollectionBasketItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerOrderCollectionBasketItemProduct">
                            <core:elements>
<core:text messageId="ORDER_COLLECTION_ITEM" id="OrderCollectionBasketItemLabelText"/>
<core:text visibility="#{notEmpty(item.collectionProductId)}" id="CollectionProductIdText">
    <core:text> #{item.collectionProductId}</core:text>
</core:text>
<core:text id="ItemDescriptionText">
    <core:text> #{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="CustomerOrderCollectionBasketItemPrice">
                            <core:elements>
<core:text id="OrderNetPriceText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.orderNetPrice}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderCollectionHeaderBasketItem">
        <core:elements>
            <core:row id="CustomerOrderCollectionHeaderBasketItemRow">
                <core:rowLine id="CustomerOrderCollectionHeaderBasketItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="7" id="CustomerOrderCollectionHeaderBasketItemOrderId">
                            <core:elements>
<core:text messageId="ORDER_COLLECTION_ORDER_ID" id="OrderCollectionOrderIdText"/>
<core:text id="CustomerOrderHeaderKeyText">
    <core:text> #{notEmpty(item.customerOrderHeaderKey) ? item.customerOrderHeaderKey.customerOrderId : ''}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderReturnDetailsItem">
        <core:elements>
            <core:row id="CustomerOrderReturnDetailsItemRow">
                <core:rowLine style="BOLD" id="CustomerOrderReturnDetailsItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" id="CustomerOrderReturnDetailsItemOrderId">
                            <core:elements>
<core:text messageId="ORDER_ID_RETURN" id="OrderIdReturnLabelText"/>
<core:text id="CustomerOrderReturnDetailsItemOrderIdText">
    <core:text> #{notEmpty(item.customerOrderHeaderKey) ? item.customerOrderHeaderKey.customerOrderId : ''}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:assign to="savedOrderReturnItem" value="#{item}" id="CustomerOrderReturnDetailsItemOrderItem"/>
            <core:tableTemplate listVariableName="item" list="#{savedOrderReturnItem.modifiedItems}" id="OrderReturnItems">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IMerchandiseItem" applicability="#{abs(item.quantity) == 1 &amp;&amp; (item.unitType == null || enumEquals(item.unitType, 'UNIT')) &amp;&amp; !item.voided}" formatId="merchandiseItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IMerchandiseItem" applicability="#{!item.voided}" formatId="merchandiseItemMultiple"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IGiftCardItem" formatId="nonMerchandiseItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.INonMerchandiseItem" applicability="#{abs(item.quantity) &lt;= 1 &amp;&amp; !item.voided}" formatId="nonMerchandiseItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.INonMerchandiseItem" applicability="#{abs(item.quantity) &gt; 1 &amp;&amp; !item.voided}" formatId="nonMerchandiseItemMultiple"/>
                <core:formatElement id="hideSavedOrderReturnItem"/>
            </core:tableTemplate>
            <core:assign to="item" value="#{savedOrderReturnItem}" id="CustomerOrderReturnDetailsItemOrderReturnItem"/>
            <core:assign to="savedOrderReturnItem" value="#{null}" id="CustomerOrderReturnDetailsItemNull"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderPaymentForCollection">
        <core:elements>
            <core:row id="CustomerOrderPaymentForCollectionRow">
                <core:rowLine id="CustomerOrderPaymentForCollectionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerOrderPaymentForCollectionLabel">
                            <core:elements>
<core:text messageId="ORDER_COLLECTION_PAYMENT" id="OrderCollectionPaymentText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="CustomerOrderPaymentForCollectionValue">
                            <core:elements>
<core:text id="CustomerOrderPaymentForCollectionValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.netValue}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderPaymentBasketItem">
        <core:elements>
            <core:row id="CustomerOrderPaymentBasketItemRow">
                <core:rowLine id="CustomerOrderPaymentBasketItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerOrderPaymentBasketItemLabel">
                            <core:elements>
<core:text messageId="ORDER_PAYMENT_ITEM" id="OrderPaymentItemLabelText"/>
<core:text id="CustomerOrderPaymentBasketItemLabelText">
    <core:text> #{!empty (item.customerOrderHeaderKey) ? item.customerOrderHeaderKey.customerOrderId : ''}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="CustomerOrderPaymentBasketItemValue">
                            <core:elements>
<core:text id="CustomerOrderPaymentBasketItemValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.netValue}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderCancellationBasketItem">
        <core:elements>
            <core:row visibility="#{item.cancellationQuantity != 0}" id="CustomerOrderCancellationBasketItemRow">
                <core:rowLine id="CustomerOrderCancellationBasketItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerOrderCancellationBasketItemProduct">
                            <core:elements>
<core:text messageId="ORDER_CANCELLATION_ITEM" id="OrderCancellationItemLabelText"/>
<core:text visibility="#{notEmpty(item.cancellationProductId)}" id="CancellationProductIdText">
    <core:text> #{item.cancellationProductId}</core:text>
</core:text>
<core:text id="ItemDescriptionText">
    <core:text> #{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="IndAmt" id="CustomerOrderCancellationBasketItemPrice">
                            <core:elements>
<core:text id="CustomerOrderCancellationBasketItemPriceText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{item.orderNetPrice}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerOrderCancellationHeaderBasketItem">
        <core:elements>
            <core:row id="CustomerOrderCancellationHeaderBasketItemRow">
                <core:rowLine id="CustomerOrderCancellationHeaderBasketItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerOrderCancellationHeaderBasketItemOrderId">
                            <core:elements>
<core:text messageId="ORDER_CANCELLATION_ORDER_ID" id="OrderCancellationOrderIdLabelText"/>
<core:text id="CustomerOrderIdText">
    <core:text> #{notEmpty(item.customerOrderHeaderKey) ? item.customerOrderHeaderKey.customerOrderId : ''}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionSaving">
        <core:elements>
            <core:row id="PromotionSavingRow">
                <core:rowLine id="PromotionSavingLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="PromotionSavingLineDescription">
                            <core:elements>
<core:text id="PromotionSavingLineDescriptionText">
    <core:text>#{item.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="PromotionSavingLineSaving">
                            <core:elements>
<core:text id="PromotionSavingLineSavingText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{-item.saving}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.receiptMessage)}" id="PromotionSavingMessageLine">
                    <core:elements>
                        <core:formatElement formatId="promotionReceiptMessage"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionPoints">
        <core:elements>
            <core:row id="PromotionPointsRow">
                <core:rowLine id="PromotionPointsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="PromotionPointsLineDescription">
                            <core:elements>
<core:text id="PromotionPointsLineDescriptionText">
    <core:text>#{item.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="PromotionPointsLinePoints">
                            <core:elements>
<core:text id="PromotionPointsLinePointsText">
    <core:formatters>
        <core:formatNumber/>
    </core:formatters>
    <core:text>#{item.points}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.receiptMessage)}" id="PromotionPointsMessageLine">
                    <core:elements>
                        <core:formatElement formatId="promotionReceiptMessage"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionFreeProduct">
        <core:elements>
            <core:row id="PromotionFreeProductRow">
                <core:rowLine id="PromotionFreeProductLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="PromotionFreeProductLineDescription">
                            <core:elements>
<core:text id="PromotionFreeProductLineDescriptionText">
    <core:text>#{item.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.receiptMessage)}" id="PromotionFreeProductMessageLine">
                    <core:elements>
                        <core:formatElement formatId="promotionReceiptMessage"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionNearMiss">
        <core:elements/>
    </core:formatEntry>
    <core:formatEntry id="promotionGeneral">
        <core:elements>
            <core:row id="PromotionGeneralRow">
                <core:rowLine id="PromotionGeneralLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="PromotionGeneralLineDescription">
                            <core:elements>
<core:text id="PromotionGeneralLineDescriptionText">
    <core:text>#{item.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.receiptMessage)}" id="PromotionGeneralMessageLine">
                    <core:elements>
                        <core:formatElement formatId="promotionReceiptMessage"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionReceiptMessage">
        <core:elements>
            <core:column maxLines="0" columnDefId="FullLeftWrapped" id="PromotionReceiptMessageText">
                <core:elements>
                    <core:text visibility="#{instanceOf (item, 'com.enactor.mfc.promotion.calculation.IPromotionTriggeredItem') &amp;&amp; notEmpty(item.receiptMessage)}" id="PromotionReceiptMessageTextText">
                        <core:text>#{item.receiptMessage}</core:text>
                    </core:text>
                </core:elements>
            </core:column>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemPriceOverrideConditional">
        <core:elements>
            <core:assign to="itemHasPriceOverride" type="boolean" value="false" id="ItemHasPriceOverrideAssign"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" id="Flags">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{(modifier.newPrice - modifier.originalPrice) &lt; 0 &amp;&amp; modifier.modifierItem.showOnPrintedReceipt &amp;&amp; !modifier.voided}" formatId="preItemModifiersFlagPriceOverride"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPriceOverrideModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="preItemModifiersFlagPriceOverride"/>
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideNoTransactionVoidItemModifier"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hideItemNotVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{(modifier.newPrice - modifier.originalPrice) &lt; 0 &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="preItemModifiersFlagPriceOverride"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPriceOverrideModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="preItemModifiersFlagPriceOverride"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
            <core:formatElement applicability="#{itemHasPriceOverride &amp;&amp; abs(item.quantity) == 1 &amp;&amp; (item.unitType == null || enumEquals(item.unitType, 'UNIT'))}" formatId="preItemModifiersItemUnitPrice"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" visibility="#{itemHasPriceOverride}" id="Modifiers">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{(modifier.newPrice - modifier.originalPrice) &lt; 0 &amp;&amp; modifier.modifierItem.showOnPrintedReceipt &amp;&amp; !modifier.voided}" formatId="priceOverrideModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPriceOverrideModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="returnPriceOverrideModifier"/>
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideBasketHasNoTransactionVoidItemMofifier"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hideItemModifierNotItemVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{(modifier.newPrice - modifier.originalPrice) &lt; 0 &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="priceOverrideModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPriceOverrideModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="returnPriceOverrideModifier"/>
                <core:formatElement id="hideOverridedItemModifier"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemModifiersFlagPriceOverride">
        <core:elements>
            <core:assign to="itemHasPriceOverride" type="boolean" value="true" id="ItemHasPriceOverrideAssign"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemModifiersItemUnitPrice">
        <core:elements>
            <core:line visible="false" id="PreItemModifiersLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="TLCol1" id="OriginalItemValueLabel">
                        <core:elements>
                            <core:text messageId="ITEM_ORIGINAL_UNIT_PRICE" id="OriginalItemValueLabelText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" columnDefId="3" id="ItemOriginalValue">
                        <core:elements>
                            <core:formatElement formatId="salesItemUnitPriceCurrency"/>
                            <core:formatElement formatId="salesItemUnitPrice"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemModifiersConditional">
        <core:elements>
            <core:assign to="itemHasDiscounts" type="boolean" value="false" id="ItemHasDiscountsAssign"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" id="Flags">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" applicability="#{!modifier.voided}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt &amp;&amp; !modifier.voided}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPricingMethodModifier')}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IDiscountModifier') &amp;&amp; enumEquals(modifier.returnValueModifier.discountType, 'ITEM') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideItemModifierBasketHasNoTransactionVoid"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hideItemNotVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPricingMethodModifier')}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IDiscountModifier') &amp;&amp; enumEquals(modifier.returnValueModifier.discountType, 'ITEM') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="preItemModifiersFlagDiscounts"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
            <core:formatElement applicability="#{itemHasDiscounts &amp;&amp; abs(item.quantity) == 1 &amp;&amp; (item.unitType == null || enumEquals(item.unitType, 'UNIT'))}" formatId="preItemModifiersItemValue"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" visibility="#{itemHasDiscounts}" id="Modifiers">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" applicability="#{!modifier.voided}" formatId="pricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt &amp;&amp; !modifier.voided}" formatId="discountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPricingMethodModifier')}" formatId="pricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IDiscountModifier') &amp;&amp; enumEquals(modifier.returnValueModifier.discountType, 'ITEM') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="discountModifier"/>
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideBasketHasNoTransactionVoidItemMofifier"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hideDiscountedItemNotVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" formatId="pricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="discountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPricingMethodModifier')}" formatId="returnPricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IDiscountModifier') &amp;&amp; enumEquals(modifier.returnValueModifier.discountType, 'ITEM') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="returnDiscountModifier"/>
                <core:formatElement id="hideDiscountedItemModifier"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemModifiersFlagDiscounts">
        <core:elements>
            <core:assign to="itemHasDiscounts" type="boolean" value="true" id="ItemHasDiscountsAssign"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemModifiersItemValue">
        <core:elements>
            <core:line id="PreItemModifiersLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="TLCol1" id="OriginalItemValueLabel">
                        <core:elements>
                            <core:text messageId="ITEM_ORIGINAL_VALUE" id="OriginalItemValueLabelText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" columnDefId="3" id="ItemOriginalValue">
                        <core:elements>
                            <core:formatElement formatId="salesItemOriginalValueCurrency"/>
                            <core:formatElement formatId="salesItemOriginalValue"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemPromotionsConditional">
        <core:elements>
            <core:assign to="itemHasPromotions" type="boolean" value="false" id="ItemHasPromotionsAssign"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" id="Flags">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{!modifier.voided &amp;&amp; modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="preItemModifiersFlagPromotions"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPromotionModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="preItemModifiersFlagPromotions"/>
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideBasketHasNoTransactionVoidItemMofifier"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hideItemNotVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="preItemModifiersFlagPromotions"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPromotionModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="preItemModifiersFlagPromotions"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
            <core:formatElement applicability="#{itemHasPromotions &amp;&amp; abs(item.quantity) == 1 &amp;&amp; (item.unitType == null || enumEquals(item.unitType, 'UNIT'))}" formatId="preItemPromotionsItemValue"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" visibility="#{itemHasPromotions}" id="Modifiers">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{!modifier.voided &amp;&amp; modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="promotionModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{!modifier.voided &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPromotionModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="returnPromotionModifier"/>
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideBasketHasNoTransactionVoidPromotionItemMofifier"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hidePromotionItemNotVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="promotionModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPromotionModifier') &amp;&amp; modifier.showOnPrintedReceipt}" formatId="returnPromotionModifier"/>
                <core:formatElement id="hidePromotionItemModifier"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemModifiersFlagPromotions">
        <core:elements>
            <core:assign to="itemHasPromotions" type="boolean" value="true" id="ItemHasPromotionsAssign"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="preItemPromotionsItemValue">
        <core:elements>
            <core:line id="PreItemModifiersLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="TLCol1" id="OriginalItemValueLabel">
                        <core:elements>
                            <core:text messageId="ITEM_CURRENT_VALUE" id="OriginalItemValueLabelText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" columnDefId="3" id="ItemOriginalValue">
                        <core:elements>
                            <core:formatElement formatId="salesItemIntermediateValueCurrency"/>
                            <core:formatElement formatId="salesItemIntermediateValue"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemModifiers">
        <core:elements>
            <core:formatElement formatId="preItemPriceOverrideConditional" visible="false"/>
            <core:formatElement formatId="preItemModifiersConditional" visible="false"/>
            <core:formatElement formatId="preItemPromotionsConditional" visible="false"/>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" id="Modifiers">
                <core:formatElement applicability="#{modifier.voided}" id="hideVoidedItemModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" formatId="pricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeDiscountModifier" formatId="employeeDiscountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="discountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="promotionModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{modifier.modifierItem.showOnPrintedReceipt}" formatId="priceOverrideModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductWastageModifier" formatId="productWastageModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeSaleTransactionDiscountItem" id="hideEmployeeSaleTransactionDiscountItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{modifier.showOnPrintedReceipt}" formatId="receiptReturnValueModifier"/>
                <core:formatElement applicability="#{instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IBasketOptionValuesItem') &amp;&amp; !item.isReturn}" formatId="basketOptionValuesItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductPreparationOption" formatId="productPreparationOption"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductOptionModifier" formatId="productOption"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IAlterationModifier" formatId="alterationModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ICollectModifier" id="hideCollectModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ITaxGroupOverrideModifier" formatId="taxGroupOverrideModifier"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" id="VoidedModifiers">
                <core:formatElement applicability="#{!basketHasTransactionVoid}" id="hideBasketHasNoTransactionVoidItemMofifier"/>
                <core:formatElement applicability="#{!modifier.voided}" id="hideNotVoidedModifier"/>
                <core:formatElement applicability="#{!mfcBasket:isItemVoidedByTransactionVoid(transactionVoid, modifier.modifierItem)}" id="hideItemNotVoidedByTransactionVoid"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" formatId="pricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeDiscountModifier" formatId="employeeDiscountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="discountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="promotionModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{modifier.modifierItem.showOnPrintedReceipt}" formatId="priceOverrideModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductWastageModifier" formatId="productWastageModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeSaleTransactionDiscountItem" id="hideEmployeeSaleTransactionDiscountItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{modifier.showOnPrintedReceipt}" formatId="receiptReturnValueModifier"/>
                <core:formatElement applicability="#{instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IBasketOptionValuesItem') &amp;&amp; !item.isReturn}" formatId="basketOptionValuesItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductPreparationOption" formatId="productPreparationOption"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductOptionModifier" formatId="productOption"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IAlterationModifier" formatId="alterationModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ICollectModifier" id="hideCollectModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ITaxGroupOverrideModifier" formatId="taxGroupOverrideModifier"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemModifiersitemModifiers">
        <core:elements>
            <core:tableTemplate listVariableName="modifier" list="#{modifier.modifierItem.modifiers}" id="Modifiers">
                <core:formatElement applicability="#{modifier.voided}" id="hideVoidedItemModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPricingMethodModifier" formatId="pricingMethodModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeDiscountModifier" formatId="employeeDiscountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" applicability="#{enumEquals(modifier.discountType, 'ITEM') &amp;&amp; modifier.modifierItem.showOnPrintedReceipt}" formatId="discountModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionModifier" applicability="#{modifier.promotionItem.promotionBasketDetails.showOnPrintedReceipt}" formatId="promotionModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPriceOverrideModifier" applicability="#{modifier.modifierItem.showOnPrintedReceipt}" formatId="priceOverrideModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductWastageModifier" formatId="productWastageModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeSaleTransactionDiscountItem" id="hideEmployeeSaleTransactionDiscountItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IReceiptReturnValueModifier" applicability="#{modifier.showOnPrintedReceipt}" formatId="receiptReturnValueModifier"/>
                <core:formatElement applicability="#{instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IBasketOptionValuesItem') &amp;&amp; !item.isReturn}" formatId="basketOptionValuesItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductPreparationOption" formatId="productPreparationOption"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IProductOptionModifier" formatId="productOption"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IAlterationModifier" formatId="alterationModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ICollectModifier" id="hideCollectModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ITaxGroupOverrideModifier" formatId="taxGroupOverrideModifier"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="pricingMethodModifier">
        <core:elements>
            <core:row id="PricingMethodModifierRow">
                <core:rowLine id="PricingMethodModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visible="false" style="ITALIC" id="PricingMethodModifierLabel">
                            <core:elements>
<core:formatElement formatId="pricingMethodPackPricingLabel" visibility="#{modifier.pricingMethod == 'P'}"/>
<core:formatElement formatId="pricingMethodQuantityThresholdLabel" visibility="#{modifier.pricingMethod == 'QT'}"/>
<core:formatElement formatId="pricingMethodQuantityAllLabel" visibility="#{modifier.pricingMethod == 'QA'}"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visibility="#{modifier.pricingMethod == 'P'}" style="ITALIC" id="PricingMethodModifierPackPricingLabel">
                            <core:elements>
<core:text messageId="PACK_PRICING" id="PricingMethodModifierPackPricingLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visibility="#{modifier.pricingMethod == 'QT'}" style="ITALIC" id="PricingMethodModifierQuntityBreakThresholdLabel">
                            <core:elements>
<core:text messageId="QUANTITY_BREAK_THRESHOLD" id="PricingMethodModifierQuntityBreakThresholdLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visibility="#{modifier.pricingMethod == 'QA'}" style="ITALIC" id="PricingMethodModifierQuantityBreakAllLabel">
                            <core:elements>
<core:text messageId="QUANTITY_BREAK_ALL" id="PricingMethodModifierQuantityBreakAllLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="PricingMethodModifierValue">
                            <core:elements>
<core:text id="PricingMethodModifierValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.value}</core:text>
</core:text>
<core:formatElement formatId="pricingMethodModifierValueCurrency" visible="false"/>
<core:formatElement formatId="pricingMethodModifierValue" visible="false"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnPricingMethodModifier">
        <core:elements>
            <core:row id="PricingMethodModifierRow">
                <core:rowLine id="PricingMethodModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visible="false" style="ITALIC" id="PricingMethodModifierLabel">
                            <core:elements>
<core:formatElement formatId="pricingMethodPackPricingLabel" visibility="#{modifier.pricingMethod == 'P'}"/>
<core:formatElement formatId="pricingMethodQuantityThresholdLabel" visibility="#{modifier.pricingMethod == 'QT'}"/>
<core:formatElement formatId="pricingMethodQuantityAllLabel" visibility="#{modifier.pricingMethod == 'QA'}"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="PricingMethodModifierValue">
                            <core:elements>
<core:formatElement formatId="returnPricingMethodModifierValueCurrency"/>
<core:formatElement formatId="returnPricingMethodModifierValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="employeeDiscountModifier">
        <core:elements>
            <core:row style="ITALIC;ITALIC" id="EmployeeDiscountModifierRow">
                <core:rowLine id="EmployeeDiscountModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{!empty modifier.modifierItem}" id="EmployeeDiscountModifierLineItem">
                            <core:elements>
<core:text id="ReasonDescriptionText">
    <core:text>#{mfcBasket:resolveReasonDescription(modifier.modifierItem, formatter)}</core:text>
</core:text>
<core:text id="StartingBracketText">
    <core:text> (</core:text>
</core:text>
<core:text id="OriginalItemValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.originalItemValue}</core:text>
</core:text>
<core:text messageId="VALUE_AT_PERCENTAGE" id="ValueAtPercentageLabelText"/>
<core:text id="DisplayPercentageText">
    <core:formatters>
        <core:formatPercentage/>
    </core:formatters>
    <core:text>#{modifier.displayPercentage}</core:text>
</core:text>
<core:text id="EndingBracketText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="EmployeeDiscountModifierLineValue">
                            <core:elements>
<core:text id="EmployeeDiscountModifierLineValueText">
    <core:formatters>
        <core:formatCurrencyAmount negate="true" absValue="true"/>
    </core:formatters>
    <core:text>#{modifier.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="discountModifier">
        <core:elements>
            <core:formatElement applicability="#{enumEquals(modifier.modifierItem.type, 'PERCENTAGE')}" formatId="discountPercentageModifier" visible="false"/>
            <core:formatElement applicability="#{enumEquals(modifier.modifierItem.type, 'VALUE')}" formatId="discountValueModifier" visible="false"/>
            <core:formatElement formatId="discountModifierReviewLine"/>
            <core:formatElement formatId="discountModifierLine" visible="false"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnDiscountModifier">
        <core:elements>
            <core:formatElement formatId="returnDiscountValueModifier"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="discountPercentageModifier">
        <core:elements>
            <core:line visible="false" id="DiscountModifierValueLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="6" id="DiscountModifierItem">
                        <core:elements>
                            <core:text messageId="DISCOUNT_ITEM"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" align="RIGHT" columnDefId="3" id="DiscountModifierItemValue">
                        <core:elements>
                            <core:formatElement formatId="discountModifierValueCurrency"/>
                            <core:formatElement formatId="discountModifierValue"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
            <core:line id="DiscountModifierLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="6" id="DiscountModifierItem">
                        <core:elements>
                            <core:formatElement formatId="discountModifierReason"/>
                            <core:formatElement formatId="textSeparator"/>
                            <core:formatElement formatId="discountModifierPercentage"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="discountValueModifier">
        <core:elements>
            <core:line id="DiscountModifierValueLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="6" id="DiscountModifierItem">
                        <core:elements>
                            <core:text messageId="DISCOUNT_ITEM" id="DiscountModifierItemText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" align="RIGHT" columnDefId="3" id="DiscountModifierItemValue">
                        <core:elements>
                            <core:formatElement formatId="discountModifierValueCurrency"/>
                            <core:formatElement formatId="discountModifierValue"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
            <core:line id="DiscountModifierLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="6" id="DiscountModifierItemReason">
                        <core:elements>
                            <core:formatElement formatId="discountModifierReasonLabel"/>
                            <core:formatElement formatId="textSeparator"/>
                            <core:formatElement formatId="discountModifierReason"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnDiscountValueModifier">
        <core:elements>
            <core:line id="DiscountModifierValueLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="6" id="DiscountModifierItem">
                        <core:elements>
                            <core:text messageId="DISCOUNT_ITEM" id="DiscountModifierItemText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" align="RIGHT" columnDefId="3" id="DiscountModifierItemValue">
                        <core:elements>
                            <core:formatElement formatId="returnDiscountModifierValueCurrency"/>
                            <core:formatElement formatId="returnDiscountModifierValue"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
            <core:line id="DiscountModifierLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="6" id="DiscountModifierItemReason">
                        <core:elements>
                            <core:formatElement formatId="discountModifierReasonLabel"/>
                            <core:formatElement formatId="textSeparator"/>
                            <core:formatElement formatId="returnDiscountModifierReason"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="discountModifierReviewLine">
        <core:elements>
            <core:row style="ITALIC;ITALIC" id="DiscountModifierRow">
                <core:rowLine id="DiscountModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{!empty modifier.modifierItem}" id="DiscountModifierItem">
                            <core:elements>
<core:text id="ReasonDescriptionText">
    <core:text>#{empty(mfcBasket:resolveReasonDescription(modifier.modifierItem, formatter)) ? mfcBasket:resolveItemDescription(modifier.modifierItem, formatter) : mfcBasket:resolveReasonDescription(modifier.modifierItem, formatter)}</core:text>
</core:text>
<core:text visibility="#{enumEquals(modifier.modifierItem.type, 'PERCENTAGE')}" id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text visibility="#{enumEquals(modifier.modifierItem.type, 'PERCENTAGE')}" id="ModifierItemPercentageText">
    <core:formatters>
        <core:formatPercentage/>
    </core:formatters>
    <core:text>#{modifier.modifierItem.percentage}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="3" id="DiscountModifierItemValue">
                            <core:elements>
<core:text id="StartingBracketText">
    <core:text> (</core:text>
</core:text>
<core:text id="DiscountModifierItemValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.modifierItem.value}</core:text>
</core:text>
<core:text id="EndingBracketText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="discountModifierLine">
        <core:elements>
            <core:row id="DiscountModifierRow">
                <core:rowLine id="DiscountModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{!empty modifier.modifierItem}" style="ITALIC;ITALIC" id="DiscountModifierItem">
                            <core:elements>
<core:text id="ReasonDescriptionText">
    <core:text>#{empty(mfcBasket:resolveReasonDescription(modifier.modifierItem, formatter)) ? mfcBasket:resolveItemDescription(modifier.modifierItem, formatter) : mfcBasket:resolveReasonDescription(modifier.modifierItem, formatter)}</core:text>
</core:text>
<core:text visibility="#{enumEquals(modifier.modifierItem.type, 'PERCENTAGE')}" id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text visibility="#{enumEquals(modifier.modifierItem.type, 'PERCENTAGE')}" id="ModifierItemPercentageText">
    <core:formatters>
        <core:formatPercentage/>
    </core:formatters>
    <core:text>#{modifier.modifierItem.percentage}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="3" id="DiscountModifierItemValue">
                            <core:elements>
<core:text id="DiscountModifierItemValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.modifierItem.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionModifier">
        <core:elements>
            <core:tableTemplate listVariableName="trigger" list="#{modifier.finalTriggers}" id="PromotionTriggers">
                <core:formatElement applicability="#{instanceOf(modifier.promotionItem, 'com.enactor.mfc.promotion.calculation.IPromotionFeeItem')}" formatId="promotionFeeItemTrigger"/>
                <core:formatElement applicableClassName="com.enactor.mfc.promotion.calculation.IPromotionSavingItemTrigger" formatId="promotionSavingItemTrigger"/>
                <core:formatElement applicableClassName="com.enactor.mfc.promotion.calculation.IPromotionPointsItemTrigger" formatId="promotionPointsItemTrigger"/>
            </core:tableTemplate>
            <core:formatElement applicability="#{instanceOf(modifier, 'com.enactor.mfc.promotion.calculation.IDistributedPromotionPointsItem')}" formatId="distributedPromotionPoints" visible="false"/>
            <core:formatElement applicability="#{instanceOf(modifier, 'com.enactor.mfc.promotion.calculation.IDistributedPromotionSavingItem')}" formatId="distributedPromotionSaving" visible="false"/>
            <core:formatElement applicability="#{instanceOf(modifier, 'com.enactor.mfc.promotion.calculation.IDistributedPromotionSavingItem')}" formatId="distributedPromotionSavingAmount" visible="false"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnPromotionModifier">
        <core:elements>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.promotion.calculation.IDistributedPromotionPointsItem')}" formatId="returnDistributedPromotionPoints" visible="true"/>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.promotion.calculation.IDistributedPromotionSavingItem')}" formatId="returnDistributedPromotionSaving" visible="true"/>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.promotion.calculation.IDistributedPromotionSavingItem')}" formatId="returnDistributedPromotionSavingAmount" visible="false"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="priceOverrideModifier">
        <core:elements>
            <core:line visible="false" id="PreItemModifiersLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="TLCol1" id="OriginalItemValueLabel">
                        <core:elements>
                            <core:text messageId="ITEM_ORIGINAL_UNIT_PRICE" id="OriginalItemValueLabelText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" columnDefId="3" id="ItemOriginalValue">
                        <core:elements>
                            <core:formatElement formatId="priceOverrideOriginalPriceCurrency"/>
                            <core:formatElement formatId="priceOverrideOriginalPrice"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
            <core:row style="ITALIC;ITALIC" id="PriceOverrideModifierRow">
                <core:rowLine visibility="#{!empty modifier.modifierItem}" id="PriceOverrideModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PriceOverrideModifierItem">
                            <core:elements>
<core:text messageId="PRICE_OVERRIDE_ITEM_DESCRIPTION_SHORT" id="PriceOverrideItemDescriptionShortLabelText"/>
<core:text id="StartingBracketsText">
    <core:text> (</core:text>
</core:text>
<core:text id="ModifierOriginalPriceText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.originalPrice}</core:text>
</core:text>
<core:text id="ToLabelText">
    <core:text> to </core:text>
</core:text>
<core:text id="ModifierNewPriceText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.newPrice}</core:text>
</core:text>
<core:text id="EndingBracketsText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="TLCol1" visible="false" id="PriceOverrideModifierLabel">
                            <core:elements>
<core:text messageId="PRICE_OVERRIDE_ITEM_DESCRIPTION_SHORT" id="PriceOverrideModifierLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PriceOverrideModifierNewPrice">
                            <core:elements>
<core:formatElement formatId="priceOverrideNewPriceCurrency"/>
<core:formatElement formatId="priceOverrideNewPrice"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PriceOverrideModifierPriceDifference">
                            <core:elements>
<core:formatElement formatId="priceOverridePriceDifferenceCurrency"/>
<core:formatElement formatId="priceOverridePriceDifference"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:line visible="false" id="PriceOverrideModifierLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="7" id="PriceOverrideReason">
                        <core:elements>
                            <core:formatElement formatId="priceOverrideReasonLabel"/>
                            <core:formatElement formatId="textSeparator"/>
                            <core:formatElement formatId="priceOverrideReason"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnPriceOverrideModifier">
        <core:elements>
            <core:line visible="false" id="PreItemModifiersLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="TLCol1" id="OriginalItemValueLabel">
                        <core:elements>
                            <core:text messageId="ITEM_ORIGINAL_UNIT_PRICE" id="OriginalItemValueLabelText"/>
                        </core:elements>
                    </core:column>
                    <core:column maxLines="0" columnDefId="3" id="ItemOriginalValue">
                        <core:elements>
                            <core:formatElement formatId="returnPriceOverrideOriginalPriceCurrency"/>
                            <core:formatElement formatId="returnPriceOverrideOriginalPrice"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
            <core:row style="ITALIC;ITALIC" id="PriceOverrideModifierRow">
                <core:rowLine visibility="#{!empty modifier.returnValueModifier.modifierItem}" id="PriceOverrideModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PriceOverrideModifierItem">
                            <core:elements>
<core:text messageId="PRICE_OVERRIDE_ITEM_DESCRIPTION_SHORT" id="PriceOverrideItemDescriptionShortLabelText"/>
<core:text id="StartingBracketText">
    <core:text> (</core:text>
</core:text>
<core:text id="ReturnValueModifierOriginalPriceText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.returnValueModifier.originalPrice}</core:text>
</core:text>
<core:text id="ToLabelText">
    <core:text> to </core:text>
</core:text>
<core:text id="ReturnValueModifierNewPriceTextText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.returnValueModifier.newPrice}</core:text>
</core:text>
<core:text id="EndingBracketText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="TLCol1" visible="false" id="PriceOverrideModifierLabel">
                            <core:elements>
<core:text messageId="PRICE_OVERRIDE_ITEM_DESCRIPTION_SHORT" id="PriceOverrideModifierLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PriceOverrideModifierNewPrice">
                            <core:elements>
<core:formatElement formatId="returnPriceOverrideNewPriceCurrency"/>
<core:formatElement formatId="returnPriceOverrideNewPrice"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PriceOverrideModifierPriceDifference">
                            <core:elements>
<core:formatElement formatId="returnPriceOverridePriceDifferenceCurrency"/>
<core:formatElement formatId="returnPriceOverridePriceDifference"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty (modifier.oriModifierItemReasonDescr)}" id="ReturnPriceOverrideModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="ReturnPriceOverrideModifierItem">
                            <core:elements>
<core:text id="ReturnPriceOverrideModifierItemText">
    <core:text>#{modifier.oriModifierItemReasonDescr}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="TLCol1" visible="false" id="ReturnPriceOverrideModifierLabel">
                            <core:elements>
<core:text messageId="PRICE_OVERRIDE_ITEM_DESCRIPTION_SHORT" id="ReturnPriceOverrideModifierLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="ReturnPriceOverrideModifierNewPrice">
                            <core:elements>
<core:formatElement formatId="returnPriceOverrideNewPriceCurrency"/>
<core:formatElement formatId="returnPriceOverrideNewPrice"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="ReturnPriceOverrideModifierPriceDifference">
                            <core:elements>
<core:formatElement formatId="returnPriceOverridePriceDifferenceCurrency"/>
<core:formatElement formatId="returnPriceOverridePriceDifference"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:line visible="false" id="PriceOverrideModifierLine">
                <core:elements>
                    <core:column maxLines="0" columnDefId="7" id="PriceOverrideReason">
                        <core:elements>
                            <core:formatElement formatId="priceOverrideReasonLabel"/>
                            <core:formatElement formatId="textSeparator"/>
                            <core:formatElement formatId="returnPriceOverrideReason"/>
                        </core:elements>
                    </core:column>
                </core:elements>
            </core:line>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="productWastageModifier">
        <core:elements>
            <core:row id="ProductWastageModifierRow">
                <core:rowLine id="ProductWastageModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="ProductWastageModifierDescription">
                            <core:elements>
<core:text id="ProductWastageModifierDescriptionText">
    <core:text>#{mfcBasket:resolveLocalisedDescription(modifier.localisedWastageItemReasonDescription, modifier.wastageItemReasonDescription, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="receiptReturnValueModifier">
        <core:elements>
            <core:row visibility="#{!instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IBasketOptionValuesItem') &amp;&amp; !instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IMerchandiseProductOptionItem')}" style="ITALIC" id="ReceiptReturnValueModifierRow">
                <core:rowLine id="ReceiptReturnValueModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="ReceiptReturnValueModifierReason">
                            <core:elements>
<core:text visibility="#{!empty (modifier.oriModifierItemReasonDescr)}" id="OriginalModifierItemReasonDescriptionText">
    <core:text>#{modifier.oriModifierItemReasonDescr}</core:text>
</core:text>
<core:text messageId="MODIFIER_PRICING_METHOD" visibility="#{empty (modifier.oriModifierItemReasonDescr) &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPricingMethodModifier')}" id="ModifierPricingMethodLabelText"/>
<core:text messageId="MODIFIER_EMPLOYEE_DISCOUNT" visibility="#{empty (modifier.oriModifierItemReasonDescr) &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IEmployeeDiscountModifier')}" id="ModifierEmployeeDiscountLabelText"/>
<core:text messageId="MODIFIER_DISCOUNT" visibility="#{empty (modifier.oriModifierItemReasonDescr) &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IDiscountModifier') &amp;&amp; !instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IEmployeeDiscountModifier')}" id="ModifierDiscountLabelText"/>
<core:text messageId="MODIFIER_PRICE_OVERRIDE" visibility="#{empty (modifier.oriModifierItemReasonDescr) &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPriceOverrideModifier')}" id="ModifierPriceOverrideLabelText"/>
<core:text messageId="MODIFIER_PROMOTION" visibility="#{empty (modifier.oriModifierItemReasonDescr) &amp;&amp; instanceOf(modifier.returnValueModifier, 'com.enactor.mfc.basket.items.IPromotionModifier')}" id="ModifierPromotionLabelText"/>
<core:text id="StartingBracketText">
    <core:text> (</core:text>
</core:text>
<core:text id="ModifierValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.value}</core:text>
</core:text>
<core:text id="EndingBracketText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IPricingMethodModifier')}" formatId="returnPricingMethodModifier" visible="false"/>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IDiscountModifier')}" formatId="returnDiscountModifier" visible="false"/>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IPriceOverrideModifier')}" formatId="returnPriceOverrideModifier" visible="false"/>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IPromotionModifier')}" formatId="returnPromotionModifier" visible="false"/>
            <core:formatElement applicability="#{instanceOf(modifier.returnValueModifier.modifierItem, 'com.enactor.mfc.basket.items.IBasketOptionValuesItem')}" formatId="basketOptionValuesItemFromReceiptReturnValueModifier"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="productPreparationOption">
        <core:elements>
            <core:row style="ITALIC" id="ProductPreparationOptionRow">
                <core:rowLine id="ProductPreparationOptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="ProductPreparationOptionItem">
                            <core:elements>
<core:text id="ItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(modifier.modifierItem, formatter)}</core:text>
</core:text>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="ChoiceDescriptionText">
    <core:text>#{modifier.modifierItem.choiceDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="productOption">
        <core:elements>
            <core:row style="ITALIC" id="ProductOptionRow">
                <core:rowLine id="ProductOptionLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IProductValueOptionItem')}" id="ProductOptionDescription">
                            <core:elements>
<core:text id="ProductOptionDescriptionText">
    <core:text>#{concat(mfcBasket:resolveItemDescription(modifier.modifierItem, formatter), notEmpty(modifier.modifierItem.optionValue) ? concat(' : ', modifier.modifierItem.optionValue) : '')}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visibility="#{!instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IProductValueOptionItem')}" id="ProductOptionValue">
                            <core:elements>
<core:text id="ProductOptionValueText">
    <core:text>#{mfcBasket:resolveItemDescription(modifier.modifierItem, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visibility="#{!empty(modifier.modifierItem.value) &amp;&amp; modifier.modifierItem.value != 0                           &amp;&amp; (instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IMerchandiseProductOptionItem')                           || instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IProductOptionItem'))}" id="ProductOptionItem">
                            <core:elements>
<core:text id="ProductOptionItemText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.modifierItem.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!empty(modifier.modifierItem.referenceNumber) &amp;&amp; instanceOf(modifier.modifierItem, 'com.enactor.mfc.basket.items.IMerchandiseProductOptionItem')}" id="ProductOptionReferenceNumberLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="modifierReferenceNumber" id="ProductOptionReferenceNumber">
                            <core:elements>
<core:text messageId="REFERENCE" id="ReferenceLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="ProductOptionReferenceNumberText">
    <core:text>#{modifier.modifierItem.referenceNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement formatId="itemModifiersitemModifiers"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="basketOptionValuesItemFromReceiptReturnValueModifier">
        <core:elements>
            <core:tableTemplate listVariableName="option" list="#{modifier.returnValueModifier.modifierItem.basketOptionValue}" id="BasketOptionValues">
                <core:formatElement applicability="#{isEmpty(option.optionLineNumber)}" formatId="BasketOptionValue"/>
                <core:formatElement id="hideBasketOptionValueItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="basketOptionValuesItem">
        <core:elements>
            <core:tableTemplate listVariableName="option" list="#{modifier.modifierItem.basketOptionValue}" id="BasketOptionValues">
                <core:formatElement applicability="#{isEmpty(option.optionLineNumber)}" formatId="BasketOptionValue"/>
                <core:formatElement id="hideBasketOptionValueItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="alterationModifier">
        <core:elements>
            <core:tableTemplate listVariableName="item" list="#{modifier.modifierItem.childItems}" id="AlterationServiceItems">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IAlterationServiceItem" formatId="alterationServiceItem"/>
                <core:formatElement id="hideChildItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectModifier">
        <core:elements>
            <core:row visibility="#{!modifier.voided}" id="CollectModifierRow">
                <core:rowLine id="CollectModifierLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{!empty modifier.modifierItem}" id="CollectModifierItem">
                            <core:elements>
<core:text messageId="COLLECT_FROM" id="CollectFromLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="CollectionPointDescriptionText">
    <core:text>#{modifier.modifierItem.collectionPointDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionSavingItemTrigger">
        <core:elements>
            <core:row id="PromotionSavingItemTriggerRow">
                <core:rowLine id="PromotionSavingItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{trigger.quantity == 1}" id="PromotionSavingItemTriggerOneItem">
                            <core:elements>
<core:text id="PromotionSavingItemTriggerOneItemText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visibility="#{trigger.quantity != 1}" id="PromotionSavingItemTriggerItem">
                            <core:elements>
<core:text id="PromotionDescriptionText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="distributedPromotionSaving">
        <core:elements>
            <core:row id="PromotionSavingItemTriggerRow">
                <core:rowLine id="PromotionSavingItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PromotionSavingItemTriggerItem">
                            <core:elements>
<core:text id="PromotionDescriptionText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PromotionSavingDistributedSaving">
                            <core:elements>
<core:text id="PromotionSavingDistributedSavingText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{-modifier.distributedSaving}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnDistributedPromotionSaving">
        <core:elements>
            <core:row id="PromotionSavingItemTriggerRow">
                <core:rowLine id="PromotionSavingItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PromotionSavingItemTriggerItem">
                            <core:elements>
<core:text id="PromotionSavingItemTriggerItemText">
    <core:text>#{modifier.oriModifierItemReasonDescr}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PromotionSavingDistributedSaving">
                            <core:elements>
<core:text id="PromotionSavingDistributedSavingText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{-modifier.returnValueModifier.distributedSaving}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="distributedPromotionSavingAmount">
        <core:elements>
            <core:row id="PromotionSavingItemTriggerRow">
                <core:rowLine id="PromotionSavingItemTriggerValueLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="TLCol1" id="PromotionSavingItemTriggerItem">
                            <core:elements>
<core:formatElement formatId="promotionModifierCategoryLabel" visible="false"/>
<core:text messageId="PROMOTION_ITEM" id="PromotionItemLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="PromotionSavingDistributedSaving">
                            <core:elements>
<core:formatElement formatId="distributedPromotionSavingCurrency"/>
<core:formatElement formatId="distributedPromotionSavingValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(modifier.promotionItem.receiptMessage)}" id="PromotionSavingItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="7" id="PromotionSavingItemReason">
                            <core:elements>
<core:formatElement formatId="promotionModifierReceiptMessage"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnDistributedPromotionSavingAmount">
        <core:elements>
            <core:row id="PromotionSavingItemTriggerRow">
                <core:rowLine id="PromotionSavingItemTriggerValueLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="TLCol1" id="PromotionSavingItemTriggerItem">
                            <core:elements>
<core:text messageId="PROMOTION_ITEM" id="PromotionItemLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="PromotionSavingDistributedSaving">
                            <core:elements>
<core:formatElement formatId="returnDistributedPromotionSavingCurrency"/>
<core:formatElement formatId="returnDistributedPromotionSavingValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionSavingItemAndValueTrigger">
        <core:elements>
            <core:row id="promotionSavingItemAndValueTriggerRow">
                <core:rowLine id="promotionSavingItemAndValueTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" visibility="#{trigger.quantity == 1}" id="promotionSavingItemAndValueTriggerOneItem">
                            <core:elements>
<core:text id="PromotionSavingItemAndValueTriggerOneItemText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="2" visibility="#{trigger.quantity != 1}" id="promotionSavingItemAndValueTriggerItem">
                            <core:elements>
<core:text id="PromotionSavingItemAndValueTriggerItemText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="RIGHT" columnDefId="TLCol2" id="promotionSavingItemAndValueTriggerAmount">
                            <core:elements>
<core:text id="StartingBracketText">
    <core:text>(</core:text>
</core:text>
<core:text id="PromotionSavingItemAndValueTriggerAmountText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.promotionItem.saving}</core:text>
</core:text>
<core:text id="EndingBracketText">
    <core:text>)</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionPointsItemTrigger">
        <core:elements>
            <core:row id="PromotionPointsItemTriggerRow">
                <core:rowLine id="PromotionPointsItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" visibility="#{trigger.quantity == 1}" id="PromotionPointsItemTriggerOneItem">
                            <core:elements>
<core:text id="PromotionDescriptionText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="6" visibility="#{trigger.quantity != 1}" id="PromotionPointsItemTriggerItem">
                            <core:elements>
<core:text id="PromotionDescriptionText">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="distributedPromotionPoints">
        <core:elements>
            <core:row id="PromotionPointsItemTriggerRow">
                <core:rowLine id="PromotionPointsItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PromotionPointsItemTriggerItem">
                            <core:elements>
<core:text id="PromotionDescription">
    <core:text>#{modifier.promotionItem.promotionDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PromotionSavingDistributedPoints">
                            <core:elements>
<core:text id="PromotionSavingDistributedPointsText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.distributedPoints}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="returnDistributedPromotionPoints">
        <core:elements>
            <core:row id="PromotionPointsItemTriggerRow">
                <core:rowLine id="PromotionPointsItemTriggerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PromotionPointsItemTriggerItem">
                            <core:elements>
<core:text id="PromotionPointsItemTriggerItemText">
    <core:text>#{modifier.oriModifierItemReasonDescr}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" visible="false" id="PromotionSavingDistributedPoints">
                            <core:elements>
<core:text id="PromotionSavingDistributedPointsText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{modifier.distributedPoints}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="promotionFeeItemTrigger">
        <core:elements>
            <core:row id="PromotionFeeItemTriggerRow">
                <core:rowLine id="PromotionFeeItemTriggerLabelLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="7" id="PromotionFeeItemTriggerLabel">
                            <core:elements>
<core:text messageId="FEE_ITEM_PROMOTION_MODIFIER_DETAIL" id="FeeItemPromotionalModifierDetailLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="PromotionFeeItemTriggerItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="PromotionFeeItemTriggerItem">
                            <core:elements>
<core:text id="PromotionDescriptionText">
    <core:text>#{modifier.promotionItem.promotionDescription} </core:text>
</core:text>
<core:text id="RewardValueText">
    <core:formatters>
        <core:formatCurrencyAmount/>
    </core:formatters>
    <core:text>#{-trigger.rewardValue}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="receiptMessage">
        <core:elements>
            <core:row id="ReceiptMessageRow">
                <core:rowLine id="ReceiptMessageLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="ReceiptMessageText">
                            <core:elements>
<core:text id="ReceiptMessageTextText">
    <core:text>#{item.receiptControl == null ? null : item.receiptControl.receiptMessage}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptHeader">
        <core:elements>
            <core:formatElement formatId="collectionReceiptHeaderDetailsList"/>
            <core:formatElement applicability="#{hasCollectionDetails}" formatId="collectionHeaderCustomer"/>
            <core:formatElement applicability="#{hasCollectionDetails}" formatId="separator"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptHeaderDetailsList">
        <core:elements>
            <core:tableTemplate listVariableName="collectDetailsItem" list="#{basket.nonTenderItemIterator}" id="collectionDetailsItems">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ICollectDetailsItem" applicability="#{!collectDetailsItem.voided}" formatId="collectionReceiptHeaderDetails"/>
                <core:formatElement id="hideCollectionDetailsItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptHeaderDetails">
        <core:elements>
            <core:row id="CollectionReceiptHeaderDetailsRow">
                <core:rowLine id="CollectionReceiptHeaderDetailsLine">
                    <core:elements>
                        <core:formatElement formatId="collectionHeaderDetails"/>
                        <core:assign to="hasCollectionDetails" type="java.lang.Boolean" value="#{true}" id="CollectionReceiptHeaderDetails"/>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{multipleCollections}" id="CollectionReceiptHeaderDetailsMultipleCollectionsLine">
                    <core:elements>
                        <core:formatElement applicability="#{multipleCollections}" formatId="basketCollectItemsList" id="CollectionReceiptHeaderDetailsMultipleCollections"/>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionHeaderDetails">
        <core:elements>
            <core:row id="CollectionHeaderDetailsRow">
                <core:rowLine id="CollectionHeaderDetailsCollectionDetailsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="CollectionHeaderDetailsCollectionDetailsLabel">
                            <core:elements>
<core:text messageId="COLLECTION_DETAILS" style="BOLD" id="CollectionDetailsLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionHeaderDetailsCollectionPointLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionHeaderDetailsCollectionPointLabel">
                            <core:elements>
<core:text messageId="COLLECTION_POINT" id="CollectionPointLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" wrap="true" columnDefId="RightColumn" id="CollectionHeaderDetailsCollectionPoint">
                            <core:elements>
<core:text id="CollectionPointText">
    <core:text>#{empty (collectDetailsItem.collectionPointDescription) ? collectDetailsItem.collectionPointKey.collectionPointId : collectDetailsItem.collectionPointDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionHeaderDetailsCollectionTimeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionHeaderDetailsCollectionTimeLabel">
                            <core:elements>
<core:text messageId="COLLECTION_TIME" id="CollectionTimeLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="RightColumn" visibility="#{!empty (collectDetailsItem.collectionDate)}" id="CollectionHeaderDetailsCollectionTime">
                            <core:elements>
<core:text id="CollectionTimeText">
    <core:formatters>
        <core:formatDate pattern="shortTime"/>
    </core:formatters>
    <core:text>#{collectDetailsItem.collectionDate}</core:text>
</core:text>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="CollectionDateText">
    <core:formatters>
        <core:formatDate pattern="shortDate"/>
    </core:formatters>
    <core:text>#{collectDetailsItem.collectionDate}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionHeaderDetailsCollectionPackagesLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionHeaderDetailsCollectionPackagesLabel">
                            <core:elements>
<core:text messageId="COLLECTION_NUMBER_OF_PACKAGES" id="CollectionPackagesLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="RightColumn" id="CollectionHeaderDetailsCollectionPackages">
                            <core:elements>
<core:text id="CollectionPackagesText">
    <core:formatters>
        <core:formatNumber/>
    </core:formatters>
    <core:text>#{collectDetailsItem.numberOfPackages}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionHeaderCustomer">
        <core:elements>
            <core:assign to="customerName" type="com.enactor.mfc.name.Name" value="sale.customerRetailDetails.customerName" id="CollectionHeaderCustomerName"/>
            <core:assign to="customerAddress" type="com.enactor.mfc.address.Address" value="sale.customerRetailDetails.customerAddress" id="CollectionHeaderCustomerAddress"/>
            <core:row id="CollectionHeaderCustomerRow">
                <core:rowLine id="CollectionHeaderCustomerNameLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionHeaderCustomerNameLabel">
                            <core:elements>
<core:text messageId="COLLECTION_CUSTOMER_NAME" id="CustomerNameLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="RightColumn" visibility="#{!empty(customerName)}" id="CollectionHeaderCustomerFullName">
                            <core:elements>
<core:text id="CustomerTitleText">
    <core:text>#{customerName.title}</core:text>
</core:text>
<core:text visibility="#{!empty(customerName.title)}" id="TitleSpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="CustomerForenameFText">
    <core:text>#{customerName.forename}</core:text>
</core:text>
<core:text visibility="#{!empty(customerName.forename)}" id="ForenameSpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="CustomerSurnameText">
    <core:text>#{customerName.surname}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionHeaderCustomerContactLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionHeaderCustomerContactLabel">
                            <core:elements>
<core:text messageId="COLLECTION_CUSTOMER_TEL" id="CustomerContactLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="RightColumn" visibility="#{!empty(customerAddress)}" id="CollectionHeaderCustomerContactDetails">
                            <core:elements>
<core:text id="CustomerContactDetailsText">
    <core:text>#{empty(customerAddress.phone1) ? (empty(customerAddress.mobilePhone) ? customerAddress.phone2 : customerAddress.mobilePhone) : customerAddress.phone1}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="savingsSummary">
        <core:elements>
            <core:assign to="savingsSummary" type="java.lang.Long" value="0" id="SavingsSummaryAssign"/>
            <core:tableTemplate listVariableName="item" list="#{basket.nonTenderItemIterator}" id="savingSummaries">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IModifiableItem" applicability="#{!item.voided}" formatId="itemSavingsSummary"/>
                <core:formatElement id="hideSavingsSummaryItem"/>
            </core:tableTemplate>
            <core:row visibility="#{savingsSummary &lt; 0}" id="SavingsSummaryRow">
                <core:rowLine id="SavingsSummaryLine">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="TLCol2" id="SavingsSummaryValue">
                            <core:elements>
<core:text messageId="SAVINGS_SUMMARY" id="SavingsSummaryValueLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="SavingsSummaryValueText">
    <core:formatters>
        <core:formatCurrencyAmount absValue="true"/>
    </core:formatters>
    <core:text>#{savingsSummary}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemSavingsSummary">
        <core:elements>
            <core:tableTemplate listVariableName="modifier" list="#{item.modifiers}" id="savingSummariesModifiers">
                <core:formatElement applicability="#{modifier.voided}" id="hideVoidedItemModifier"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IEmployeeDiscountModifier" formatId="modifierSavingsSummary"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDiscountModifier" formatId="modifierSavingsSummary"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IPromotionValueModifier" formatId="modifierSavingsSummary"/>
                <core:formatElement id="hideItemModifier"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="modifierSavingsSummary">
        <core:elements>
            <core:assign to="savingsSummary" value="#{savingsSummary + modifier.effectiveValue}" id="SavingsSummaryAssign"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="checkMultipleCollections">
        <core:elements>
            <core:assign to="collectionCount" type="java.lang.Integer" value="0" id="CheckMultipleCollectionsCount"/>
            <core:tableTemplate listVariableName="item" list="#{basket.nonTenderItemIterator}" id="multipleCollectionCheck">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IVoidableItem" applicability="#{item.voided}" id="hideVoidedItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ICollectDetailsItem" formatId="countCollections"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IAlterationServiceDetailItem" applicability="mfcBasket:itemHasModifier(item, 'com.enactor.mfc.basket.items.ICollectModifier')" formatId="countAlterations"/>
                <core:formatElement id="hideMultipleCollectionItem"/>
            </core:tableTemplate>
            <core:assign to="multipleCollections" value="#{collectionCount &gt; 1}" id="CheckMultipleCollectionsCount"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="countCollections">
        <core:elements>
            <core:assign to="collectionCount" value="#{collectionCount + 1}" id="CountCollectionsCount"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="countAlterations">
        <core:elements>
            <core:assign to="collectionCount" value="#{collectionCount + 1}" id="CountAlterationsCount"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptBody">
        <core:elements>
            <core:formatElement formatId="collectionReceiptBodyDetailsList"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptBodyDetailsList">
        <core:elements>
            <core:tableTemplate listVariableName="collectDetailsItem" list="#{basket.nonTenderItemIterator}" id="collectionDetailsItems">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ICollectDetailsItem" applicability="#{!collectDetailsItem.voided}" formatId="collectionReceiptBodyDetails"/>
                <core:formatElement id="hideCollectionDetailsItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptBodyDetails">
        <core:elements>
            <core:formatElement formatId="basketCollectItemsList"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="getLastDispatchDetailsItemList">
        <core:elements>
            <core:tableTemplate list="#{basket.nonTenderItemIterator}" id="GetLastDispatchDetailsItem">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IDispatchDetailsItem" applicability="#{!item.voided}" formatId="saveDispatchDetailsItem"/>
                <core:formatElement id="hideLastDispatchDetailsItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="saveDispatchDetailsItem">
        <core:elements>
            <core:assign to="dispatchDetailsItem" value="#{item}" id="SaveDispatchDetailsItem"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="getLastOrderDetailsItemList">
        <core:elements>
            <core:tableTemplate list="#{basket.nonTenderItemIterator}" id="GetLastOrderDetailsItem">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IOrderDetailsItem" applicability="#{!item.voided}" formatId="saveOrderDetailsItem"/>
                <core:formatElement id="hideLastOrderDetailsItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="saveOrderDetailsItem">
        <core:elements>
            <core:assign to="orderDetailsItem" value="#{item}" id="SaveOrderDetailsItem"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="alterationHeaderDetails">
        <core:elements>
            <core:row id="AlterationHeaderDetailsRow">
                <core:rowLine id="AlterationHeaderDetailsLineTitle">
                    <core:elements>
                        <core:column maxLines="0" align="LEFT" columnDefId="TLCol1" id="AlterationHeaderDetailsTerminalNumberTitle">
                            <core:elements>
<core:text messageId="TILL_ID" style="BOLD" id="AlterationHeaderDetailsTerminalNumberTitleText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="LEFT" columnDefId="TLCol2" id="AlterationHeaderDetailsTransactionIdTitle">
                            <core:elements>
<core:text messageId="ALTERATION_TRANSACTION_ID" style="BOLD" id="AlterationHeaderDetailsTransactionIdTitleText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="LEFT" columnDefId="TLCol3" id="AlterationHeaderDetailsAssistantTitle">
                            <core:elements>
<core:text messageId="ALTERATION_ASSISTANT" style="BOLD" id="AlterationHeaderDetailsAssistantTitleText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="AlterationHeaderDetailsLineDetails">
                    <core:elements>
                        <core:column maxLines="0" align="LEFT" columnDefId="TLCol1" id="AlterationHeaderDetailsTerminalNumberDetails">
                            <core:elements>
<core:text id="AlterationHeaderDetailsTerminalNumberDetailsText">
    <core:text>#{transaction.completedBy.terminalNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="LEFT" columnDefId="TLCol2" id="AlterationHeaderDetailsTransactionNumberDetails">
                            <core:elements>
<core:text id="AlterationHeaderDetailsTransactionNumberDetailsText">
    <core:text>#{transaction.completedBy.transactionNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" align="LEFT" columnDefId="TLCol3" id="AlterationHeaderDetailsAssistantNameDetails">
                            <core:elements>
<core:text id="AlterationHeaderDetailsAssistantNameDetailsText">
    <core:text>#{transaction.completedBy.printableName}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="AlterationHeaderDetailsLineDate">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="AlterationHeaderDetailsDate">
                            <core:elements>
<core:text id="AlterationHeaderDetailsDateText">
    <core:formatters>
        <core:formatDate pattern="shortDateTime"/>
    </core:formatters>
    <core:text>#{transaction.dateTimeCompleted}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="headerTaxSchemeOverride">
        <core:elements>
            <core:assign to="taxSchemeOverrideItem" value="#{null}" id="HeaderTaxSchemeOverride"/>
            <core:formatElement formatId="getHeaderItems"/>
            <core:row id="HeaderTaxSchemeOverrideRow">
                <core:rowLine visibility="#{instanceOf(transaction, 'com.enactor.mfc.retail.transaction.IRetailSaleTransaction') &amp;&amp; notEmpty(transaction.overrideTaxSchemeKey)}" id="HeaderTaxSchemeOverrideTaxSchemeLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="HeaderTaxSchemeOverrideTaxScheme">
                            <core:elements>
<core:text messageId="TAX_SCHEME_OVERRIDDEN" id="TaxSchemeOverriddenLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="TaxSchemeOverriddenText">
    <core:text></core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(taxSchemeOverrideItem) &amp;&amp; notEmpty(taxSchemeOverrideItem.reasonKey)}" id="HeaderTaxSchemeOverrideTaxSchemeReasonLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="HeaderTaxSchemeOverrideTaxSchemeReason">
                            <core:elements>
<core:text id="HeaderTaxSchemeOverrideTaxSchemeReasonText">
    <core:text></core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="overrideTaxScheme" keyValue="#{transaction.overrideTaxSchemeKey}"/>
            <core:entityReference name="taxSchemeOverrideReason" keyValue="#{taxSchemeOverrideItem.reasonKey}"/>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="getHeaderItems">
        <core:elements>
            <core:tableTemplate list="#{basket.nonTenderItemIterator}" id="getHeaderItemTable">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.ITaxSchemeOverrideItem" applicability="#{!item.voided}" formatId="saveTaxSchemeOverrideItem"/>
                <core:formatElement id="hideHeaderItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="saveTaxSchemeOverrideItem">
        <core:elements>
            <core:assign to="taxSchemeOverrideItem" value="#{item}" id="SaveTaxSchemeOverrideItem"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionReceiptCustomer">
        <core:elements>
            <core:assign to="customerName" type="com.enactor.mfc.name.Name" value="sale.customerRetailDetails.customerName" id="CollectionReceiptCustomerName"/>
            <core:assign to="customerAddress" type="com.enactor.mfc.address.Address" value="sale.customerRetailDetails.customerAddress" id="CollectionReceiptCustomerAddress"/>
            <core:assign to="name1" type="java.lang.String" value="''" id="CollectionReceiptCustomerSpace"/>
            <core:assign to="name1" type="java.lang.String" value="#{concat(name1, customerName.title)}" id="CollectionReceiptCustomerTitle"/>
            <core:assign to="name1" type="java.lang.String" value="#{concat(name1, notEmpty(customerName.title) ? ' ' : '')}" id="CollectionReceiptCustomerSpace"/>
            <core:assign to="name1" type="java.lang.String" value="#{concat(name1, customerName.forename)}" id="CollectionReceiptCustomerForename"/>
            <core:row id="CollectionReceiptCustomerRow">
                <core:rowLine id="CollectionReceiptCustomerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionReceiptCustomerLabel">
                            <core:elements>
<core:text messageId="COLLECTION_CUSTOMER_NAME" id="CollectionReceiptCustomerLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="RightColumn" id="CollectionReceiptCustomerFullName">
                            <core:elements>
<core:text id="CollectionReceiptCustomerFullNameText">
    <core:text>#{name1}</core:text>
</core:text>
<core:text visibility="#{length(name1) + 1 + length(customerName.surname) &lt;= 24}" id="CollectionReceiptCustomerSurnameText">
    <core:text> #{customerName.surname}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:line visibility="#{length(name1) + 1 + length(customerName.surname) &gt; 24}" id="CollectionReceiptCustomerFullNameLine">
                            <core:elements>
<core:column maxLines="0" columnDefId="RightColumn" id="CollectionReceiptCustomerFullName">
    <core:elements>
        <core:text visibility="#{length(name1) + 1 + length(customerName.surname) &gt; 24}" id="CollectionReceiptCustomerFullNameText">
            <core:text> #{customerName.surname}</core:text>
        </core:text>
    </core:elements>
</core:column>
                            </core:elements>
                        </core:line>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="name1">
                <core:interfaceName>java.lang.String</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="collectionAdditionalDataList">
        <core:elements>
            <core:tableTemplate listVariableName="data" list="#{collectDetailsItem.additionalData}" id="additionalDataList">
                <core:formatElement applicableClassName="com.enactor.core.jaxb.StringKeyValue" formatId="collectionAdditionalData"/>
                <core:formatElement id="hideAdditionalDataItem"/>
            </core:tableTemplate>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="collectDetailsItem">
                <core:interfaceName>com.enactor.mfc.basket.items.ICollectDetailsItem</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="collectionAdditionalData">
        <core:elements>
            <core:row id="CollectionAdditionalDataRow">
                <core:rowLine id="CollectionAdditionalDataLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="RightColumn" id="CollectionAdditionalDataLineValue">
                            <core:elements>
<core:text id="CollectionReceiptCustomerFullNameText">
    <core:text>#{data.value}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionAdditionalDataLineKey">
                            <core:elements>
<core:text id="CollectionAdditionalDataLineKeyText">
    <core:text>#{data.key}</core:text>
</core:text>
<core:text id="ColonText">
    <core:text>:</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="data">
                <core:interfaceName>com.enactor.core.jaxb.StringKeyValue</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="collectionNotes">
        <core:elements>
            <core:row id="CollectionNotesRow">
                <core:rowLine id="CollectionNotesLabelLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="ItemMain" id="CollectionNotesLabel">
                            <core:elements>
<core:text messageId="COLLECTION_INSTRUCTIONS" id="CollectionNotesLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visible="false" id="CollectionNotesItemLine">
                    <core:elements>
                        <core:column maxLines="0" wrap="true" align="LEFT" id="CollectionNotesItem">
                            <core:elements>
<core:text id="CollectionNotesItemText">
    <core:text>#{collectDetailsItem.notes}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionNotesItemFirstLine">
                    <core:elements>
                        <core:column maxLines="0" align="LEFT" id="CollectionNotesItemFirst">
                            <core:elements>
<core:text id="CollectionNotesItemFirstText">
    <core:text>#{strings:substring(collectDetailsItem.notes, 0, 48)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionNotesItemSecondLine">
                    <core:elements>
                        <core:column maxLines="0" align="LEFT" id="CollectionNotesItemSecond">
                            <core:elements>
<core:text id="CollectionNotesItemSecondText">
    <core:text>#{strings:substring(collectDetailsItem.notes, 48, 96)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="collectDetailsItem">
                <core:interfaceName>com.enactor.mfc.basket.items.ICollectDetailsItem</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="collectionAssociate">
        <core:elements>
            <core:row id="CollectionAssociateRow">
                <core:rowLine id="CollectionAssociateLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="RightColumn" id="CollectionAssociateLineName">
                            <core:elements>
<core:text visibility="#{notEmpty (user.userName)}" id="ForenameText">
    <core:text>#{user.userName.forename}</core:text>
</core:text>
<core:text visibility="#{notEmpty (user.userName) &amp;&amp; notEmpty(user.userName.forename)}" id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text visibility="#{notEmpty (user.userName)}" id="SurnameText">
    <core:text>#{user.userName.surname}</core:text>
</core:text>
<core:text visibility="#{isEmpty (user.userName)}" id="DisplayNameText">
    <core:text>#{user.displayName}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionAssociateLineLabel">
                            <core:elements>
<core:text messageId="COLLECTION_ASSISTANT" id="CollectionAssociateLineLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionAssociateItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="RightColumn" id="CollectionAssociateItemLineContact">
                            <core:elements>
<core:text id="CollectionAssociateItemLineContactText">
    <core:text>#{collectDetailsItem.salesAssociatesPhoneExt}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="LeftColumn" id="CollectionAssociateItemLineLabel">
                            <core:elements>
<core:text messageId="COLLECTION_SALE_ASSOCIATES_PHONE_EXT" id="CollectionAssociateItemLineLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="collectDetailsItem">
                <core:interfaceName>com.enactor.mfc.basket.items.ICollectDetailsItem</core:interfaceName>
            </core:variable>
            <core:variable required="true" name="user">
                <core:interfaceName>com.enactor.mfc.user.IUser</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="collectionHeader">
        <core:elements>
            <core:row id="CollectionHeaderRow">
                <core:rowLine id="CollectionHeaderCustomerLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" id="CollectionHeaderCustomerLabel">
                            <core:elements>
<core:text fontStyle="" messageId="COLLECTION_HEADER_CUSTOMER" style="BOLD;DOUBLE_HIGH;DOUBLE_WIDE" id="CollectionHeaderCustomerLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine id="CollectionHeaderLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullCentre" id="CollectionHeaderLabel">
                            <core:elements>
<core:text fontStyle="" messageId="COLLECTION_HEADER" style="BOLD;DOUBLE_HIGH;DOUBLE_WIDE" id="CollectionHeaderLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="collectionItems">
        <core:elements>
            <core:row id="CollectionItemsRow">
                <core:rowLine id="CollectionItemsLabelLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="CollectionItemsLabel">
                            <core:elements>
<core:text fontStyle="BOLD" messageId="COLLECTION_GOODS" id="CollectionItemsLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:assign to="collectionCount" type="java.lang.Integer" value="0" id="CollectionItemsCount"/>
            <core:tableTemplate listVariableName="item" list="#{basket.nonTenderItemIterator}" id="collectionItems">
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IMerchandiseItem" applicability="#{!item.voided}" formatId="collectMerchandiseItem"/>
                <core:formatElement id="hideCollectionItem"/>
            </core:tableTemplate>
            <core:row id="CollectionItemsRow">
                <core:rowLine id="CollectionItemsCountLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="CollectionItemsCount">
                            <core:elements>
<core:text fontStyle="BOLD" messageId="COLLECTION_TOTAL_ITEMS" id="CollectionItemsCountLabelText"/>
<core:text id="SpaceText">
    <core:text> </core:text>
</core:text>
<core:text id="CollectionItemsCountText">
    <core:text>#{collectionCount}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="basket">
                <core:interfaceName>com.enactor.mfc.basket.IBasket</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="collectMerchandiseItem">
        <core:elements>
            <core:row id="CollectMerchandiseItemRow">
                <core:rowLine id="CollectMerchandiseItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="7" id="CollectMerchandiseItem">
                            <core:elements>
<core:text id="ItemQuantityText">
    <core:text>#{item.quantity}</core:text>
</core:text>
<core:text messageId="COLLECTION_QTY_CHAR" id="CollectionQuantityCharLabelText"/>
<core:text id="GroupIdText">
    <core:text>#{item.MMGroupId} </core:text>
</core:text>
<core:text id="ProductIdText">
    <core:text>#{item.productID} </core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:assign to="collectionCount" type="java.lang.Integer" value="collectionCount +1" id="CollectMerchandiseItemCount"/>
        </core:elements>
        <core:variables>
            <core:variable required="true" name="item">
                <core:interfaceName>com.enactor.mfc.basket.items.IMerchandiseItem</core:interfaceName>
            </core:variable>
            <core:variable required="true" name="collectionCount">
                <core:interfaceName>java.lang.Integer</core:interfaceName>
            </core:variable>
        </core:variables>
    </core:formatEntry>
    <core:formatEntry id="repairOrderDetailsItem">
        <core:elements>
            <core:row id="RepairOrderDetailsItemRow">
                <core:rowLine id="RepairOrderDetailsItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="FullLeft" id="RepairOrderDetailsItemReference">
                            <core:elements>
<core:text messageId="REPAIR_NUMBER" id="RepairNumberLabelText"/>
<core:text id="OrderReferenceText">
    <core:text> #{item.orderReference}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemPanSeq">
        <core:elements>
            <core:row>
                <core:rowLine visibility="#{item.cardDetails.ICC &amp;&amp; !empty item.ICCResults.PANSequenceNumber}">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="CardDetailsTag" id="CardDetailsTag">
                            <core:elements>
<core:text messageId="PAN_SEQ"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="CardDetailsData" id="CardDetailsData">
                            <core:elements>
<core:text messageId="COLON_SPACE"/>
<core:text>
    <core:text>#{cardTenderItem.ICCResults.PANSequenceNumber}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemCardVerificationMessage">
        <core:elements>
            <core:row id="CardVerificationMessageRow">
                <core:rowLine visibility="#{cardTenderItem.signatureRequired &amp;&amp; cardTenderItem.tenderAmount != 0}" id="CardHolderSignatureVerifiedRowLine">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="CardHolderSignatureVerifiedLabel">
                            <core:elements>
<core:text messageId="CARDHOLDER_SIGNATURE_VERIFIED" id="CardHolderSignatureVerifiedLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.ICCResults.PINVerified}" id="CardHolderPinVerifiedRowLine">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="CardHolderPinVerifiedLabel">
                            <core:elements>
<core:text messageId="CARDHOLDER_PIN_VERIFIED" id="CardHolderPinVerifiedLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{item.ICCResults.CDCVM}" id="CardHolderDeviceVerifiedRowLine">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="CardHolderDeviceVerifiedLabel">
                            <core:elements>
<core:text messageId="CARDHOLDER_DEVICE_VERIFIED" id="CardHolderDeviceVerifiedLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{cardTenderItem.cardholderNotPresent}" id="CardHolderNotPresentRowLine">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="CardHolderNotPresentLabel">
                            <core:elements>
<core:text messageId="CARDHOLDER_NOT_PRESENT" id="CardHolderNotPresentLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{!cardTenderItem.ICCResults.PINVerified &amp;&amp; !cardTenderItem.signatureRequired &amp;&amp; !cardTenderItem.ICCResults.CDCVM &amp;&amp; !cardTenderItem.cardholderNotPresent}" id="CardHolderNoCvmRowLine">
                    <core:elements>
                        <core:column maxLines="0" align="CENTRE" columnDefId="0" id="CardHolderNoCvmLabel">
                            <core:elements>
<core:text messageId="CARDHOLDER_NO_CVM" id="CardHolderNoCvmLabelText"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="itemCardToken">
        <core:elements>
            <core:row id="CardTokenRow">
                <core:rowLine id="CardTokenRowLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="CardDetailsTag" id="CardTokenLabel">
                            <core:elements>
<core:text messageId="CARD_TOKEN" id="CardTokenLabelText"/>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="CardDetailsData" id="CardToken">
                            <core:elements>
<core:text messageId="COLON_SPACE" id="ColonSpaceLabelText"/>
<core:text id="CardTokenText">
    <core:text>#{item.cardDetails.PANToken}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="customerAccountMovementItem">
        <core:elements>
            <core:row id="CustomerAccountMovementItemRow">
                <core:rowLine id="CustomerAccountMovementItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="CustomerAccountMovementItemDescription">
                            <core:elements>
<core:text id="CustomerAccountMovementItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="CustomerAccountMovementItemValue">
                            <core:elements>
<core:formatElement formatId="itemValue"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.customerAccountDetails.cardDetails.cardDescription)}" id="CustomerAccountMovementItemCardLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="CustomerAccountMovementItemCardDescriptioin">
                            <core:elements>
<core:text id="CustomerAccountMovementItemCardDescriptioinText">
    <core:text>#{item.customerAccountDetails.cardDetails.cardDescription}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
                <core:rowLine visibility="#{notEmpty(item.customerAccountDetails.cardDetails.mangledPAN)}" id="CustomerAccountMovementItemCardDetailsLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="6" id="CustomerAccountMovementItemCardDetails">
                            <core:elements>
<core:text id="CustomerAccountMovementItemCardDetailsText">
    <core:text>#{item.customerAccountDetails.cardDetails.mangledPAN}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionVoidItemVoidedItems">
        <core:elements>
            <core:tableTemplate listVariableName="void" list="#{transactionVoid.childItems}" style="STRIKEOUT" id="Items">
                <core:formatElement applicability="#{void.voided}" id="hideVoidedChildItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IVoidItem" applicability="#{instanceOf(void.voidedItem, 'com.enactor.mfc.basket.items.IMerchandiseItem') &amp;&amp; abs(void.voidedItem.quantity) == 1 &amp;&amp; (void.voidedItem.unitType == null || enumEquals(void.voidedItem.unitType, 'UNIT'))}" formatId="transactionVoidMerchandiseItem"/>
                <core:formatElement applicableClassName="com.enactor.mfc.basket.items.IVoidItem" applicability="#{instanceOf(void.voidedItem, 'com.enactor.mfc.basket.items.IMerchandiseItem')}" formatId="transactionVoidMerchandiseItemMultiple"/>
                <core:formatElement id="hideAnyItem"/>
            </core:tableTemplate>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="transactionVoidMerchandiseItem">
        <core:elements>
            <core:assign to="item" type="com.enactor.mfc.basket.items.IMerchandiseItem" value="#{void.voidedItem}" id="ItemAssign"/>
            <core:formatElement formatId="merchandiseItemStandardDetails"/>
            <core:formatElement formatId="merchandiseItemStyleColourSize"/>
            <core:formatElement formatId="merchandiseItemOtherDetails"/>
            <core:formatElement applicability="#{item.voided &amp;&amp; item.receiptControl != null &amp;&amp; !empty item.receiptControl.receiptMessage}" formatId="receiptMessage"/>
            <core:formatElement applicability="#{item.voided}" formatId="itemModifiers"/>
            <core:formatElement applicability="#{item.voided}" formatId="merchandiseItemTrailer"/>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="fieldValidatorDefinition" entityName="fieldValidatorDefinition" entityNamespace="http://www.enactor.com/coreui">
                <core:keyProperty name="fieldValidatorId" value="#{item.referenceNumberValidatorId}"/>
            </core:entityReference>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="transactionVoidMerchandiseItemMultiple">
        <core:elements>
            <core:assign to="item" type="com.enactor.mfc.basket.items.IMerchandiseItem" value="#{void.voidedItem}" id="ItemAssign"/>
            <core:formatElement formatId="merchandiseItemStandardDetailsMultiple"/>
            <core:formatElement formatId="merchandiseItemStyleColourSize"/>
            <core:formatElement formatId="merchandiseItemOtherDetails"/>
            <core:formatElement applicability="#{item.voided}" formatId="itemModifiers"/>
            <core:formatElement applicability="#{item.voided}" formatId="merchandiseItemTrailer"/>
        </core:elements>
        <core:entityReferences>
            <core:entityReference name="fieldValidatorDefinition" entityName="fieldValidatorDefinition" entityNamespace="http://www.enactor.com/coreui">
                <core:keyProperty name="fieldValidatorId" value="#{item.referenceNumberValidatorId}"/>
            </core:entityReference>
        </core:entityReferences>
    </core:formatEntry>
    <core:formatEntry id="noteItem">
        <core:elements>
            <core:row id="NoteItemRow">
                <core:rowLine id="NoteItemLine">
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="NoteItemDescription">
                            <core:elements>
<core:text id="NoteItemDescriptionText">
    <core:text>#{mfcBasket:resolveItemDescription(item, formatter)}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="giftCardNumber">
        <core:elements>
            <core:text id="NonMerchandiseItemGiftCardText">
                <core:text>#{notEmpty(item.giftCardDetails.cardDetails.mangledPAN) ? item.giftCardDetails.cardDetails.mangledPAN : item.giftCardDetails.accountId} </core:text>
            </core:text>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry id="ageRestrictedRefusalItem">
        <core:elements>
            <core:row style="STRIKEOUT">
                <core:rowLine>
                    <core:elements>
                        <core:column maxLines="0" columnDefId="2" id="2">
                            <core:elements>
<core:text>
    <core:text>#{item.description}</core:text>
</core:text>
                            </core:elements>
                        </core:column>
                        <core:column maxLines="0" columnDefId="3" id="3">
                            <core:elements>
<core:text messageId="AGE_RESTRICTED_ITEM_REFUSED"/>
                            </core:elements>
                        </core:column>
                    </core:elements>
                </core:rowLine>
            </core:row>
            <core:formatElement formatId="lineSeparator"/>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry type="PRINT" id="tenderItemValue">
        <core:elements>
            <core:text id="TenderItemLineValueText">
                <core:formatters>
                    <core:formatCurrencyAmount/>
                </core:formatters>
                <core:text>#{item.value}</core:text>
            </core:text>
        </core:elements>
    </core:formatEntry>
    <core:formatEntry type="PRINT" id="tenderItemForeignAmount">
        <core:elements>
            <core:text id="TenderItemValueText">
                <core:formatters>
                    <core:formatCurrencyAmount/>
                </core:formatters>
                <core:text>#{item.value}</core:text>
            </core:text>
        </core:elements>
    </core:formatEntry>
</core:documentTemplate>
